<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#25972;&#29702;&#25991;&#26723;</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="set" title="&#25972;&#29702;&#25991;&#26723;" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2"></a>&#25972;&#29702;&#25991;&#26723;</h1></div><div><div class="author"><h3 class="author">myking520</h3><code class="email">&lt;<a class="email" href="mailto:158520812@qq.com">158520812@qq.com</a>&gt;</code></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="book"><a href="#d0e12">&#20195;&#30721;&#36136;&#37327;</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e17">&#22280;&#22797;&#26434;&#24230;(Cyclomatic Complexity)</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e21">&#20160;&#20040;&#26159;&#22280;&#22797;&#26434;&#24230;</a></span></dt><dt><span class="section"><a href="#d0e26">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e63">&#35745;&#31639;&#20844;&#24335;</a></span></dt><dt><span class="section"><a href="#d0e78">&#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e81">&#20363;1</a></span></dt><dt><span class="section"><a href="#d0e89">&#20363;2</a></span></dt><dt><span class="section"><a href="#d0e97">&#20363;3</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e110">&#27979;&#35797;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e113">&#27979;&#35797;&#27493;&#39588;</a></span></dt><dt><span class="section"><a href="#d0e129">&#30830;&#23450;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#31639;&#27861;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e154">&#24635;&#32467;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e175">RFC(Response of Class)</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e179">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e202">&#20363;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e208">LCOM4</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e212">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e223">&#22914;&#20309;&#21028;&#26029;</a></span></dt></dl></dd></dl></dd><dt><span class="book"><a href="#d0e1106">DocBook</a></span></dt><dd><dl><dt><span class="article"><a href="#docBook-introduction">&#31616;&#20171;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1128">&#36935;&#21040;&#30340;&#38382;&#39064;</a></span></dt><dt><span class="section"><a href="#d0e1147">&#20248;&#28857;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e1186">&#31616;&#21333;&#20837;&#38376;</a></span></dt><dd><dl><dt><span class="section"><a href="#docbook-setup">&#23433;&#35013;docbook</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1196">&#19979;&#36733;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e1202">&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;</a></span></dt><dt><span class="section"><a href="#d0e1235">&#32467;&#26500;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1294">DocBook&#20351;&#29992;XIncludes&#25351;&#23450;&#22270;&#20687;&#36335;&#24452;&#30340;&#26041;&#27861; </a></span></dt><dt><span class="section"><a href="#d0e1376">&#20998;&#23376;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1415">&#22359;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1728">&#34892;&#20869;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1941">&#29305;&#27530;&#23383;&#31526;</a></span></dt><dt><span class="section"><a href="#d0e1947">&#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e1994">Callout &#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e2031">&#34920;&#26684;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2050">&#34920;&#26684;&#23454;&#20363;</a></span></dt><dt><span class="section"><a href="#d0e2134">&#36328;&#34892;&#34920;&#26684;</a></span></dt><dt><span class="section"><a href="#d0e2212">&#36328;&#21015;&#34920;&#26684;</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="book"><a href="#d0e2285">ICONIX&#25991;&#26723;</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e2298">&#31616;&#20171;</a></span></dt></dl></dd></dl></div><div class="book" title="&#20195;&#30721;&#36136;&#37327;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e12"></a>&#20195;&#30721;&#36136;&#37327;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="article"><a href="#d0e17">&#22280;&#22797;&#26434;&#24230;(Cyclomatic Complexity)</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e21">&#20160;&#20040;&#26159;&#22280;&#22797;&#26434;&#24230;</a></span></dt><dt><span class="section"><a href="#d0e26">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e63">&#35745;&#31639;&#20844;&#24335;</a></span></dt><dt><span class="section"><a href="#d0e78">&#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e81">&#20363;1</a></span></dt><dt><span class="section"><a href="#d0e89">&#20363;2</a></span></dt><dt><span class="section"><a href="#d0e97">&#20363;3</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e110">&#27979;&#35797;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e113">&#27979;&#35797;&#27493;&#39588;</a></span></dt><dt><span class="section"><a href="#d0e129">&#30830;&#23450;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#31639;&#27861;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e154">&#24635;&#32467;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e175">RFC(Response of Class)</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e179">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e202">&#20363;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e208">LCOM4</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e212">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e223">&#22914;&#20309;&#21028;&#26029;</a></span></dt></dl></dd></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>1. <a href="#d0e30"></a></dt></dl></div><div class="article" title="&#22280;&#22797;&#26434;&#24230;(Cyclomatic Complexity)"><div class="titlepage"><div><div><h1 class="title"><a name="d0e17"></a>&#22280;&#22797;&#26434;&#24230;(Cyclomatic Complexity)</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e21">&#20160;&#20040;&#26159;&#22280;&#22797;&#26434;&#24230;</a></span></dt><dt><span class="section"><a href="#d0e26">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e63">&#35745;&#31639;&#20844;&#24335;</a></span></dt><dt><span class="section"><a href="#d0e78">&#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e81">&#20363;1</a></span></dt><dt><span class="section"><a href="#d0e89">&#20363;2</a></span></dt><dt><span class="section"><a href="#d0e97">&#20363;3</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e110">&#27979;&#35797;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e113">&#27979;&#35797;&#27493;&#39588;</a></span></dt><dt><span class="section"><a href="#d0e129">&#30830;&#23450;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#31639;&#27861;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e154">&#24635;&#32467;</a></span></dt></dl></div><div class="section" title="&#20160;&#20040;&#26159;&#22280;&#22797;&#26434;&#24230;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e21"></a>&#20160;&#20040;&#26159;&#22280;&#22797;&#26434;&#24230;</h2></div></div></div><p>&#22280;&#22797;&#26434;&#24230;(Cyclomatic Complexity)&#26159;&#19968;&#31181;&#20195;&#30721;&#22797;&#26434;&#24230;&#30340;&#34913;&#37327;&#26631;&#20934;&#12290;&#23427;&#21487;&#20197;&#29992;&#26469;&#34913;&#37327;&#19968;&#20010;&#27169;&#22359;&#21028;&#23450;&#32467;&#26500;&#30340;&#22797;&#26434;&#31243;&#24230;&#65292;&#25968;&#37327;&#19978;&#34920;&#29616;&#20026;&#29420;&#31435;&#29616;&#34892;&#36335;&#24452;&#26465;&#25968;&#65292;&#20063;&#21487;&#29702;&#35299;&#20026;&#35206;&#30422;&#25152;&#26377;&#30340;&#21487;&#33021;&#24773;&#20917;&#26368;&#23569;&#20351;&#29992;&#30340;&#27979;&#35797;&#29992;&#20363;&#25968;&#12290;&#22280;&#22797;&#26434;&#24230;&#22823;&#35828;&#26126;&#31243;&#24207;&#20195;&#30721;&#30340;&#21028;&#26029;&#36923;&#36753;&#22797;&#26434;&#65292;&#21487;&#33021;&#36136;&#37327;&#20302;&#19988;&#38590;&#20110;&#27979;&#35797;&#21644;&#32500;&#25252;&#12290;&#31243;&#24207;&#30340;&#21487;&#33021;&#38169;&#35823;&#21644;&#39640;&#30340;&#22280;&#22797;&#26434;&#24230;&#26377;&#30528;&#24456;&#22823;&#20851;&#31995;&#12290;</p></div><div class="section" title="&#35828;&#26126;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e26"></a>&#35828;&#26126;</h2></div></div></div><div class="table"><a name="d0e30"></a><p class="title"><b>Table&nbsp;1.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>&#22280;&#22797;&#26434;&#24230;</th><th>&#39118;&#38505;&#35780;&#20215;</th></tr></thead><tbody><tr><td>1~10</td><td>&#19968;&#20010;&#31616;&#21333;&#30340;&#31243;&#24207;&#65292;&#27809;&#26377;&#24456;&#22823;&#30340;&#39118;&#38505;</td></tr><tr><td>11~20</td><td>&#26356;&#22797;&#26434;&#30340;&#12289; &#36866;&#24230;&#30340;&#39118;&#38505;</td></tr><tr><td>21~50</td><td>&#22797;&#26434;&#12289; &#39640;&#39118;&#38505;&#31243;&#24207;</td></tr><tr><td>50+</td><td> &#32463;&#19981;&#36215;&#27979;&#35797;&#31243;&#24207; &#65288;&#38750;&#24120;&#39640;&#39118;&#38505;&#65289; </td></tr></tbody></table></div></div><p><br class="table-break">Cyclomatic complexity&#36234;&#22823;&#65292;&#36719;&#20214;&#30340;&#22797;&#26434;&#24230;&#23601;&#36234;&#39640;&#65292;&#24320;&#21457;&#21644;&#32500;&#25252;&#36719;&#20214;&#30340;&#39118;&#38505;&#23601;&#36234;&#22823;&#65292;&#21487;&#27979;&#35797;&#24615;&#20063;&#36234;&#20302;&#12290;
            &#24403;&gt;10&#26102;&#65292;&#25105;&#20204;&#24212;&#35813;&#32771;&#34385;&#31243;&#24207;&#26412;&#36523;&#30340;&#35774;&#35745;&#26159;&#21542;&#21512;&#29702;&#65292;&#26159;&#21542;&#23384;&#22312;&#32570;&#38519;&#12290;</p></div><div class="section" title="&#35745;&#31639;&#20844;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e63"></a>&#35745;&#31639;&#20844;&#24335;</h2></div></div></div><p> V = E &#8722; N + 2P </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>E;&#36793;&#30340;&#25968;&#37327;&#65288;&#36793;&#23601;&#26159;&#36830;&#25509;&#32447;&#30340;&#25968;&#37327;&#65289;</p></li><li class="listitem"><p>N;&#33410;&#28857;&#25968;&#37327;</p></li><li class="listitem"><p>P:&#20986;&#21475;&#33410;&#28857;&#25968;&#37327;</p></li></ul></div></div><div class="section" title="&#20363;&#23376;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e78"></a>&#20363;&#23376;</h2></div></div></div><div class="section" title="&#20363;1"><div class="titlepage"><div><div><h3 class="title"><a name="d0e81"></a>&#20363;1</h3></div></div></div><div class="mediaobject"><img src="example-1.png"></div><p> E = 9, N = 8 and P = 1 &#25152;&#20197;V=9-8+1*2=3</p></div><div class="section" title="&#20363;2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e89"></a>&#20363;2</h3></div></div></div><div class="mediaobject"><img src="example-2.jpg"></div><p>E = 10, N = 8 and P = 1 &#25152;&#20197;V=10 - 8 + 1*2 = 4</p></div><div class="section" title="&#20363;3"><div class="titlepage"><div><div><h3 class="title"><a name="d0e97"></a>&#20363;3</h3></div></div></div><pre class="programlisting">  <strong class="hl-keyword">public</strong> String case2(<strong class="hl-keyword">int</strong> index, String string) {

       String returnString = null;

       <strong class="hl-keyword">if</strong> (index &lt; <span class="hl-number">0</span>) {

           <strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> IndexOutOfBoundsException(<strong class="hl-string"><em style="color:red">"exception &lt;0 "</em></strong>);

       }

       <strong class="hl-keyword">if</strong> (index == <span class="hl-number">1</span>) {

           <strong class="hl-keyword">if</strong> (string.length() &lt; <span class="hl-number">2</span>) {

              <strong class="hl-keyword">return</strong> string;

           }

           returnString = <strong class="hl-string"><em style="color:red">"returnString1"</em></strong>;

       } <strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong> (index == <span class="hl-number">2</span>) {

           <strong class="hl-keyword">if</strong> (string.length() &lt; <span class="hl-number">5</span>) {

              <strong class="hl-keyword">return</strong> string;

           }

           returnString = <strong class="hl-string"><em style="color:red">"returnString2"</em></strong>;

       } <strong class="hl-keyword">else</strong> {

           <strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> IndexOutOfBoundsException(<strong class="hl-string"><em style="color:red">"exception &gt;2 "</em></strong>);

       }

       <strong class="hl-keyword">return</strong> returnString;

    }
              
          </pre><div class="mediaobject"><p>&#31243;&#24207;&#25511;&#21046;&#27969;&#22270;</p></div><p> V(G) = e &#8211; n + 2 = 12 &#8211; 8 + 2 = 6 &#12290;case2&#30340;&#22280;&#22797;&#26434;&#27573;&#20026;6&#12290;&#35828;&#26126;&#19968;&#19979;&#20026;&#20160;&#20040;n = 8&#65292;&#34429;&#28982;&#22270;&#19978;&#30340;&#30495;&#27491;&#33410;&#28857;&#26377;12&#20010;&#65292;&#20294;&#26159;&#20854;&#20013;&#26377;5&#20010;&#33410;&#28857;&#20026;throw&#12289;return&#65292;&#36825;&#26679;&#30340;&#33410;&#28857;&#20026;end&#33410;&#28857;&#65292;&#21482;&#33021;&#35760;&#20570;&#19968;&#20010;&#12290;</p></div></div><div class="section" title="&#27979;&#35797;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e110"></a>&#27979;&#35797;</h2></div></div></div><div class="section" title="&#27979;&#35797;&#27493;&#39588;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e113"></a>&#27979;&#35797;&#27493;&#39588;</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#26681;&#25454;&#35774;&#35745;&#25110;&#20195;&#30721;&#65292;&#30011;&#25511;&#21046;&#27969;&#22270;</p></li><li class="listitem"><p>&#35745;&#31639;&#27969;&#22270;&#30340;cyclomatic number: V&#65292;&#21363;&#22522;&#26412;&#36335;&#24452;&#30340;&#20010;&#25968;</p></li><li class="listitem"><p>&#30830;&#23450;&#29420;&#31435;&#36335;&#24452;&#38598;</p></li><li class="listitem"><p>&#35774;&#35745;&#27979;&#35797;&#29992;&#20363;&#65292;&#20445;&#35777;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#36335;&#24452;&#37117;&#34987;&#36941;&#21382;&#21040;</p></li></ul></div></div><div class="section" title="&#30830;&#23450;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#31639;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e129"></a>&#30830;&#23450;&#22522;&#26412;&#36335;&#24452;&#38598;&#30340;&#31639;&#27861;</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#36873;&#25321;&#19968;&#20010;&#22522;&#32447;&#36335;&#24452;&#65292;&#20219;&#24847;&#30340;&#36335;&#24452;&#65292;&#23427;&#34920;&#31034;&#19968;&#20010;&#20856;&#22411;&#30340;&#21151;&#33021;&#65292;&#24182;&#19981;&#21482;&#26159;&#38169;&#35823;&#25110;&#24322;&#24120;&#24773;&#20917;</p></li><li class="listitem"><p>&#23450;&#20301;&#20915;&#23450;&#30340;&#31532;&#19968;&#20010;&#33410;&#28857;&#30340;&#22522;&#20934;&#36335;&#24452;&#20013;&#65292;&#36716;&#21040;&#21478;&#19968;&#20010;&#20915;&#23450;&#20998;&#25903;&#65292;&#25214;&#21040;&#31532;&#20108;&#22522;&#30784;&#36335;&#24452;</p></li><li class="listitem"><p>.&#25214;&#21040;&#31532;&#20108;&#20010;&#20915;&#23450;&#33410;&#28857;&#30340;&#22522;&#20934;&#36335;&#24452;&#20013;&#65292;&#36716;&#21040;&#19968;&#20010;&#20915;&#23450;&#20998;&#25903;&#25214;&#21040; 3 &#22522;&#30784;&#36335;&#24452;</p></li><li class="listitem"><p>&#32487;&#32493;&#25191;&#34892;&#30452;&#21040;&#20915;&#23450;&#22522;&#20934;&#36335;&#24452;&#20013;&#30340;&#25152;&#26377;&#33410;&#28857;&#37117;&#34987;&#37117;&#36941;&#21382;</p></li><li class="listitem"><p>&#25353;&#29031;&#31532;&#20108;&#20010;&#36335;&#24452;&#21644;&#36941;&#21382;&#20854;&#20915;&#23450;&#30340;&#25152;&#26377;&#33410;&#28857;</p></li><li class="listitem"><p>&#32487;&#32493;&#30452;&#21040;&#21457;&#29616;&#20102;&#22522;&#30784;&#30340;&#25152;&#26377;&#36335;&#24452;</p></li></ul></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>&#20854;&#20182;&#22522;&#30784;&#36335;&#24452;&#23581;&#35797;&#23613;&#21487;&#33021;&#25509;&#36817;&#30340;&#22522;&#20934;&#36335;&#24452; &#65307; &#23613;&#21487;&#33021;&#36981;&#24490;&#36825;&#31616;&#21270;&#20102;&#27979;&#35797;&#36755;&#20837;&#30340;&#35774;&#35745;&#12290;</p></td></tr></table></div></div></div><div class="section" title="&#24635;&#32467;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e154"></a>&#24635;&#32467;</h2></div></div></div><p>&#23545;&#20110;&#19968;&#20010;&#32467;&#26500;&#21270;&#30340;&#31243;&#24207;&#65288;&#26080;GOTO&#65289;,&#21487;&#20197;&#36890;&#36807;&#19979;&#21015;&#26041;&#27861;&#30830;&#23450;V:</p><p>V=&#20915;&#31574;&#33410;&#28857;&#25968;&#37327;+1
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>IF=1&#20915;&#31574;&#33410;&#28857;</p></li><li class="listitem"><p>3&#20010;CASE=2&#20915;&#31574;&#33410;&#28857;</p></li><li class="listitem"><p>N&#20010;CASE=(n-1)&#20915;&#31574;&#33410;&#28857;</p></li><li class="listitem"><p>Loop=1&#20915;&#31574;&#33410;&#28857;</p></li></ul></div></div></div><div class="article" title="RFC(Response of Class)"><div class="titlepage"><div><div><h1 class="title"><a name="d0e175"></a>RFC(Response of Class)</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e179">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e202">&#20363;</a></span></dt></dl></div><div class="section" title="&#35828;&#26126;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e179"></a>&#35828;&#26126;</h2></div></div></div><p>&#20182;&#26159;&#25551;&#36848;&#19968;&#20010;&#31867;&#30340;&#22797;&#26434;&#24615;</p><p>&#20844;&#24335;</p><p>RFC = M+ R (M = &#36825;&#20010;&#31867;&#20013;&#26041;&#27861;&#20010;&#25968;. R = &#20854;&#20182;&#24635;&#25968;)</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#26412;&#31867;&#30340;&#26041;&#27861;&#25968;&#37327;</p></li><li class="listitem"><p>&#35843;&#29992;&#30340;&#20854;&#20182;&#26041;&#27861;&#25968;&#37327;&#65288;&#37325;&#22797;&#30340;&#21482;&#35760;&#19968;&#27425;&#65289;</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>t getters &#21644; setters &#19981;&#35745;</p></td></tr></table></div></li></ul></div><p>&#12288;&#24403;&#19968;&#20010;&#31867;&#21644;&#24456;&#22810;&#20854;&#20182;&#31867;&#23384;&#22312;&#20381;&#36182;&#26102;&#65292;&#23427;&#23601;&#21464;&#24471;&#22797;&#26434;&#29978;&#33267;&#38590;&#20197;&#20462;&#25913;&#21644;&#32500;&#25252;&#65292;&#36825;&#26679;&#65292;RFC&#20540;&#36234;&#22823;&#65292;&#34920;&#31034;&#20320;&#30340;&#31995;&#32479;&#21619;&#36947;&#36234;&#22351;&#12290;</p><p>&#24403;&#28982;&#65292;&#22240;&#20026;OO&#31995;&#32479;&#26159;&#22522;&#20110;&#31867;&#21644;&#26041;&#27861;&#65292;&#19981;&#21487;&#33021;&#24320;&#21457;&#20986;&#19968;&#20010;0&#20540;RFC&#30340;&#31995;&#32479;&#65292;&#20294;&#26159;&#25105;&#20204;&#36861;&#27714;&#30340;&#30446;&#26631;&#26159;&#19968;&#31181;&#24179;&#34913;&#65292;&#24403;&#20320;&#35774;&#35745;OO&#31995;&#32479;&#26102;&#65292;&#24517;&#39035;&#26102;&#21051;&#27880;&#24847;&#36825;&#20123;&#20844;&#29702;&#65292;&#23613;&#37327;&#36991;&#20813;&#31867;&#30340;&#32534;&#30721;&#36798;&#21040;&#19968;&#20010;RFC&#39640;&#20540;&#12290;
           
           &#12288;&#12288;&#25105;&#20204;&#22914;&#26524;&#20351;&#29992;&#29616;&#20195;&#19968;&#20123;&#27169;&#24335;&#65306;&#22914;Ioc&#27169;&#24335;&#65292;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#26041;&#20415;&#19981;&#36153;&#21147;&#27668;&#22320;&#36798;&#21040;&#36825;&#26679;&#19968;&#20010;&#24179;&#34913;&#65292;&#22240;&#27492;&#65292;&#20351;&#29992;Spring/Jdon&#20043;&#31867;&#26694;&#26550;&#26159;&#38477;&#20302;RFC&#20540;&#30340;&#19968;&#20010;&#25463;&#24452;&#12290;</p></div><div class="section" title="&#20363;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e202"></a>&#20363;</h2></div></div></div><pre class="programlisting">
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ClassA 
{
  <strong class="hl-keyword">private</strong> ClassB classB = <strong class="hl-keyword">new</strong> ClassB();        <em class="hl-comment" style="color: silver">// call (constructor of class B) =&gt; +1</em>
  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> doSomething(){                   <em class="hl-comment" style="color: silver">// method declaration =&gt; +1</em>
    System.out.println ( <strong class="hl-string"><em style="color:red">"doSomething"</em></strong>);       <em class="hl-comment" style="color: silver">// call (System.out.println) =&gt; +1</em>
  }
  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> doSomethingBasedOnClassB(){      <em class="hl-comment" style="color: silver">// method declaration =&gt; +1</em>
    System.out.println (classB.toString());    <em class="hl-comment" style="color: silver">// call (System.out.println) =&gt; 0 because already counted on line 5 + call (toString) =&gt; +1</em>
  }
}
 
<em class="hl-comment" style="color: silver">// default constructor of ClassA =&gt; +1</em>
<em class="hl-comment" style="color: silver">// RFC = 6</em>
            
        </pre></div></div><div class="article" title="LCOM4"><div class="titlepage"><div><div><h1 class="title"><a name="d0e208"></a>LCOM4</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e212">&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#d0e223">&#22914;&#20309;&#21028;&#26029;</a></span></dt></dl></div><div class="section" title="&#35828;&#26126;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e212"></a>&#35828;&#26126;</h2></div></div></div><pre class="screen">LCOM4&#29992;&#26469;&#35828;&#26126;class&#20869;&#37096;&#26041;&#27861;&#21644;&#21464;&#37327;&#20043;&#38388;&#30340;&#20851;&#31995;, &#20540;&#36234;&#22823;, &#35828;&#26126;&#20869;&#32858;<a name="lcom4_co1"></a><img src="images/callouts/1.png" alt="1" border="0">&#24615;&#36234;&#24046;. &#19968;&#33324;&#24773;&#20917;&#19979; LCOM4=0 &#35828;&#26126;&#31867;&#27809;&#26377;&#20219;&#20309;&#26041;&#27861;&#26159;&#20010;&#19981;&#22909;&#30340;&#31867;&#12290;LCOM4=1&#26159;&#20869;&#32858;&#24615;&#26368;&#20339;&#30340;. LCOM4&gt;=2&#35828;&#26126;&#21487;&#20197;&#25286;&#25104;&#22810;&#20010;&#23567;&#31867;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#lcom4_co1"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>&#20869;&#32858;&#26159;&#25351;&#19968;&#20010;&#31867;&#20013;&#30340;&#26041;&#27861;&#30340;&#32039;&#23494;&#31243;&#24230;&#12290;&#24403;&#19968;&#20010;&#31867;&#20013;&#30340;&#20004;&#20010;&#26041;&#27861;&#19981;&#20351;&#29992;&#19968;&#20010;&#20849;&#21516;&#23646;&#24615;&#25110;&#32773;&#26041;&#27861;&#65292;&#36825;&#24847;&#21619;&#30528;&#23427;&#20204;&#27809;&#26377;&#20219;&#20309;&#20849;&#29992;&#30340;&#19996;&#35199;&#25110;&#32773;&#23427;&#20204;&#23601;&#19981;&#24212;&#35813;&#23646;&#20110;&#21516;&#19968;&#20010;&#31867;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#20320;&#24212;&#35813;&#25226;&#36825;&#20010;&#31867;&#20998;&#35299;&#20026;&#22810;&#20010;&#26032;&#31867;&#26469;&#36798;&#21040;&#31867;&#32423;&#21035;&#27169;&#22359;&#21270;&#30340;&#30446;&#30340;&#12290;</p></td></tr></table></div></div><div class="section" title="&#22914;&#20309;&#21028;&#26029;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e223"></a>&#22914;&#20309;&#21028;&#26029;</h2></div></div></div><p>&#25105;&#20204;&#26377;&#19968;&#20010;&#31867;&#65292;&#31867;&#20013;&#26377;&#20004;&#20010;&#26041;&#27861;A&#21644;B&#65292;&#22914;&#26524;&#28385;&#36275;&#19979;&#38754;&#19968;&#20010;&#26465;&#20214;&#65292;&#25105;&#20204;&#23601;&#35748;&#20026;&#36825;&#20004;&#20010;&#26041;&#27861;&#26377;&#32852;&#31995;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#20182;&#20204;&#37117;&#35843;&#29992;&#20102;&#21516;&#19968;&#20010;&#31867;&#32423;&#21035;&#30340;&#21464;&#37327;</p></li><li class="listitem"><p>&#26041;&#27861;A&#35843;&#29992;&#20102;&#26041;&#27861;B&#65292;&#25110;&#32773;&#26041;&#27861;B&#35843;&#29992;&#20102;&#26041;&#27861;A&#12290;</p></li></ul></div><div class="mediaobject"><img src="example-4.jpg"></div><p>&#24038;&#21491;&#20004;&#20010;&#22270;&#21508;&#20195;&#34920;&#30340;&#26159;&#19968;&#20010;&#31867;&#37117;&#30001;&#20004;&#21464;&#37327;x&#65292;y&#21644;5&#20010;&#26041;&#27861;&#65288;A&#65292;B&#65292;C&#65292;D&#65292;E&#65289;&#32452;&#25104;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#24038;&#31867;</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>&#26041;&#27861;A&#35843;&#29992;&#20102;&#26041;&#27861;B&#65292;&#26041;&#27861;B&#23384;&#21462;&#20102;&#23454;&#20363;&#21464;&#37327;x</p></li><li class="listitem"><p>&#26041;&#27861;C&#21644;&#26041;&#27861;D&#23384;&#21462;&#20102;&#21464;&#37327;y</p></li><li class="listitem"><p>&#26041;&#27861;D&#21448;&#35843;&#29992;&#20102;&#26041;&#27861;E</p></li></ul></div><p>&#26041;&#27861;A&#65292;B&#20197;&#21450;&#23454;&#20363;&#21464;&#37327;x&#21644;&#26041;&#27861;C&#65292;D&#65292;E&#27809;&#26377;&#20219;&#20309;&#20851;&#31995;.&#25152;&#20197;&#32570;&#20047;&#20957;&#32858;&#24230;&#37327;&#20026;2&#65292;&#24314;&#35758;&#25286;&#20998;&#20026;&#20004;&#20010;&#31867; &#31867;1 {A, B, x} and &#31867;2{C, D, E, y}</p></li><li class="listitem"><p>&#21491;&#31867;</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>&#26041;&#27861;A&#35843;&#29992;&#20102;&#26041;&#27861;B&#65292;&#26041;&#27861;B&#23384;&#21462;&#20102;&#23454;&#20363;&#21464;&#37327;x</p></li><li class="listitem"><p>&#26041;&#27861;C&#21462;&#20102;&#23454;&#20363;&#21464;&#37327;x</p></li><li class="listitem"><p>&#26041;&#27861;C&#21644;&#26041;&#27861;D&#23384;&#21462;&#20102;&#21464;&#37327;y</p></li><li class="listitem"><p>&#26041;&#27861;D&#21448;&#35843;&#29992;&#20102;&#26041;&#27861;E</p></li></ul></div><p>&#36825;&#20010;&#31867;&#23601;&#26159;&#20010;&#22909;&#31867;(good class) &#32570;&#20047;&#20957;&#32858;&#24230;&#37327;&#20026;1</p></li></ul></div></div></div></div><div class="set" title="eclipse &#25554;&#20214;&#24320;&#21457;" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e275"></a>eclipse &#25554;&#20214;&#24320;&#21457;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="book"><a href="#d0e280">GEF</a></span></dt><dd><dl><dt><span class="part"><a href="#d0e284">I. GEF &#25945;&#31243;2</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e289">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e292">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e297">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e303">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e309">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e315">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e321">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e330">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e334">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e347">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e350">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e389">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e404">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e474">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e479">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e487">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e499">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e515">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e519">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e532">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e543">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e552">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e561">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e570">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e581">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e588">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e605">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e616">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e635">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e642">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e651">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e660">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e669">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e695">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e700">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e748">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e757">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e784">Command</a></span></dt><dt><span class="section"><a href="#d0e795">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e808">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e813">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e829">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e847">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e887">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e907">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e966">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e982">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e996">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e1010">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e1019">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e1039">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1043">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e1057">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e1083">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1090">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></dd></dl></dd></dl></div><div class="book" title="GEF"><div class="titlepage"><div><div><h1 class="title"><a name="d0e280"></a>GEF</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="part"><a href="#d0e284">I. GEF &#25945;&#31243;2</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e289">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e292">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e297">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e303">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e309">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e315">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e321">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e330">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e334">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e347">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e350">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e389">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e404">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e474">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e479">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e487">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e499">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e515">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e519">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e532">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e543">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e552">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e561">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e570">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e581">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e588">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e605">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e616">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e635">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e642">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e651">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e660">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e669">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e695">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e700">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e748">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e757">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e784">Command</a></span></dt><dt><span class="section"><a href="#d0e795">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e808">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e813">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e829">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e847">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e887">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e907">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e966">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e982">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e996">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e1010">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e1019">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e1039">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1043">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e1057">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e1083">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1090">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></dd></dl></div><div class="part" title="Part&nbsp;I.&nbsp;GEF &#25945;&#31243;2"><div class="titlepage"><div><div><h1 class="title"><a name="d0e284"></a>Part&nbsp;I.&nbsp;GEF &#25945;&#31243;2</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="article"><a href="#d0e289">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e292">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e297">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e303">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e309">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e315">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e321">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e330">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e334">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e347">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e350">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e389">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e404">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e474">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e479">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e487">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e499">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e515">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e519">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e532">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e543">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e552">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e561">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e570">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e581">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e588">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e605">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e616">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e635">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e642">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e651">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e660">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e669">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e695">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e700">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e748">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e757">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e784">Command</a></span></dt><dt><span class="section"><a href="#d0e795">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e808">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e813">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e829">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e847">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e887">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e907">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e966">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e982">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e996">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e1010">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e1019">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e1039">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1043">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e1057">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e1083">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1090">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></div><div class="article" title="&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;"><div class="titlepage"><div><div><h2 class="title"><a name="d0e289"></a>&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e292">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e297">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e303">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e309">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e315">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e321">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></div><div class="section" title="&#21019;&#24314;plugin-in project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e292"></a>&#21019;&#24314;plugin-in project</h2></div></div></div><p>GEF&#21487;&#20197;&#24314;&#31435;&#22312; Eclipse&#30340; View&#20013;&#65292;&#19981;&#36807;&#26368;&#26222;&#36890;&#30340;&#26159;&#24314;&#31435;&#22312; Editor&#20013;&#65292;&#25105;&#24819;&#36825;&#26159;&#22240;&#20026; Editor&#25552;&#20379;&#20102;&#25991;
            &#20214;&#30340;&#20445;&#23384;&#26426;&#21046;&#21543;&#12290;&#20854;&#23454; View&#21644; Editor &#30340;&#21306;&#21035;&#24456;&#38590;&#35762;&#65292;&#26377;&#20852;&#36259;&#30340;&#21487;&#20197;&#30475;&#30475; RCP&#37027;&#26412;&#20070;&#12290; 
            &#25105;&#20204;&#36825;&#37324;&#30340;&#25945;&#31243;&#23601;&#26159;&#25226; GEF&#24314;&#31435;&#22312; RCP&#20043;&#19978;&#12290;&#25152;&#20197;&#25105;&#20204;&#35201;&#20808;&#24314;&#31435;&#19968;&#20010; RCP&#24037;&#31243;&#12290; </p><div class="section" title="&#36873;&#25321;plugin-in project"><div class="titlepage"><div><div><h3 class="title"><a name="d0e297"></a>&#36873;&#25321;plugin-in project</h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-1.jpg"></div></div><div class="section" title="Project name &#20026; gef.tutorial.step"><div class="titlepage"><div><div><h3 class="title"><a name="d0e303"></a>Project name &#20026; gef.tutorial.step </h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-2.jpg"></div></div><div class="section" title="&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s"><div class="titlepage"><div><div><h3 class="title"><a name="d0e309"></a>&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-3.jpg"></div></div><div class="section" title="&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e315"></a>&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-4.jpg"></div></div><div class="section" title="&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability"><div class="titlepage"><div><div><h3 class="title"><a name="d0e321"></a>&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</h3></div></div></div><p>&#20026;&#20102;&#20351;&#29992; GEF&#65292;&#25105;&#20204;&#38656;&#35201;&#32473;&#36825;&#20010;&#24037;&#31243;&#21152;&#19978; org.eclipse.gef (3.1.0)&#12290;&#25171;&#24320; plugin.xml &#25991;&#20214;&#65292;&#22312; dependencies&#39029;
                &#38754;&#20013;&#21333;&#20987; Add&#8230;&#25214;&#21040; org.eclipse.gef,OK&#21518;&#23601;&#21152;&#19978;&#20102;</p><div class="mediaobject"><img src="../../images/step1/step1-5.jpg"></div></div></div></div><div class="article" title="&#21019;&#24314; Editor"><div class="titlepage"><div><div><h1 class="title"><a name="d0e330"></a>&#21019;&#24314; Editor </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e334">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e347">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e350">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e389">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e404">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></div><div class="section" title="&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e334"></a>&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</h2></div></div></div><p>&#19979;&#38754;&#35813;&#21019;&#24314;&#26368;&#37325;&#35201;&#30340;&#37096;&#20998; Editor&#20102;&#12290; &#26368;&#36890;&#29992;&#30340;&#20363;&#23376;&#31243;&#24207;&#26159;&#25226; GEF&#30340;&#22270;&#24418;&#30011;&#22312; Editor&#19978;&#65292;&#25105;&#19981;&#26126;&#30333;&#20026;&#20160; &#20040;&#26377;&#20123;&#20154;&#24456;&#24076;&#26395;&#25226;&#22270;&#30011;&#21040;View&#19978;&#12290;
            &#20854;&#23454;Editor&#20174;EditorPart&#27966;&#29983;&#32780;&#26469;&#65292; &#25552;&#20379;&#20102;&#23545;&#22270;&#24418;&#20462;&#25913;&#21518;&#30340;&#25552;&#31034;&#20445;&#23384; &#65288;dirty &#22788;&#29702;&#65289;&#21644;&#20445;&#23384;&#31561;&#20989;&#25968;&#12290;&#20851;&#20110; Editor&#21644; View&#30340;&#20171;&#32461;&#21644;&#21306;&#21035;&#65292;&#21487;&#20197;&#21442;&#32771;&#36825;&#20004;&#26412;&#20070;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Eclipse Rich Client Platform : Designing, Coding, and Packaging Java(TM)
                        Applications (Eclipse (Addison-Wesley)) </p></li><li class="listitem"><p>Eclipse: Building Commercial-Quality Plug-ins (Eclipse Series) </p></li></ul></div><p>
        </p></div><div class="section" title="&#24320;&#22987;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e347"></a>&#24320;&#22987;</h2></div></div></div><div class="section" title="&#26032;&#24314;&#19968;&#20010;editor"><div class="titlepage"><div><div><h3 class="title"><a name="d0e350"></a>&#26032;&#24314;&#19968;&#20010;editor</h3></div></div></div><p>&#19968;&#20010;&#26368;&#22522;&#26412;&#30340; GEF &#24037;&#31243; &#24212;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#27169;&#22411;</p></li><li class="listitem"><p>&#25511;&#21046;&#22120;</p></li><li class="listitem"><p>&#35270;&#22270;</p></li></ul></div><p>&#22312;&#19979;&#38754;&#30340;&#22270;&#20013;&#21487;&#20197;&#30475;&#21040;&#25105;&#20204;&#24314;&#31435;&#20102; 3 &#20010;&#21253;&#65292; &#65288;&#21478;&#19968;&#20010;&#21253;&#26159;
            RCP &#30340;&#65289;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> gef.tutorial.step.model &#25918;&#32622;&#21644;&#27169;&#22411;&#30456;&#20851;&#30340;&#31867;</p></li><li class="listitem"><p> gef.tutorial.step.parts &#25918;&#32622;&#21644;&#25511;&#21046;&#22120;&#30456;&#20851;&#30340;&#31867;</p></li><li class="listitem"><p>gef.tutorial.step.ui  &#25918;&#32622;&#21644;&#35270; &#22270;&#30456;&#20851;&#30340;&#31867; &#26174;&#31034; GEF &#22270;&#24418;&#30340;&#26159;&#22312;
                    Editor &#30340; Viewer &#20013;&#65292;&#25152;&#20197;&#25105;&#20204;&#19979;&#38754;&#29983;&#25104;&#30340; editor &#31867;&#23601;&#24212;&#35813; &#25918;&#22312;&#36825;&#20010;&#21253;&#37324;&#38754;&#12290;</p></li></ul></div><div class="mediaobject"><img src="../../images/step2/step2-1.jpg"></div><p>&#19979;&#38754;&#25105;&#20204;&#20808;&#21019;&#24314; gef.tutorial.step.ui &#21253;&#20013;&#30340; Eclipse&#30340; editor&#25554;&#20214;&#65292;&#22240;&#20026;&#25105;&#20204;&#20250;&#21457;&#29616;&#65292;&#20197;&#21518;&#30340;&#22823;&#37096;&#20998;&#24037;&#20316;
                &#26159;&#35201;&#22312; Editor &#20013;&#20889;&#20195;&#30721;&#12290;Eclipse &#20013;&#30340; Editor &#26159;&#20174; org.eclipse.ui.part.EditorPart &#25193;&#23637;&#32780;&#26469;&#30340;&#65292;&#22240;&#20026;&#25105;&#20204;&#35201;&#25226;
                Editor &#20316;&#20026;&#25805;&#20316; GEF &#30340;&#30028;&#38754;&#65292;&#25152;&#20197;&#25105;&#20204;&#36825;&#37324;&#29983;&#25104;&#30340; DiagramEditor &#31867;&#26159;&#20174; org.eclipse.ui.part.EditorPart &#30340;&#23376;&#31867; org.eclipse.ui.parts.GraphicalEditor&#27966;&#29983;&#32780;&#26469;&#12290;&#22240;&#20026; GraphicalEditor&#31867;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#21019;&#24314;&#26174;&#31034; GEF&#22270;&#24418;&#30340;
                &#35270;&#22270; Viewer&#65292;&#36825;&#20010;&#21518;&#38754;&#20250;&#30475;&#21040;&#12290; 
                &#20851;&#20110; GraphicalEditor&#31867;&#30340;&#23618;&#27425;&#32467;&#26500;&#21487;&#20197;&#20174; help.eclipse.org&#20013;&#30475;&#21040;&#65292;&#25105;&#25226;&#23427;&#25335;&#36125;&#21040;&#20102;&#36825;&#37324;&#12290; </p><div class="mediaobject"><img src="../../images/step2/step2-2.jpg"></div><p>&#25105;&#20204;&#29983;&#25104;&#30340; DiagramEditor&#31867;&#25918;&#22312; gef.tutorial.step.ui&#21253;&#20013;&#65292;&#20195;&#30721;&#37117;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;&#20294;&#26159;&#25105;&#20204; &#35201;&#21152;&#19968;&#20010; ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;
            Editor</p><pre class="programlisting">
                package gef.tutorial.step.ui;

import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.gef.DefaultEditDomain;
import org.eclipse.gef.ui.parts.GraphicalEditor;

public class DiagramEditor extends GraphicalEditor {
	public final static String ID = "gef.tutorial.step.ui.DiagramEditor";// &#25105;&#20204;&#35201;&#21152;&#19968;&#20010;
																			// ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;
																			// Editor

	@Override
	protected void initializeGraphicalViewer() {
		// TODO Auto-generated method stub

	}

	public DiagramEditor() {
		/*
		 * Editing domain&#31649;&#29702;&#21629;&#20196;&#22534;&#26632; command stack&#12289;&#24037;&#20855;&#26465; palette viewer &#31561;&#12290;Editing
		 * domain&#36824;&#36215;&#36890;&#30693;&#22312; Graphicalviewer &#20013;&#29983;&#25104;&#30340; SWT &#20107;&#20214;&#30340;&#20316;&#29992;&#12290;&#22240;&#27492;&#65292;&#19968;&#23450;&#35201;&#24314;&#31435;&#19968;&#20010; Editing
		 * domain&#12290;&#36825;&#37324;&#65292;&#22312;
		 * DiagramEditor&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#20351;&#29992;setEditDomain()&#20989;&#25968;&#35774;&#32622;&#20102;&#19968;&#20010;org.eclipse.gef
		 * .DefaultEditDomain&#20316;&#20026; Editing domain&#12290;&#25105;&#20204;&#35201;&#35828;&#26126;&#30340;&#26159;&#65306;&#34429;&#28982;&#23545; GEF&#26469;&#35762;&#19968;&#20010; Editing
		 * domain&#24517;&#39035;&#26159;&#35774;&#32622;&#25104; Graphicalviewer &#65288;&#30452;&#30333;&#28857;&#35828;&#23601;&#26159;&#21487;&#30011;&#22270;&#30340;&#65289; &#65292;&#22240;&#20026;&#25105;&#20204;&#30340; DiagramEditor&#26159;&#20174;
		 * GraphicalEditor &#27966;&#29983;&#30340;&#65292;&#25152;&#20197;&#36825;&#37324;&#30340;&#32570;&#30465;&#30340; Editing domain&#8212;DefaultEditDomain
		 * &#20854;&#20869;&#22312;&#26159;&#34987;&#35774;&#32622;&#25104; Graphicalviewer&#30340;&#12290; &#35828;&#26126;&#65306;&#22914;&#26524;&#25105;&#20204;&#25226; Graphicalviewer &#25918;&#22312; Editor &#20013;&#26102;&#65292;&#25105;&#20204;&#20351;&#29992;
		 * DefaultEditDomain&#12290;&#22914;&#26524;&#25226; Graphicalviewer&#25918;&#22312;View&#20013;&#25110;&#32773;&#25918;&#22312;&#19968;&#20010;&#29420;&#31435;&#30340;Eclipse&#24212;&#29992;&#20013;&#26102;&#65292;
		 * &#25105;&#20204;&#35201;&#29992;org.eclipse.gef.EditDomain &#20316;&#20026; Editing domain&#12290;
		 */
		this.setEditDomain(new DefaultEditDomain(this));
	}

	@Override
	public void doSave(IProgressMonitor arg0) {
		// TODO Auto-generated method stub

	}

}

            </pre></div><div class="section" title="&#28155;&#21152;editor &#25193;&#23637;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e389"></a>&#28155;&#21152;editor &#25193;&#23637;</h3></div></div></div><p>&#22312; plugin.xml &#30340; extensions &#39029;&#38754;&#20013;&#65292;&#21333;&#20987; Add&#8230;&#25353;&#38062;&#25214;&#21040; org.eclipse.ui.editors&#65292;OK&#21518;&#23601;&#30475;&#21040;&#20102;&#12290;
            &#28982;&#21518;&#21491;&#28857;&#36825;&#20010;&#28155;&#21152;&#30340; org.eclipse.ui.editors&#65292;&#36873;&#25321; New-&gt;editor &#33756;&#21333;&#65292;&#23601;&#29983;&#25104;&#20102;&#19979;&#22270;&#30340; editor. </p><div class="mediaobject"><img src="../../images/step2/step2-3.jpg"></div><p>&#25105;&#20204;&#35201;&#20462;&#25913;&#19979;&#38754;&#30340; Extension Element Details: </p><div class="mediaobject"><img src="../../images/step2/step2-4.jpg"></div><p>&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#24819;&#21150;&#27861;&#26174;&#31034;&#36825;&#20010; DiagramEditor&#20102;&#12290;&#36825;&#37324;&#25105;&#20204;&#32473; RCP&#24037;&#31243;&#21152;&#20010;&#33756;&#21333;&#65292;&#36825;&#20010;&#33756;&#21333;&#21487;&#20197;&#25171;&#24320;
                &#19968;&#20010;&#31354;&#30333;&#30340; GEF Editor&#12290; </p></div><div class="section" title="&#28155;&#21152;&#33756;&#21333;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e404"></a>&#28155;&#21152;&#33756;&#21333;</h3></div></div></div><div class="section" title="&#21019;&#24314;&#19968;&#20010; Action &#30340;&#27966;&#29983;&#31867;"><div class="titlepage"><div><div><h4 class="title"><a name="d0e407"></a>&#21019;&#24314;&#19968;&#20010; Action &#30340;&#27966;&#29983;&#31867;</h4></div></div></div><p>&#36825;&#37324;&#38754;&#23450;&#20041;&#20102;&#33756;&#21333;&#21644;&#23545;&#24212;&#30340;&#24037;&#20855;&#25353;&#38062;&#30340;&#26174;&#31034;&#23383;&#31526;&#20018;&#21644;&#22270;&#26631;&#65292;&#20197;
                &#21450;&#20854; ID&#31561;&#31561;&#12290;&#36825;&#37324;&#30340; Action &#27966;&#29983;&#31867;&#21517;&#20026; DiagramAction&#65292;&#34987;&#25918;&#21040; gef.tutorial.step.actions&#21253;&#20013;&#12290; &#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step.actions;

import gef.tutorial.step.Activator;
import gef.tutorial.step.Application;

import org.eclipse.jface.action.Action;
import org.eclipse.jface.viewers.ISelection;
import org.eclipse.ui.ISelectionListener;
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.IWorkbenchPart;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
import org.eclipse.ui.plugin.AbstractUIPlugin;

public class DiagramAction extends Action implements ISelectionListener,IWorkbenchAction {
	private final IWorkbenchWindow window;
	public final static String ID="gef.tutorial.step.actions.DiagramAction";
	@Override
	public void selectionChanged(IWorkbenchPart arg0, ISelection arg1) {

	}
	public DiagramAction(IWorkbenchWindow window) {
		super();
		this.window = window;
		this.setId(ID);//&#28155;&#21152;id
		this.setText("&amp;Diagram");
		this.setToolTipText("Draw the GEF diagram.");
		this.setImageDescriptor(AbstractUIPlugin.imageDescriptorFromPlugin(Activator.PLUGIN_ID, "icons/alt_window_16.gif"));
		window.getSelectionService().addSelectionListener(this);
	}
	@Override
	public void dispose() {
		window.getSelectionService().removeSelectionListener(this);
		
	}

}

            </pre></div><div class="section" title="&#28155;&#21152;&#21019;&#24314;&#30340; DiagramAction"><div class="titlepage"><div><div><h4 class="title"><a name="d0e414"></a>&#28155;&#21152;&#21019;&#24314;&#30340; DiagramAction</h4></div></div></div><p>&#22312; ApplicationActionBarAdvisor.java &#25991;&#20214;&#20013;&#28155;&#21152;&#21069;&#38754;&#21019;&#24314;&#30340; DiagramAction&#12290;&#36825;&#37324;&#25105;&#20204;&#39034;&#20415;
                &#21019;&#24314;&#20102;&#19968;&#20010; Exit &#33756;&#21333;&#21644;&#19968;&#20010; About&#33756;&#21333;&#12290;&#20813;&#24471;&#25105;&#20204;&#30340; Diagram&#33756;&#21333;&#30475;&#19978;&#21435;&#22826;&#21333;&#34180;&#12290;&#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step;

import gef.tutorial.step.actions.DiagramAction;

import org.eclipse.jface.action.IMenuManager;
import org.eclipse.jface.action.MenuManager;
import org.eclipse.jface.action.Separator;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.actions.ActionFactory;
import org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
import org.eclipse.ui.application.ActionBarAdvisor;
import org.eclipse.ui.application.IActionBarConfigurer;

public class ApplicationActionBarAdvisor extends ActionBarAdvisor {
	private IWorkbenchAction about;
	private IWorkbenchAction exit;
	private IWorkbenchAction diagram;
	public ApplicationActionBarAdvisor(IActionBarConfigurer configurer) {
		super(configurer);
	}

	protected void makeActions(IWorkbenchWindow window) {
		about=ActionFactory.ABOUT.create(window);
		exit=ActionFactory.QUIT.create(window);
		diagram=new DiagramAction(window);
		register(about);
		register(exit);
		register(diagram);
	}

	protected void fillMenuBar(IMenuManager menuBar) {
		MenuManager fileMenu=new MenuManager("&amp;File", "File");
		fileMenu.add(diagram);
		fileMenu.add(new Separator());
		fileMenu.add(exit);
		MenuManager helpMenu=new MenuManager("&amp;Help", "Help");
		helpMenu.add(about);
		menuBar.add(fileMenu);
		menuBar.add(helpMenu);
	}

}

                    
                </pre><p>&#22312; plugin.xml &#25991;&#20214;&#30340; overview&#39029;&#38754;&#20013;&#28857;&#20987;&#8220;Launce an Eclipse application&#8221;&#37027;&#20010;&#38142;&#25509;&#65292;&#23601;&#21487;&#20197;&#30475;
                    &#21040;&#21152;&#36825;&#20010;&#33756;&#21333;&#30340;&#25928;&#26524;&#20102;&#12290;&#20294;&#26159;&#36825;&#20010;&#33756;&#21333;&#36824;&#19981;&#33021;&#36215;&#20219;&#20309;&#20316;&#29992;&#65292;&#22240;&#20026;&#25105;&#20204;&#22312; DiagramAction &#37027;&#20010;&#31867;&#30340; run()&#20013;&#27809;
                    &#35753;&#23427;&#20570;&#20219;&#20309;&#20107;&#24773;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#35753;&#23427;&#26174;&#31034;&#19968;&#20010;&#23545;&#35805;&#26694;&#65292;&#28982;&#21518;&#25171;&#24320;&#19968;&#20010; Diagram Editor</p><div class="mediaobject"><img src="../../images/step2/step2-5.jpg"></div></div><div class="section" title="&#26174;&#31034;&#20986;DiagramEdior"><div class="titlepage"><div><div><h4 class="title"><a name="d0e426"></a>&#26174;&#31034;&#20986;DiagramEdior</h4></div></div></div><div class="section" title="&#21019;&#24314;&#19968;&#20010;EditorInput"><div class="titlepage"><div><div><h5 class="title"><a name="d0e429"></a>&#21019;&#24314;&#19968;&#20010;EditorInput</h5></div></div></div><p>&#22240;&#20026;&#25152;&#26377;&#30340; Editor &#37117;&#35201;&#26377;&#20010; EditorInput &#20316;&#20026;&#20854;&#20869;&#23481;&#30340;&#25552;&#20379;&#32773;&#65292;&#25152;&#20197;&#25105;&#20204;&#29983;&#25104;&#20102;&#19968;&#20010;
                    DiagramEditorInput &#20316;&#20026; DiagramEditor &#30340;&#25552;&#20379;&#32773;&#12290;&#22240;&#20026;&#25105;&#20204;&#26159; RCP &#24037;&#31243;&#65292;&#25152;&#20197;&#25105;&#20204;&#30340; DiagramEditorInput
                    &#26159;&#20174; IPathEditorInput &#27966;&#29983;&#30340;&#12290;&#36825;&#37324;&#30340;&#20363;&#23376;&#22909;&#20687;&#26159;&#20174; Using GEF with EMF&#20013;&#20511;&#29992;&#26469;&#30340;&#65292;&#25105;&#35760;&#19981;&#24456;&#28165;&#26970;&#20102;&#12290;
                    &#25105;&#20204;&#19981;&#35814;&#32454;&#35848;&#36825;&#20010; EditorInput &#30340;&#20316;&#29992;&#65292;&#26377;&#30097;&#38382;&#30340;&#21487;&#20197;&#21442;&#32771; RCP &#37027;&#26412;&#20070;&#65292;&#20889;&#30340;&#24456;&#35814;&#32454;&#12290;&#21478;&#22806;&#65292;&#21069;&#38754;&#25512;&#33616;&#30340;
                    &#21478;&#22806;&#21830;&#19994;&#25554;&#20214;&#24320;&#21457;&#30340;&#20070;&#20063;&#20171;&#32461;&#30340;&#24456;&#22810;&#12290;&#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step.ui;

import org.eclipse.core.runtime.IPath;
import org.eclipse.core.runtime.Path;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.IPathEditorInput;
import org.eclipse.ui.IPersistableElement;

public class DiagramEditorInput implements IPathEditorInput {
	private IPath path;
	public DiagramEditorInput(Path path) {
		this.path=path;
	}

	@Override 
	public boolean exists() {
		return path.toFile().exists();
	}

	@Override
	public ImageDescriptor getImageDescriptor() {
		return null;
	}

	@Override
	public String getName() {
		return path.toString();
	}

	@Override
	public IPersistableElement getPersistable() {
		return null;
	}

	@Override
	public String getToolTipText() {
		return path.toString();
	}

	@Override
	public Object getAdapter(Class arg0) {
		return null;
	}

	@Override
	public IPath getPath() {
		return path;
	}

}

                    
                </pre></div><div class="section" title="&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e436"></a>&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;</h5></div></div></div><p>&#22312; DiagramAction &#20013;&#30340; run()&#20989;&#25968;&#20869;&#28155;&#21152;&#20195;&#30721;&#35753; Diagram &#33756;&#21333;&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;&#12290;&#25991;&#20214;&#30340;&#25193;
                    &#23637;&#21517;&#20026;*.diagram&#12290;</p><pre class="programlisting">
                            <strong class="hl-keyword">package</strong> gef.tutorial.step.actions;

<strong class="hl-keyword">import</strong> gef.tutorial.step.Activator;
<strong class="hl-keyword">import</strong> gef.tutorial.step.Application;
<strong class="hl-keyword">import</strong> gef.tutorial.step.ui.DiagramEditor;
<strong class="hl-keyword">import</strong> gef.tutorial.step.ui.DiagramEditorInput;

<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.Path;
<strong class="hl-keyword">import</strong> org.eclipse.jface.action.Action;
<strong class="hl-keyword">import</strong> org.eclipse.jface.viewers.ISelection;
<strong class="hl-keyword">import</strong> org.eclipse.swt.SWT;
<strong class="hl-keyword">import</strong> org.eclipse.swt.widgets.FileDialog;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IEditorInput;
<strong class="hl-keyword">import</strong> org.eclipse.ui.ISelectionListener;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbench;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchPage;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchPart;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchWindow;
<strong class="hl-keyword">import</strong> org.eclipse.ui.PartInitException;
<strong class="hl-keyword">import</strong> org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
<strong class="hl-keyword">import</strong> org.eclipse.ui.plugin.AbstractUIPlugin;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramAction <strong class="hl-keyword">extends</strong> Action <strong class="hl-keyword">implements</strong> ISelectionListener,IWorkbenchAction {
	<strong class="hl-keyword">private</strong> <strong class="hl-keyword">final</strong> IWorkbenchWindow window;
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">final</strong> <strong class="hl-keyword">static</strong> String ID=<strong class="hl-string"><em style="color:red">"gef.tutorial.step.actions.DiagramAction"</em></strong>;
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> selectionChanged(IWorkbenchPart arg0, ISelection arg1) {

	}
	<strong class="hl-keyword">public</strong> DiagramAction(IWorkbenchWindow window) {
		<strong class="hl-keyword">super</strong>();
		<strong class="hl-keyword">this</strong>.window = window;
		<strong class="hl-keyword">this</strong>.setId(ID);<em class="hl-comment" style="color: silver">//&#28155;&#21152;id</em>
		<strong class="hl-keyword">this</strong>.setText(<strong class="hl-string"><em style="color:red">"&amp;Diagram"</em></strong>);
		<strong class="hl-keyword">this</strong>.setToolTipText(<strong class="hl-string"><em style="color:red">"Draw the GEF diagram."</em></strong>);
		<strong class="hl-keyword">this</strong>.setImageDescriptor(AbstractUIPlugin.imageDescriptorFromPlugin(Activator.PLUGIN_ID, <strong class="hl-string"><em style="color:red">"icons/alt_window_16.gif"</em></strong>));
		window.getSelectionService().addSelectionListener(<strong class="hl-keyword">this</strong>);
	}
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> dispose() {
		window.getSelectionService().removeSelectionListener(<strong class="hl-keyword">this</strong>);
		
	}
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> run() {
		String path = openFileDialog();
		<strong class="hl-keyword">if</strong> (path != null) {
			IEditorInput input = <strong class="hl-keyword">new</strong> DiagramEditorInput(<strong class="hl-keyword">new</strong> Path(path));
			IWorkbenchPage page = window.getActivePage();
			<strong class="hl-keyword">try</strong> {
				page.openEditor(input, DiagramEditor.ID, true);
			} <strong class="hl-keyword">catch</strong> (PartInitException e) {
				<em class="hl-comment" style="color: silver">// handle error</em>
			}
		}
	}
	<strong class="hl-keyword">private</strong> String openFileDialog() {
		FileDialog dialog = <strong class="hl-keyword">new</strong> FileDialog(window.getShell(), SWT.OPEN);
		dialog.setText(<strong class="hl-string"><em style="color:red">"GEF File"</em></strong>);
		dialog.setFilterExtensions(<strong class="hl-keyword">new</strong> String[] { <strong class="hl-string"><em style="color:red">".diagram"</em></strong> });
		<strong class="hl-keyword">return</strong> dialog.open();
	}
}

                    </pre></div><div class="section" title="&#35774;&#32622; Editor&#20026;&#21487;&#35265;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e443"></a>&#35774;&#32622; Editor&#20026;&#21487;&#35265;</h5></div></div></div><p>&#26368;&#21518;&#22312;Perspective.java&#25991;&#20214;&#20013;&#35774;&#32622; Editor&#20026;&#21487;&#35265;&#12290;</p><pre class="programlisting">
                        <strong class="hl-keyword">package</strong> gef.tutorial.step;

<strong class="hl-keyword">import</strong> org.eclipse.ui.IPageLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPerspectiveFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> Perspective <strong class="hl-keyword">implements</strong> IPerspectiveFactory {

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> createInitialLayout(IPageLayout layout) {
		layout.setEditorAreaVisible(true);
	}
}

                    </pre></div><div class="section" title="&#20160;&#20040;&#26159; GEF&#30340;&#36335;&#23376;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e450"></a>&#20160;&#20040;&#26159; GEF&#30340;&#36335;&#23376;</h5></div></div></div><p>&#26368;&#21518;&#22312;Perspective.java&#25991;&#20214;&#20013;&#35774;&#32622; Editor&#20026;&#21487;&#35265;&#12290;</p><div class="mediaobject"><img src="../../images/step2/step2-6.jpg"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1&#12289;&#21019;&#24314;&#27169;&#22411; &#22914;HelloModel</p></li><li class="listitem"><p>2&#12289;&#21019;&#24314;&#25511;&#21046;&#22120; editpart &#19968;&#33324;&#26126;&#26126;&#20026;HelloEditPart</p></li><li class="listitem"><p>3&#12289;&#21019;&#24314;&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#30340;&#24037;&#21378;&#65292;&#19968;&#33324;&#21629;&#21517;&#20026;**PartFactory</p></li><li class="listitem"><p>4&#12289;&#22312;edit &#20013;&#21019;&#24314;GraphicalViewer &#24182;&#26174;&#31034;&#22270;&#20687;</p></li></ul></div><p>&#25105;&#20204;&#23601;&#25353;&#19978;&#22270;&#30340;&#39034;&#24207;&#21644;&#35268;&#21017;&#23454;&#29616; GEF&#12290; </p></div></div></div></div></div><div class="article" title="GEF&#36335;&#23376;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e474"></a>GEF&#36335;&#23376;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e479">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e487">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e499">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e479"></a>&#21019;&#24314;&#27169;&#22411; </h2></div></div></div><p>&#39318;&#20808;&#25105;&#20204;&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#27169;&#22411;&#65292;&#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#21482;&#24819;&#22312; Diagram Editor&#20013;&#26174;&#31034; Hello World &#23601;&#22909;&#65292;&#25152;&#20197;&#25105;&#20204;
    &#21482;&#26377;&#19968;&#20010;&#27169;&#22411;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#27169;&#22411;&#25918;&#22312; gef.tutorial.step.model &#21253;&#20013;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel {
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;

	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	}
	
}

      </pre></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e487"></a>&#21019;&#24314;&#27169;&#22411;</h2></div></div></div><p>  &#19979;&#38754;&#35813;&#21019;&#24314;&#26174;&#31034;&#19978;&#38754;&#27169;&#22411;&#30340;&#35270;&#22270; View&#20102;&#21543;&#65292; &#20808;&#21035;&#24537;&#65292; &#25105;&#20204;&#35201;&#20808;&#21019;&#24314;&#36830;&#25509;&#35270;&#22270;&#21644;&#27169;&#22411;&#30340;&#25511;&#21046;&#22120;&#65292; &#22312; GEF
        &#20013;&#23601;&#26159; EditPart &#20102;&#12290;&#22240;&#20026;&#22312;&#21019;&#24314;&#35270;&#22270;&#30340;&#26102;&#20505;&#35201;&#25191;&#34892;&#36825;&#20010;&#25511;&#21046;&#22120;&#12290;&#38752;&#65292;&#35828;&#26159;&#20160;&#20040; MVC&#65292;&#25105;&#35273;&#24471;&#22815;&#20081;&#30340;&#12290; 
        &#37027;&#25105;&#20204;&#23601;&#21019;&#24314;&#19968;&#20010; HelloEditorPart &#21543;&#65292; &#65288;&#20854;&#23454;&#26368;&#22909;&#20889;&#25104; HelloEditPart&#65289; &#65292;&#25918;&#22312;gef.tutorial.step.parts&#21253;&#20013;&#12290;
        &#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#36825;&#37324;&#30340; HelloEditorPart&#30340;&#20027;&#35201;&#20316;&#29992;&#23601;&#26159;&#29992; Draw2D&#30340;&#20989;&#25968;&#20316;&#22270;&#65292; &#36825;&#37324;&#30340;&#22270;&#24418;&#23601;&#26159;&#22312;&#19968;&#20010; Label
        &#19978;&#20889; Hello World &#36825;&#20960;&#20010;&#23383;&#27597;&#12290; </p><p>&#22823;&#23478;&#27880;&#24847; import&#30340;&#26102;&#20505;&#35201; import&#36827;&#27491;&#30830;&#30340;&#31867;&#12290;&#35692;&#22914;&#36825;&#37324;&#23601;&#24212;&#35813; import org.eclipse.draw2d.Label&#12290;&#22240;&#20026;
    &#25105;&#20204;&#21518;&#38754;&#29992;&#30340;&#26159; Graphical Viewer&#65292;&#25105;&#20204;&#36825;&#37324;&#30340; HelloEditorPart &#23601;&#20174; AbstractGraphicalEditPart &#27966;&#29983;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Label;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		HelloModel model=(HelloModel)<strong class="hl-keyword">this</strong>.getModel();
		Label label=<strong class="hl-keyword">new</strong> Label();
		label.setText(model.getText());
		<strong class="hl-keyword">return</strong> label;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

    </pre><p>&#36825;&#37324;&#25105;&#20204;&#20351;&#29992; getModel()&#20989;&#25968;&#33719;&#24471; HelloModel &#27169;&#22411;&#12290;&#22240;&#20026;&#22312; GEF &#20013;&#27169;&#22411;&#34987;&#24403;&#20316; Object &#31867;&#22411;&#23545;&#24453;&#65292;&#25152;
        &#20197;&#25105;&#20204;&#36825;&#37324;&#36827;&#34892;&#20102;&#24378;&#21046;&#36716;&#25442;&#12290;&#36825;&#20010;&#35201;&#27880;&#24847;&#65292;&#20197;&#21518;&#25105;&#20204;&#29983;&#25104; Setters &#26102;&#20063;&#35201;&#29992; Object &#31867;&#22411;&#65292;&#28982;&#21518;&#20877;&#24378;&#21046;&#36716;&#25442;&#65292;
        &#21518;&#38754;&#20250;&#30475;&#21040;&#30340;&#12290; 
        &#36825;&#26679;&#65292;&#25105;&#20204;&#21019;&#24314;&#30340; HelloModel &#23601;&#21487;&#20197;&#34987; EditPart&#25805;&#20316;&#20102;&#65292;&#24182;&#19988; EditPart&#36824;&#32472;&#21046;&#20102;&#22270;&#24418;&#12290; </p></div><div class="section" title="&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e499"></a>&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </h2></div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#26377;&#20102;&#27169;&#22411; HelloModel&#65292;&#26377;&#20102;&#23427;
        &#26041;&#27861;&#26159;&#29992;&#24037;&#21378; Factory&#12290;&#20026;&#20160;&#20040;&#29992;&#24037;&#21378;&#27169;&#24335;&#21602;&#65292;
        &#20102;&#12290;&#24037;&#21378;&#27169;&#24335;&#22823;&#23478;&#21442;&#32771;&#27169;&#24335;&#20070;&#12290; 
        &#31616;&#21333;&#22320;&#35828;&#65292; &#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#21482;&#38656;&#20004;&#27493;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#39318;&#20808;&#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#20854;&#25511;&#21046;&#22120; </p></li><li class="listitem"><p>&#28982;&#21518;&#29992; setModel() &#20989;&#25968;&#36830;&#25509;&#27169;&#22411;&#21644;&#20854;&#25511;&#21046;&#22120;&#12290;</p></li></ul></div><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.EditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.EditPartFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> PartFactory <strong class="hl-keyword">implements</strong> EditPartFactory {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> EditPart createEditPart(EditPart context, Object model) {
		EditPart part=<strong class="hl-keyword">this</strong>.getPartForElement(model);<em class="hl-comment" style="color: silver">//&#33719;&#24471;&#25511;&#21046;&#22120;</em>
		part.setModel(model);<em class="hl-comment" style="color: silver">//&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;</em>
		<strong class="hl-keyword">return</strong> part;
	}

	<strong class="hl-tag" style="color: blue">/**
	 * &#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#25511;&#21046;&#22120;
	 * @param model
	 * @return &#25511;&#21046;&#22120;
	 */</strong>
	<strong class="hl-keyword">private</strong> EditPart getPartForElement(Object model) {
		<strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> HelloModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> HelloEditorPart();
		}
		<strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> RuntimeException(<strong class="hl-string"><em style="color:red">"Can't create part for model element: "</em></strong>
				+ ((model != null) ? model.getClass().getName()
						: <strong class="hl-string"><em style="color:red">"null"</em></strong>));
	}

}

    </pre></div></div><div class="article" title="&#31649;&#29702;&#22810;&#20010;&#27169;&#22411;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e515"></a>&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e519">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e532">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e543">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e552">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e561">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e570">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e581">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e588">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e605">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e616">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;&#65306;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e519"></a>&#20869;&#23481;&#25552;&#35201;&#65306;</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#31649;&#29702;&#22810;&#20010;&#27169;&#22411;&#12290;&#20854;&#20013;&#19968;&#20010;&#27169;&#22411; ContentsModel &#20445;&#23384;&#25972;&#20010;&#22270;&#24418;&#30340;&#20449;&#24687;&#65292;&#36825;&#20010;&#22270;&#24418;&#20013;&#25105;&#20204;&#35201;&#29992; HelloModel
          &#30340;&#23545;&#35937;&#20570;&#19977;&#20010; Hello World!</p></li><li class="listitem"><p>&#22312;&#25972;&#20010;&#22270;&#24418;&#30340; ContentsModel &#27169;&#22411;&#20013;&#20351;&#29992; Layer&#23618;&#30340;&#27010;&#24565;&#65292;&#32473;&#37324;&#38754;&#30340;&#22270;&#24418;&#21152;&#19978;&#39068;&#33394;&#31561;&#25928;&#26524;&#12290;</p></li></ul></div><p>&#19978;&#22238;&#20070;&#35828;&#21040;&#22914;&#20309;&#20351;&#29992; GEF&#26469;&#26174;&#31034; Hello World&#65292;&#20070;&#25509;&#19978;&#22238;&#65292;&#25105;&#20204;&#35201;&#20171;&#32461;&#22914;&#20309;&#25226; Hello World &#36825;&#20010;&#22270;&#24418;&#25918;
            &#21040;&#19968;&#20010;&#22270;&#24418;&#38598;&#20013;&#65292;&#36825;&#20010;&#22270;&#24418;&#38598;&#27169;&#22411;&#20445;&#23384;&#30528;&#25972;&#20010;&#22270;&#24418;&#30340;&#20449;&#24687;&#12290;&#28982;&#21518;&#25105;&#20204;&#35201;&#20351;&#29992;&#24067;&#23616;&#31649;&#29702;&#22120;&#65288;layout manager&#65289;
            XYLayout &#26469;&#32472;&#21046;&#36825;&#20010;&#22270;&#24418;&#38598;&#65292;&#36825;&#20010;&#24067;&#23616;&#31649;&#29702;&#22120;&#21487;&#20197;&#20351;&#22270;&#24418;&#33258;&#30001;&#31227;&#21160;&#12290; </p></div><div class="section" title="&#22270;&#24418;&#38598;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e532"></a>&#22270;&#24418;&#38598;&#27169;&#22411; </h2></div></div></div><p>  &#36825;&#37324;&#25105;&#20204;&#35201;&#21019;&#24314;&#19968;&#20010;&#22270;&#24418;&#38598;&#27169;&#22411; CpntentsModel&#65292;&#36825;&#20010;&#27169;&#22411;&#21253;&#25324;&#22810;&#20010; Hello World &#23545;&#35937;&#12290;&#32780;&#19988;&#36825;&#20010;&#22270;&#24418;
        &#38598;&#27169;&#22411;&#29992;&#20110;&#31649;&#29702;&#25972;&#20010;&#22270;&#24418;&#65292;&#35692;&#22914;&#35774;&#32622;&#22270;&#24418;&#30340;&#24067;&#23616;&#31561;&#12290; 
        &#22238;&#24518;&#19968;&#19979;&#19978;&#22238;&#20070;&#20013;&#26500;&#24314;&#19968;&#20010; GEF&#30340;&#36807;&#31243;&#12290;&#23545;&#20102;&#65292;&#31616;&#21333;&#22320;&#35828;&#23601;&#26159;&#65306; </p><div class="mediaobject"><img src="../../images/step4/step4-1.jpg"></div><p>  &#25105;&#22823;&#32966;&#22320;&#39044;&#35745;&#19968;&#19979;&#65292; &#20272;&#35745;&#24456;&#24555;&#20250;&#26377; GEF&#24320;&#21457;&#30340;&#25554;&#20214;&#20102;&#65292; &#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#24635;&#26159;&#35201;&#19968;&#20010;&#19968;&#20010;&#21435;&#21019;&#24314;&#36825;&#20010;&#21658;&#21658;&#65292;
        &#20854;&#23454;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#25554;&#20214;&#19968;&#27425;&#23601;&#25630;&#23450;&#19978;&#38754;&#20960;&#20010;&#25991;&#20214;&#12290; </p></div><div class="section" title="&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e543"></a>&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </h2></div></div></div><p>&#21019;&#24314; ContentsModel &#23601;&#19981;&#21776;&#20711;&#20102;&#65292;&#20195;&#30721;&#22914;&#19979; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel {

}

      </pre></div><div class="section" title="&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e552"></a>&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </h2></div></div></div><p>&#19979;&#38754;&#65292;&#25105;&#20204;&#36824;&#26159;&#20174; AbstractGraphicalEditPart &#27966;&#29983;&#19968;&#20010;&#23545;&#24212; ContentsModel &#30340; ContentsEditPart&#12290;&#25105;&#20204;&#22312;
        &#32487;&#25215;&#26469;&#30340; createFigure &#26041;&#27861;&#20013;&#32473;&#36825;&#20010;&#22270;&#24418;&#38598;&#35774;&#32622;&#19968;&#20010; Draw2D &#30340;&#22270;&#23618;&#65288;Layer &#31867;&#65289; &#65292;&#36825;&#20010;&#22270;&#23618;&#30340;&#29305;&#28857;&#26159;&#36879;&#26126;
        &#22270;&#23618;&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

      </pre></div><div class="section" title="&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e561"></a>&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </h2></div></div></div><p>  &#35828;&#36215;&#26469;&#25105;&#37117;&#35273;&#24471;&#28902;&#65292;&#25105;&#20204;&#21448;&#35201;&#22312; PartFactory.java &#20013;&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120;
    ContentsEditPart &#20102;&#12290;&#20197;&#21518;&#25105;&#20204;&#35201;&#22312; PartFactory.java&#20013;&#36830;&#25509; n &#22810;&#21658;&#21658;&#21644;&#23427;&#20204;&#30340;&#25511;&#21046;&#22120;&#12290;&#28155;&#21152;&#20195;&#30721;&#22914;&#19979;&#65306;</p><pre class="programlisting">
	<strong class="hl-tag" style="color: blue">/**
	 * &#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#25511;&#21046;&#22120;
	 * @param model
	 * @return &#25511;&#21046;&#22120;
	 */</strong>
	<strong class="hl-keyword">private</strong> EditPart getPartForElement(Object model) {
		<strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> HelloModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> HelloEditorPart();
		}<strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> ContentModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> ContentsEditPart();
		}
		<strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> RuntimeException(<strong class="hl-string"><em style="color:red">"Can't create part for model element: "</em></strong>
				+ ((model != null) ? model.getClass().getName()
						: <strong class="hl-string"><em style="color:red">"null"</em></strong>));
	}
        
    </pre></div><div class="section" title="&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e570"></a>&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </h2></div></div></div><p>&#35760;&#24471;&#25105;&#20204;&#21069;&#38754;&#22312;DiagramEditor&#31867;&#30340;initializeGraphicalViewer&#26041;&#27861;&#20013;&#25226;HelloModel&#35774;&#32622;&#20026;&#22270;&#24418;&#27169;&#22411;&#21543;&#12290;
    &#19981;&#35760;&#24471;&#30340;&#30475;&#31532; 1 &#22238;&#12290;&#36825;&#37324;&#25105;&#20204;&#35201;&#25226; ContentsModel &#35774;&#32622;&#20026;&#22270;&#24418;&#27169;&#22411;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.ui;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.parts.PartFactory;

<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.IProgressMonitor;
<strong class="hl-keyword">import</strong> org.eclipse.gef.DefaultEditDomain;
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalViewer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditor {
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">final</strong> <strong class="hl-keyword">static</strong> String ID = <strong class="hl-string"><em style="color:red">"gef.tutorial.step.ui.DiagramEditor"</em></strong>;<em class="hl-comment" style="color: silver">// &#25105;&#20204;&#35201;&#21152;&#19968;&#20010;</em>
		 																<em class="hl-comment" style="color: silver">// ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;																			// Editor</em>

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() {
		
		<strong class="hl-keyword">this</strong>.getGraphicalViewer().setContents(<strong class="hl-keyword">new</strong> ContentsModel());

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> configureGraphicalViewer() {
		<strong class="hl-keyword">super</strong>.configureGraphicalViewer();
		GraphicalViewer viewr;	
		viewr=<strong class="hl-keyword">this</strong>.getGraphicalViewer();
		viewr.setEditPartFactory(<strong class="hl-keyword">new</strong> PartFactory());
	}

	<strong class="hl-keyword">public</strong> DiagramEditor() {
		<em class="hl-comment" style="color: silver">/*
		 * Editing domain&#31649;&#29702;&#21629;&#20196;&#22534;&#26632; command stack&#12289;&#24037;&#20855;&#26465; palette viewer &#31561;&#12290;Editing
		 * domain&#36824;&#36215;&#36890;&#30693;&#22312; Graphicalviewer &#20013;&#29983;&#25104;&#30340; SWT &#20107;&#20214;&#30340;&#20316;&#29992;&#12290;&#22240;&#27492;&#65292;&#19968;&#23450;&#35201;&#24314;&#31435;&#19968;&#20010; Editing
		 * domain&#12290;&#36825;&#37324;&#65292;&#22312;
		 * DiagramEditor&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#20351;&#29992;setEditDomain()&#20989;&#25968;&#35774;&#32622;&#20102;&#19968;&#20010;org.eclipse.gef
		 * .DefaultEditDomain&#20316;&#20026; Editing domain&#12290;&#25105;&#20204;&#35201;&#35828;&#26126;&#30340;&#26159;&#65306;&#34429;&#28982;&#23545; GEF&#26469;&#35762;&#19968;&#20010; Editing
		 * domain&#24517;&#39035;&#26159;&#35774;&#32622;&#25104; Graphicalviewer &#65288;&#30452;&#30333;&#28857;&#35828;&#23601;&#26159;&#21487;&#30011;&#22270;&#30340;&#65289; &#65292;&#22240;&#20026;&#25105;&#20204;&#30340; DiagramEditor&#26159;&#20174;
		 * GraphicalEditor &#27966;&#29983;&#30340;&#65292;&#25152;&#20197;&#36825;&#37324;&#30340;&#32570;&#30465;&#30340; Editing domain&#8212;DefaultEditDomain
		 * &#20854;&#20869;&#22312;&#26159;&#34987;&#35774;&#32622;&#25104; Graphicalviewer&#30340;&#12290; &#35828;&#26126;&#65306;&#22914;&#26524;&#25105;&#20204;&#25226; Graphicalviewer &#25918;&#22312; Editor &#20013;&#26102;&#65292;&#25105;&#20204;&#20351;&#29992;
		 * DefaultEditDomain&#12290;&#22914;&#26524;&#25226; Graphicalviewer&#25918;&#22312;View&#20013;&#25110;&#32773;&#25918;&#22312;&#19968;&#20010;&#29420;&#31435;&#30340;Eclipse&#24212;&#29992;&#20013;&#26102;&#65292;
		 * &#25105;&#20204;&#35201;&#29992;org.eclipse.gef.EditDomain &#20316;&#20026; Editing domain&#12290;
		 */</em>
		<strong class="hl-keyword">this</strong>.setEditDomain(<strong class="hl-keyword">new</strong> DefaultEditDomain(<strong class="hl-keyword">this</strong>));
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> doSave(IProgressMonitor arg0) {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

    </pre><p>  &#22914;&#26524;&#20320;&#24895;&#24847;&#36816;&#34892;&#19968;&#19979;&#65292;&#20250;&#21457;&#29616;&#36825;&#26102; Diagram Editor&#19978;&#36824;&#26159;&#27809;&#26174;&#31034;&#20219;&#20309;&#22270;&#24418;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#35753;&#23427;&#26174;&#31034;&#22270;
        &#24418;&#12290; </p></div><div class="section" title="&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e581"></a>&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </h2></div></div></div><p>  &#22914;&#26524;&#25105;&#20204;&#19981;&#20165;&#20165;&#26159;&#32472;&#21046; Hello World&#30340;&#35805;&#65292;&#37027;&#20165;&#26377; HelloModel &#26159;&#19981;&#22815;&#30340;&#12290;&#25105;&#20204;&#36824;&#35201;&#26377;&#19968;&#20010;&#19978;&#23618;&#27169;&#22411;&#65292;
        &#23601;&#26159;&#21069;&#38754;&#21019;&#24314;&#30340;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel&#12290;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#22270;&#24418; HelloModel &#20043;&#38388;&#26159;&#29238;&#23376;&#20851;
        &#31995;&#65288;&#19981;&#26159;&#32487;&#25215;&#21644;&#27966;&#29983;&#20851;&#31995;&#65292;&#32780;&#26159;&#19968;&#20010;&#21253;&#21547;&#22810;&#20010;&#30340;&#20851;&#31995;&#65289; &#12290;GEF &#25552;&#20379;&#20102;&#19968;&#20010;&#26694;&#26550;&#26469;&#23454;&#29616;&#36825;&#20010;&#29238;&#23376;&#20851;&#31995;&#65292;&#21518;&#38754;
        &#25105;&#20204;&#20250;&#35848;&#21040;&#12290;&#36825;&#37324;&#25105;&#20204;&#20808;&#20805;&#23454;&#36825;&#20010;&#29238;&#27169;&#22411;&#12290; </p></div><div class="section" title="&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e588"></a>&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </h2></div></div></div><p> 
        &#22312; GEF &#20013;&#65292;&#32463;&#24120;&#20250;&#38543;&#30528;&#24212;&#29992;&#30340;&#38656;&#27714;&#65292;&#29238;&#27169;&#22411;&#20250;&#21464;&#25104;&#23376;&#27169;&#22411;&#12290;&#35692;&#22914;&#22312;&#19978;&#19968;&#22238;&#20013;&#30340; HelloModel &#24403;&#26102;&#36824;&#26159;
        &#29238;&#27169;&#22411;&#21602;&#65292; &#21040;&#36825;&#37324;&#22914;&#26524;&#25105;&#20204;&#38656;&#35201;&#33457;n&#20010;Hello World&#30340;&#26102;&#20505;&#65292; &#25105;&#20204;&#23601;&#38656;&#35201;&#22312;&#20854;&#19978;&#24314;&#19968;&#20010;&#29238;&#27169;&#22411;ContentsModel&#12290;
        HelloModel&#23601;&#35201;&#34987;&#28155;&#21152;&#21040;&#36825;&#20010;&#29238;&#27169;&#22411;&#20013;&#12290;&#33258;&#28982; ContentsModel &#19981;&#20250;&#21482;&#26377;HelloModel&#36825;&#19968;&#20010;&#23401;&#23376;&#12290; &#22312; ContentsModel &#20013;&#65292;&#25105;&#20204;&#35201;&#26377;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#19968;&#20010;&#21015;&#34920; child &#26469;&#20445;&#23384;&#23376;&#27169;&#22411;</p><p>&#19968;&#20010;&#28155;&#21152;&#23376;&#27169;&#22411;&#30340;&#26041;&#27861;&#65307;</p><p>&#19968;&#20010;&#33719;&#24471;&#23376;&#27169;&#22411;&#30340;&#26041;&#27861;</p></li></ul></div><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.util.ArrayList;
<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel {
	<strong class="hl-keyword">private</strong> List children=<strong class="hl-keyword">new</strong> ArrayList();<em class="hl-comment" style="color: silver">//&#23376;&#27169;&#22411;&#21015;&#34920;</em>
	<strong class="hl-tag" style="color: blue">/**
	 * &#28155;&#21152;&#23376;&#27169;&#22411;
	 * @param child
	 */</strong>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addChild(Object child){
		<strong class="hl-keyword">this</strong>.children.add(child);
	}
	<strong class="hl-tag" style="color: blue">/**
	 * &#33719;&#24471;&#23376;&#27169;&#22411;
	 * @return
	 */</strong>
	<strong class="hl-keyword">public</strong> List getChildren() {
		<strong class="hl-keyword">return</strong> children;
	}

}

      </pre></div><div class="section" title="&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e605"></a>&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </h2></div></div></div><p> 
        &#35760;&#24471;&#21069;&#38754;&#25105;&#20204;&#35828;&#36807; GEF&#26377;&#20010;&#26694;&#26550;&#21487;&#20197;&#20445;&#35777;&#29238;&#23376;&#20851;&#31995;&#12290;&#20026;&#20102;&#20351;&#19978;&#38754;&#30340;&#29238;&#23376;&#20851;&#31995;&#33021;&#22815;&#39034;&#21033;&#24037;&#20316;&#65292;&#38656;&#35201;&#22312;&#29238;
        &#20146;&#65288;&#36825;&#37324;&#26159; ContentsModel&#65289;&#30340; EditPart&#65288;&#36825;&#37324;&#26159; ContentsEditPart&#65289;&#20013;&#65292;&#22312; getModelChildren()&#26041;&#27861;&#65288;&#20174;
        AbstractEditPart &#32487;&#25215;&#32780;&#26469;&#65289;&#20013;&#36820;&#22238;&#23376;&#27169;&#22411;&#30340;&#21015;&#34920; List&#12290;&#35828;&#30333;&#19968;&#28857;&#65292;&#23601;&#26159;&#35828; ContentsModel&#26082;&#28982;&#24403;&#29241;&#20102;&#65292;&#37027;&#23427;
        &#23545;&#24212;&#30340; ContentsEditPart &#20063;&#35201;&#25215;&#25285;&#36215;&#24403;&#29241;&#30340;&#36131;&#20219;&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;

<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> List getModelChildren() {
		<strong class="hl-keyword">return</strong> ((ContentsModel)<strong class="hl-keyword">this</strong>.getModel()).getChildren();
	}

}

    </pre><p>&#22909;&#20102;&#65292;&#20107;&#21040;&#22914;&#20170;&#25165;&#25226;&#29238;&#23376;&#20851;&#31995;&#30830;&#23450;&#12290; </p></div><div class="section" title="&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e616"></a>&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</h2></div></div></div><p>&#26082;&#28982;&#29238;&#23376;&#20851;&#31995;&#24050;&#32463;&#30830;&#23450;&#65292;&#20063;&#32654;&#21270;&#20102; Hello World&#65292;&#37027;&#35753;&#25105;&#20204;&#22312; Graphicalviewer &#20013;&#26174;&#31034;&#19968;&#19979;&#21543;&#12290;&#27880;&#24847;&#65292;&#22312;
        &#36825;&#37324;&#26174;&#31034;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#25165;&#30693;&#36947;&#21407;&#26469; HelloModel &#30495;&#30340;&#26159; ContentsModel &#30340;&#20799;&#23376;&#65292;&#22240;&#20026; HelloModel &#34987;&#21152;&#21040;
        ContentsModel &#37324;&#12290;&#36825;&#20010;&#28155;&#21152;&#36807;&#31243;&#26159;&#22312; initializeGraphicalViewer&#26041;&#27861;&#20013;&#23436;&#25104;&#30340; </p><pre class="programlisting"><strong class="hl-keyword">package</strong> gef.tutorial.step.ui; 
 
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel; 
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel; 
<strong class="hl-keyword">import</strong> gef.tutorial.step.parts.PartFactory; 
 
<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.IProgressMonitor; 
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.DefaultEditDomain; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalViewer; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor; 
 
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditor { 
...........
 
  <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() { 
 	ContentsModel parent = <strong class="hl-keyword">new</strong> ContentsModel(); 
	    HelloModel child1 = <strong class="hl-keyword">new</strong> HelloModel(); <em class="hl-comment" style="color: silver">// &#21019;&#24314;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	    parent.addChild(child1); <em class="hl-comment" style="color: silver">// &#28155;&#21152;HelloModel&#21040;ContentsModel&#20013; </em>
	    <strong class="hl-keyword">this</strong>.getGraphicalViewer().setContents(parent); 
 } 
 
 &#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;. 
 }</pre><p>  &#22914;&#26524;&#20877;&#36816;&#34892;&#19968;&#19979;&#65292;&#23601;&#20250;&#21457;&#29616;&#19979;&#38754;&#30340;&#25928;&#26524;&#12290;&#38752;&#65292;&#36824;&#26159;&#20160;&#20040;&#20063;&#27809;&#26377;&#12290;&#24819;&#24819;&#25105;&#20204;&#30340;&#31243;&#24207;&#21644;&#20197;&#21069;&#26377;&#20160;&#20040;&#21464;&#21270;&#21602;&#65292;
        &#37027;&#20123;&#25913;&#21464;&#27169;&#22411;&#30340;&#22320;&#26041;&#25105;&#20204;&#19981;&#35201;&#21435;&#24819;&#65292;&#22240;&#20026;&#37027;&#19981;&#24433;&#21709;&#22270;&#24418;&#26174;&#31034;&#12290;&#21644;&#22270;&#24418;&#30456;&#20851;&#30340;&#25913;&#21464;&#26159;&#65306;&#25105;&#20204;&#29616;&#22312;&#24320;&#22987;&#26174;&#31034;
        ContentsModel &#20102;&#65292;&#23427;&#23545;&#24212;&#30340; ContentsEditPart &#20013;&#35774;&#32622;&#20102;&#22270;&#23618;&#12290; </p><div class="mediaobject"><img src="../../images/step4/step4-2.jpg"></div><p>&#32780;&#22914;&#26524;&#25105;&#20204;&#35753; createFigure &#26041;&#27861;&#36820;&#22238; null&#65306;</p><div class="mediaobject"><img src="../../images/step4/step4-3.jpg"></div></div></div><div class="article" title="&#24067;&#23616;&#31649;&#29702;&#22120;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e635"></a>&#24067;&#23616;&#31649;&#29702;&#22120; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e642">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e651">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e660">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e669">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></div><p> GEF &#24212;&#29992;&#20351;&#29992;&#30340;&#26159; Draw2D &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#65292;&#25152;&#20197; GEF &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#21644; Draw2D &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#20960;&#20046;&#30456;
        &#21516;&#12290;&#20294;&#26159;&#65292;GEF&#20013;&#22270;&#24418;&#22312;&#35270;&#22270;&#20013;&#30340;&#20301;&#32622;&#21644;&#22270;&#24418;&#30340;&#22823;&#23567;&#26159;&#30001;&#20854;&#27169;&#22411;&#23450;&#20041;&#30340;&#65292;&#22240;&#27492;&#20182;&#20204;&#26377;&#28857;&#19981;&#21516;&#12290;&#20851;&#20110; Draw2D
        &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#25105;&#20204;&#22312;&#20197;&#21518;&#30340;&#25945;&#31243;&#20013;&#20171;&#32461;&#12290; </p><div class="section" title="&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e642"></a>&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </h2></div></div></div><p>&#24067;&#23616;&#31649;&#29702;&#22120;&#26377;&#24456;&#22810;&#31181;&#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#29992;&#19968;&#31181;&#65306;org.eclipse.draw2d.XYLayout&#12290;&#36825;&#31181;&#24067;&#23616;&#31649;&#29702;&#22120;&#20801;&#35768;&#22270;&#24418;&#33258;
    &#30001;&#22320;&#31227;&#21160;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;

<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.XYLayout;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		layer.setLayoutManager(<strong class="hl-keyword">new</strong> XYLayout());
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> List getModelChildren() {
		<strong class="hl-keyword">return</strong> ((ContentsModel)<strong class="hl-keyword">this</strong>.getModel()).getChildren();
	}

}

      </pre></div><div class="section" title="&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e651"></a>&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </h2></div></div></div><p>
      &#20026;&#20102;&#20351;&#29992;&#19978;&#38754;&#30340; XYLayout&#65292;&#38656;&#35201;&#35774;&#32622;&#19968;&#19979;&#34987;&#35813;&#24067;&#23616;&#31649;&#29702;&#22120;&#31649;&#29702;&#30340;&#22270;&#24418;&#23545;&#35937;&#30340;&#23610;&#23544;&#21644;&#20301;&#32622;&#31561;&#65292;&#36825;&#23601;&#26159;
      &#32422;&#26463; Constraint&#12290;&#20030;&#20010;&#20363;&#23376;&#21543;&#65292;&#22914;&#26524;&#20320;&#35201;&#22312;&#22270;&#24418;&#38598;&#20013;&#32472;&#21046;&#19968;&#20010;&#30697;&#24418;&#65292;&#37027;&#20320;&#23601;&#35201;&#26377;&#19968;&#20010;&#20301;&#32622;&#28857;&#65288;&#35692;&#22914;&#20320;&#35774;&#32622;
      &#24038;&#19978;&#28857;&#20316;&#20026;&#20301;&#32622;&#28857;&#65289;&#21644;&#19968;&#20010;&#23610;&#23544;&#65288;&#38271;&#21644;&#39640;&#65289; &#12290;&#20877;&#35828;&#30333;&#19968;&#28857;&#65292;&#32422;&#26463;&#23601;&#26159;&#25351;&#20986;&#22270;&#24418;&#22312;&#22270;&#24418;&#38598;&#20013;&#30340;&#20301;&#32622;&#21644;&#22823;&#23567;&#12290; 
      &#23545;&#22270;&#24418;&#38598; ContentsModel &#20013;&#30340;&#27599;&#20010;&#22270;&#24418;&#37117;&#35201;&#28155;&#21152;&#32422;&#26463;&#65292;&#22240;&#27492;&#32422;&#26463;&#34987;&#28155;&#21152;&#21040;&#20182;&#20204;&#30340;&#27169;&#22411;&#31867;&#20013;&#65288;&#35760;&#24471;&#25105;&#20204;
      &#21069;&#38754;&#35828;&#36807; Draw2D&#21644; GEF&#24067;&#23616;&#31649;&#29702;&#22120;&#30340;&#19981;&#21516;&#20043;&#22788;&#21543;&#65289; &#12290;&#36825;&#37324;&#25105;&#20204;&#21482;&#26377; Hello World &#19968;&#20010;&#22270;&#24418;&#31867;&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;
      &#22312; HelloModel &#20013;&#28155;&#21152;&#32422;&#26463;&#12290;&#25105;&#20204;&#36825;&#37324; HelloWorld &#26159;&#20889;&#22312; Label &#19978;&#65292;&#25152;&#20197;&#25105;&#20204;&#23601;&#32473;&#20986;&#19968;&#20010;&#30697;&#24418; Rectangle &#20316;
      &#20026;&#32422;&#26463;&#12290; 
      &#22312;&#27169;&#22411;&#20013;&#65292;&#32422;&#26463;&#26159;&#19968;&#20123;&#19982;&#23454;&#38469;&#19994;&#21153;&#26080;&#20851;&#30340;&#25104;&#21592;&#12290; 
  </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel {
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;
	<strong class="hl-keyword">private</strong> Rectangle constraint;<em class="hl-comment" style="color: silver">//&#32422;&#26463;</em>
	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	}

	<strong class="hl-keyword">public</strong> Rectangle getConstraint() {
		<strong class="hl-keyword">return</strong> constraint;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}
	
}

      </pre></div><div class="section" title="&#24212;&#29992;&#32422;&#26463;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e660"></a>&#24212;&#29992;&#32422;&#26463; </h2></div></div></div><p>&#26082;&#28982;&#24050;&#32463;&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#20102;&#32422;&#26463;&#65292;&#37027;&#20040;&#22312;&#20160;&#20040;&#22320;&#26041;&#25226;&#32422;&#26463;&#26045;&#21152;&#32473;&#22270;&#24418;&#21602;&#12290;GEF&#22312; AbstractEditPart &#31867;&#20013;&#25552;
        &#20379;&#20102; refreshVisuals()&#29992;&#20110;&#25226;&#32422;&#26463;&#26045;&#21152;&#32473;&#22270;&#24418;&#12290;&#22240;&#20026;&#25105;&#20204;&#26159;&#22312; HelloEditorPart &#20013;&#32472;&#22270;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;&#22312;
        HelloEditorPart &#20013;&#37325;&#36733;&#35813;&#26041;&#27861;&#65288;refreshVisuals &#26041;&#27861;&#19981;&#26159;&#40664;&#35748;&#23601;&#34987;&#37325;&#36733;&#30340;&#65289; &#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.ColorConstants;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.CompoundBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Label;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.LineBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.MarginBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		HelloModel model=(HelloModel)<strong class="hl-keyword">this</strong>.getModel();
		Label label = <strong class="hl-keyword">new</strong> Label();
		label.setText(model.getText());
		<em class="hl-comment" style="color: silver">//&#36793;&#26694;</em>
		label.setBorder(<strong class="hl-keyword">new</strong> CompoundBorder(<strong class="hl-keyword">new</strong> LineBorder(),
				<strong class="hl-keyword">new</strong> MarginBorder(<span class="hl-number">3</span>)));
		<em class="hl-comment" style="color: silver">//&#32972;&#26223;&#39068;&#33394;</em>
		label.setBackgroundColor(ColorConstants.orange);
		<em class="hl-comment" style="color: silver">//&#19981;&#36879;&#26126;</em>
		label.setOpaque(true);

		<strong class="hl-keyword">return</strong> label;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> refreshVisuals() {
		Rectangle constraint=((HelloModel)<strong class="hl-keyword">this</strong>.getModel()).getConstraint();
		((GraphicalEditPart)getParent()).setLayoutConstraint(<strong class="hl-keyword">this</strong>, <strong class="hl-keyword">this</strong>.getFigure(), constraint);
	}

}

      </pre></div><div class="section" title="&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e669"></a>&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </h2></div></div></div><p> &#26368;&#21518;&#65292;&#25105;&#20204;&#22312;&#35270;&#22270;&#20013;&#30475;&#30475;&#28155;&#21152;&#32422;&#26463;&#20043;&#21518;&#30340;&#22270;&#24418;&#26159;&#20160;&#20040;&#26679;&#30340;&#25928;&#26524;&#12290;&#36825;&#37324;&#25105;&#20204;&#32472;&#21046;&#20102;&#19977;&#20010; Hello World &#22270; &#24418;&#65292;&#20182;&#20204;&#30340;&#32422;&#26463;&#65288;&#20854;&#23454;&#23601;&#26159;&#20182;&#20204;&#30340;&#20301;&#32622;&#21644;&#22823;&#23567;&#65292;&#30001;&#30697;&#24418;&#20915;&#23450;&#65289;&#20998;&#21035;&#26159;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Rectangle(0, 0, -1, -1) </p></li><li class="listitem"><p> Rectangle(30, 30, -1, -1) </p></li><li class="listitem"><p> Rectangle(10, 80, 80, 50) </p></li></ul></div><p> &#22823;&#23478;&#21487;&#33021;&#22855;&#24618;&#65292;&#20026;&#20160;&#20040;&#31532; 1 &#21644;&#31532;2&#20010;&#30697;&#24418;&#30340;&#38271;&#21644;&#23485;&#34987;&#35774;&#32622;&#20026;-1 &#21602;&#65292;&#36825;&#26679;&#21487;&#20197;&#20351;&#30697;&#24418;&#30340;&#23610;&#23544;&#38543;&#30528;&#37324;&#38754;&#25991; &#26412;&#30340;&#21464;&#21270;&#32780;&#21464;&#21270;&#65292;&#23601;&#26159;&#35828;&#36825;&#26679;&#30340;&#30697;&#24418;&#27491;&#22909;&#33021;&#21253;&#21547;&#25991;&#26412;&#12290;&#32780;&#23545;&#31532;
        3 &#20010;&#30697;&#24418;&#32780;&#35328;&#65292;&#22914;&#26524;&#37324;&#38754;&#30340;&#25991;&#26412;&#22826;&#38271;&#65292;&#23601;&#20250; &#26377;&#37096;&#20998;&#30475;&#19981;&#21040;&#20102;&#12290; &#22312; gef.tutorial.step.ui.DiagramEditor&#20013;&#65292;&#28155;&#21152;&#20195;&#30721;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">
<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() {
		ContentsModel contents = <strong class="hl-keyword">new</strong> ContentsModel();

		HelloModel child1 = <strong class="hl-keyword">new</strong> HelloModel();
		child1.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">0</span>, <span class="hl-number">0</span>, -<span class="hl-number">1</span>, -<span class="hl-number">1</span>));
		contents.addChild(child1);

		HelloModel child2 = <strong class="hl-keyword">new</strong> HelloModel();
		child2.setText(<strong class="hl-string"><em style="color:red">"Welcome"</em></strong>);
		child2.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">30</span>, <span class="hl-number">30</span>, -<span class="hl-number">1</span>, -<span class="hl-number">1</span>));
		contents.addChild(child2);

		HelloModel child3 = <strong class="hl-keyword">new</strong> HelloModel();
		child3.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">10</span>, <span class="hl-number">80</span>, <span class="hl-number">80</span>, <span class="hl-number">50</span>));
		contents.addChild(child3);

		getGraphicalViewer().setContents(contents);
	}         
     </pre><p>
 </p><p>&#22909;&#20102;&#65292;&#26368;&#21518;&#30340;&#25928;&#26524;&#23601;&#26159;&#65306; </p><div class="mediaobject"><img src="../../images/step5/step5-1.jpg"></div></div></div><div class="article" title="&#22270;&#24418;&#25805;&#20316;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e695"></a>&#22270;&#24418;&#25805;&#20316; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e700">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e748">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e757">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e784">Command</a></span></dt><dt><span class="section"><a href="#d0e795">&#20462;&#25913; Editing Policy </a></span></dt></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e700"></a>&#20869;&#23481;&#25552;&#35201;</h2></div></div></div><p>&#20869;&#23481;&#25552;&#35201;&#65306; </p><p>&#65288;1&#65289;&#20351;&#29992; XYLayout &#24067;&#23616; </p><p>&#65288;2&#65289;Edit &#25805;&#20316;&#22270;&#24418;&#65292;&#35692;&#22914;&#36890;&#36807;&#21477;&#26564;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418;</p><p> &#65288;3&#65289;&#21019;&#24314;&#21644;&#23433;&#35013; editing policy&#65292;&#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418; </p><p>&#65288;4&#65289;&#21019;&#24314;&#21644;&#25191;&#34892;&#21629;&#20196; Command&#65292;&#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418; </p><p>&#65288;5&#65289;Undo&#21644; Redo &#30340;&#25805;&#20316; </p><p>          &#36825;&#31456;&#24320;&#22987;&#28041;&#21450;&#21040; Policy&#12289;Command&#12289;Role &#31561;&#27010;&#24565;&#20102;&#12290;&#24403;&#27169;&#22411;&#25913;&#21464;&#26102;&#65288;&#35692;&#22914;&#36825;&#37324;&#30340; HelloWorld &#25913;&#21464;&#23610;&#23544; &#25110;&#25913;&#21464;&#20301;&#32622;&#65289; &#65292;&#35201;&#20135;&#29983;&#35831;&#27714;
        Request(org.eclipse.gef.Request)&#65292;&#28982;&#21518;&#36825;&#35831;&#27714;&#23601;&#21457;&#36865;&#32473;&#27169;&#22411;&#23545;&#24212;&#30340; EditPart&#65288;&#21069; &#38754;&#35762;&#36807;&#19968;&#20010;&#27169;&#22411;&#23601;&#23545;&#24212;&#19968;&#20010;EditPart&#65289; &#65292;
        &#22312;EditPart&#20013;&#23433;&#35013;&#26377;Editing Policy&#65292; &#24403;&#28982;&#22312;EditPart&#20013;&#30340;Editing Policy &#19981;&#21482;&#19968;&#20010;&#65292;&#25152;&#20197;&#24212;&#35813;&#26159; Editing Policies&#12290;Editing
        Policy&#30340;&#20316;&#29992;&#23601;&#26159;&#31649;&#29702;&#19968;&#20123; Commond&#21629;&#20196;&#65292;&#32780;&#36825;&#20123;&#21629;&#20196;&#23601; &#26159;&#28385;&#36275;&#19978;&#38754;&#30340;&#35831;&#27714;&#30340;&#12290;Editing Policy&#22312; Eclipse&#30340;GEF&#24320;&#21457;&#25351;&#21335;&#37096;&#20998;&#26377;&#23545;&#24212;&#34920;&#12290; </p><p>         &#20026;&#20102;&#20351;&#22823;&#23478;&#26126;&#30333;&#30340;&#24555;&#28857;&#65292;&#25105;&#24819;&#20030;&#19968;&#20010;&#19981;&#24688;&#24403;&#30340;&#20363;&#23376;&#26469;&#35828;&#26126;&#20182;&#20204;&#20043;&#38388;&#30340;&#20851;&#31995;&#12290;&#35692;&#22914;&#35828;&#25105;&#33258;&#24049;&#23601;&#26159;&#19968;&#20010;&#27169; &#22411; Model&#65292;&#25105;&#32769;&#23110;&#26159;&#23545;&#24212;&#20110;&#25105;&#30340; EditPart&#65288;&#25511;&#21046;&#22120;&#65289;
        &#12290;&#25105;&#24819;&#20080;&#20010;&#25968;&#30721;&#30456;&#26426;&#65288;Model changing&#65289;&#21602;&#65292;&#37027;&#25105;&#23601;&#20135; &#29983;&#20102;&#30456;&#20851;&#30340;&#35831;&#27714; Request&#65292;&#36825;&#20123;&#35831;&#27714;&#21457;&#36865;&#32473;&#25105;&#32769;&#23110; EditPart&#65292;&#24403;&#28982;&#25105;&#23478;&#26377;&#24456;&#22810; Policies
        &#35268;&#30697;&#65292;&#36825;&#20123;&#35268;&#30697;&#26159;&#25105; &#32769;&#23110;&#25484;&#25569;&#65288;&#30456;&#24403;&#20110;&#25226; Policies &#23433;&#35013;&#21040; EditPart&#65289; &#65292;&#25105;&#32769;&#23110;&#19968;&#30475;&#25105;&#23478;&#27491;&#22909;&#26377;&#30456;&#20851;&#30340; Policy&#65292;&#23601;&#25226;&#36825;&#20010; Policy &#35466; &#22312;&#32440;&#19978;&#25343;&#32473;&#25105;&#65288;&#27966;&#29983;&#19968;&#20010;
        Policy&#31867;&#65289; &#12290; &#65288;&#27880;&#24847;&#36825;&#20010;Policy&#21487;&#19981;&#20809;&#31649;&#29702;&#20080;&#30456;&#26426;&#30340;&#21629;&#20196; BuyCommand&#65292;&#21487;&#33021;&#36824;&#21253; &#25324;&#22914;&#20309;&#22788;&#29702;&#25105;&#21407;&#26469;&#30340;&#30456;&#26426; DeleteCommand &#31561;&#31561;&#12290;
        &#65289;&#28982;&#21518;&#23601;&#35828;&#20320;&#21435;&#20080;&#21543;&#65292;&#20808;&#25191;&#34892; BuyCommand &#21629;&#20196;&#12290;&#25105;&#24403;&#28982; &#26377;&#25191;&#34892;&#21629;&#20196;&#30340;&#19968;&#31995;&#21015;&#27493;&#39588;&#20102;&#65288;&#35692;&#22914;&#35828;&#27604;&#20215;&#65292;&#20355;&#20215;&#31561;&#65289; &#65292;&#28982;&#21518;&#23601;&#20048;&#39072;&#39072;&#20080;&#21040;&#30456;&#26426;&#20102;&#12290; </p><p>       &#22909;&#65292;&#19981;&#31649;&#20320;&#26126;&#30333;&#19981;&#26126;&#30333;&#65292;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#19968;&#19979;&#26412;&#33410;&#21019;&#24314;&#30340;&#31867;&#21543;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#35201;&#26377;&#35268;&#30697;&#65292;&#23601;&#26159; Policy&#65307;</p></li><li class="listitem"><p>&#28982;&#21518;&#25226;&#19968;&#20010;&#25110;&#22810;&#20010; Policy &#23433;&#35013;&#32473; EditPart </p></li><li class="listitem"><p>&#28982;&#21518;&#25105;&#20204;&#35201;&#26681;&#25454;&#35831;&#27714;&#21019;&#24314;&#21629;&#20196; Command  </p></li><li class="listitem"><p> &#28982;&#21518;&#22312;&#27599;&#20010; Policy&#30340;&#26694;&#26550;&#19979;&#25191;&#34892;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#21629;&#20196;</p></li></ul></div><p>       &#24403;&#28982;&#65292;&#25191;&#34892;&#23436;&#21629;&#20196;&#30340;&#27169;&#22411;&#28385;&#36275;&#20102;&#35831;&#27714;&#65292;&#21457;&#29983;&#20102;&#25913;&#21464;&#65292;&#23601;&#35201;&#36890;&#30693;&#25511;&#21046;&#22120; EditPart&#65292;&#21542;&#21017;&#25511;&#21046;&#22120;&#19981;&#30693;&#36947;&#27169;
    &#22411;&#25913;&#21464;&#21602;&#65292;&#23601;&#26080;&#27861;&#36890;&#30693;&#35270;&#22270;&#26469;&#27491;&#30830;&#26174;&#31034;&#12290;&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#20080;&#20102;&#30456;&#26426;&#21518;&#23601;&#35201;&#36890;&#30693;&#32769;&#23110;&#19968;&#19979;&#65292;&#25105;&#24050;&#32463;&#20080;&#20102;&#12290; &#33267;&#20110;&#22914;&#20309;&#36890;&#30693;&#65292;&#25105;&#20204;&#21518;&#38754;&#20877;&#35828;&#12290; </p><div class="mediaobject"><img src="../../images/step6/step6-1.jpg"></div><p>&#20026;&#20102;&#25913;&#21464;&#25105;&#20204;&#22270;&#24418;&#30340;&#23610;&#23544;&#21644;&#31227;&#21160;&#22270;&#24418;&#65292;&#25105;&#20204;&#37117;&#21019;&#24314;&#21644;&#20462;&#25913;&#20102;&#21738;&#20123;&#31867;&#21602;&#65311;&#30475;&#19979;&#22270;&#65306; </p><div class="mediaobject"><img src="../../images/step6/step6-2.jpg"></div><p>  &#33267;&#20110;&#35828;&#25105;&#24590;&#20040;&#30693;&#36947;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#35201;&#21019;&#24314; XYLayoutEditPolicy&#32780;&#19981;&#26159;&#20854;&#20182;&#30340; Policy&#21602;&#65292;&#37027;&#35828;&#26126;&#20320;&#27809;&#22909;&#22909;
        &#30475; Eclipse &#22312;&#32447;&#24110;&#21161;&#30340; GEF Programmer's Guide&#12290;GEF&#30340; EditPolicy&#21253;&#21547;&#22312; org.eclipse.gef.editpolicies&#21253;&#20013;&#12290;  </p></div><div class="section" title="&#21019;&#24314; editing policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e748"></a>&#21019;&#24314; editing policy</h2></div></div></div><p>&#36825;&#37324;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010; CustomXYLayoutEditPolicy&#65292;&#27966;&#29983;&#33258; org.eclipse.gef.editpolicies.XYLayoutEditPolicy&#12290;
    &#20195;&#30721;&#20026;&#65306;  </p><pre class="programlisting">
          <strong class="hl-keyword">package</strong> gef.tutorial.step.policies;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editpolicies.XYLayoutEditPolicy;
<strong class="hl-keyword">import</strong> org.eclipse.gef.requests.CreateRequest;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomXYLayoutEditPolicy <strong class="hl-keyword">extends</strong> XYLayoutEditPolicy {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command getCreateCommand(CreateRequest request) {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>
		<strong class="hl-keyword">return</strong> null;
	}

}

    </pre></div><div class="section" title="&#23433;&#35013; editing policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e757"></a>&#23433;&#35013; editing policy </h2></div></div></div><p>&#22240;&#20026;&#25105;&#20204;&#21069;&#38754;&#22312;ContentsEditPart&#20013;&#35774;&#32622;&#30340;XYLayout&#65292; &#25152;&#20197;&#25105;&#20204;&#22312;ContentsEditPart&#30340;createEditPolicies 
    &#26041;&#27861;&#20013;&#23433;&#35013; CustomXYLayoutEditPolicy&#12290; </p><p>&#22312;ContentsEditPart&#28155;&#21152;&#19968;&#19979;&#20195;&#30721;</p><pre class="programlisting">
        
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		installEditPolicy(EditPolicy.LAYOUT_ROLE, <strong class="hl-keyword">new</strong> CustomXYLayoutEditPolicy());
	}
    </pre><p>  &#27880;&#24847;&#65292; &#19978;&#38754; installEditPolicy&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#20010;&#23383;&#31526;&#20018;&#21464;&#37327;&#65292; &#23427;&#25351;&#23450;&#20102;&#23433;&#35013;&#30340; editing policy&#30340;&#35282;&#33394; Role&#12290;
        &#36825;&#37324;&#25105;&#20204;&#29992;&#20102; EditPolicy&#30340;&#19968;&#20010;&#24120;&#37327;&#26469;&#34920;&#31034;&#36825;&#20010; editing policy&#30340;&#35282;&#33394;&#12290;&#20043;&#25152;&#20197;&#35774;&#32622;&#36825;&#20010;&#21464;&#37327;&#26159;&#22240;&#20026;&#65306;&#19968;&#20010;
        EditPart &#21487;&#20197;&#23433;&#35013;&#24456;&#22810; editing policies&#65292;&#22914;&#26524;&#20182;&#20204;&#30340;&#35282;&#33394;&#37117;&#30456;&#21516;&#65292;&#23601;&#26159;&#36825;&#20010;&#23383;&#31526;&#20018;&#21442;&#25968;&#30456;&#21516;&#65292;&#37027;&#20040;&#23601;&#21482;&#26377;&#26368;
        &#21518;&#23433;&#35013;&#30340;&#19968;&#20010; policy &#26159;&#26377;&#25928;&#30340;&#12290;&#20854;&#23454;&#36825;&#20010;&#23383;&#31526;&#20018;&#21464;&#37327;&#21487;&#20197;&#20026;&#20219;&#24847;&#20540;&#65292;&#29992; EditPolicy &#30340;&#24120;&#37327;&#23601;&#26159;&#20026;&#20102;&#32479;&#19968;&#12289;
        &#28165;&#26970;&#12290;&#19981;&#20449;&#20320;&#21487;&#20197;&#25913;&#20026; installEditPolicy(&#8220;&#22815;&#26085;&#30340;&#23567;&#26085;&#26412;&#8221;, new CustomXYLayoutEditPolicy());&#35797;&#35797;&#12290; </p><p>&#22914;&#26524;&#23433;&#35013;&#20102; CustomXYLayoutEditPolicy&#65292;&#23601;&#21487;&#20197;&#36873;&#25321;&#22270;&#24418;&#30340;&#21477;&#26564;(handler)&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step6/step6-3.jpg"></div><p>&#22914;&#26524;&#25105;&#20204;&#25302;&#21160;&#21477;&#26564;&#25913;&#21464;&#23610;&#23544;&#25110;&#32773;&#36873;&#25321;&#22270;&#24418;&#25913;&#21464;&#20301;&#32622;&#65292;&#20250;&#21457;&#29616;&#25105;&#20204;&#26410;&#36930;&#12290;&#36825;&#26159;&#22240;&#20026;&#25105;&#20204;&#26681;&#26412;&#27809;&#26377;&#25191;&#34892;&#20219;
        &#20309;&#21629;&#20196;&#21435;&#20570;&#36825;&#20123;&#20107;&#24773;&#65292;&#32780;&#26159;&#25105;&#20204;&#21487;&#20197;&#20570;&#36825;&#20123;&#20107;&#24773;&#20102;&#12290; 
    </p><div class="mediaobject"><img src="../../images/step6/step6-4.jpg"></div><p> 
        &#22312;&#25105;&#20204;&#21019;&#24314;&#25913;&#21464;&#22270;&#24418;&#22823;&#23567;&#21644;&#23610;&#23544;&#30340;&#21629;&#20196;&#21069;&#65292;&#20320;&#26159;&#19981;&#26159;&#32435;&#38391;&#25105;&#20204;&#19978;&#38754;&#25302;&#21160;&#21477;&#26564;&#21644;&#25302;&#21160;&#22270;&#24418;&#21040;&#24213;&#20135;&#29983;&#20102;&#20160;
        &#20040;&#35831;&#27714; Request &#21602;&#65311;&#22914;&#26524;&#20320;&#24819;&#30693;&#36947;&#30340;&#35805;&#65292;&#21487;&#20197;&#22312; CustomXYLayoutEditPolicy &#20013;&#37325;&#36733; getCommand &#26041;&#27861;&#65292;&#22312;
        &#25511;&#21046;&#21488;&#25171;&#21360;&#20986;&#30456;&#24212;&#30340;&#35831;&#27714;&#12290; </p><pre class="programlisting">
   <strong class="hl-keyword">public</strong> Command getCommand(Request request) { 
    System.out.println(request.getType()); 
    <strong class="hl-keyword">return</strong> <strong class="hl-keyword">super</strong>.getCommand(request); 
  }         
    </pre></div><div class="section" title="Command"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e784"></a>Command</h2></div></div></div><p>  &#20854;&#23454;&#25105;&#20204;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#21644;&#31227;&#21160;&#22270;&#24418;&#20301;&#32622;&#34429;&#28982;&#26159;&#20004;&#20010;&#35831;&#27714;&#65288;&#20998; &#21035;&#23545;&#24212;&#20110;
        RequestConstants#REQ_RESIZE_CHILDREN &#21644; RequestConstants#REQ_MOVE_CHILDREN&#65289; &#65292;&#20294;&#26159;&#20182;&#20204;&#37117;
        &#26159;&#21644;&#22270;&#24418;&#30340;&#32422;&#26463;&#30456;&#20851;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#22312;&#26032;&#21019;&#24314;&#19968;&#20010;&#25913;&#21464;&#32422;&#26463;&#30340;&#31867; ChangeConstaintCommand &#23601;&#34892;&#20102;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ChangeConstraintCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<strong class="hl-keyword">private</strong> Rectangle constraint;


	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		helloModel.setConstraint(constraint);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setModel(Object model) {
		<strong class="hl-keyword">this</strong>.helloModel = (HelloModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}

	

}

    </pre><p>&#27880;&#24847;&#65292;&#19978;&#38754;&#30340; execute()&#26041;&#27861;&#24456;&#37325;&#35201;&#65292;&#23601;&#26159;&#23427;&#25191;&#34892;&#21629;&#20196;&#30340;&#12290; </p></div><div class="section" title="&#20462;&#25913; Editing Policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e795"></a>&#20462;&#25913; Editing Policy </h2></div></div></div><p>  &#21019;&#24314;&#20102;&#21069;&#38754;&#30340;&#21629;&#20196;&#65292;&#23601;&#35201;&#22312; Editing Policy &#30340;&#26694;&#26550;&#19979;&#36816;&#34892;&#21629;&#20196;&#20102;&#12290;&#25105;&#20204;&#30340; XYLayoutEditPolicy &#30340;
        getCommand &#26041;&#27861;&#24471;&#21040;&#30340;&#35831;&#27714;&#31867;&#22411;&#26159; REQ_MOVE_CHILDREN &#25110; REQ_RESIZE_CHILDREN&#26102;&#65292;&#23601;&#20250;&#25191;&#34892;
        createChangeConstraintCommand &#26041;&#27861;&#12290;&#25152;&#20197;&#25105;&#20204;&#30340; ChangeConstaintCommand &#35201;&#25918;&#22312;&#36825;&#20010;&#26041;&#27861;&#20013;&#25191;&#34892;&#12290; </p><p>XYLayoutEditPolicy &#28155;&#21152;&#20195;&#30721;&#22914;&#19979;</p><pre class="programlisting">     
  	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command createChangeConstraintCommand(EditPart child,
			Object constraint) {
		ChangeConstraintCommand command = <strong class="hl-keyword">new</strong> ChangeConstraintCommand();
		command.setModel(child.getModel());
		command.setConstraint((Rectangle) constraint);
		<strong class="hl-keyword">return</strong> command;
		}</pre><p>  &#23436;&#25104;&#19978;&#38754;&#30340;&#24037;&#20316;&#65292;&#36816;&#34892;&#19968;&#19979;&#21543;&#65292;&#30475;&#30475;&#33021;&#19981;&#33021;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#21644;&#20301;&#32622;&#20102;&#12290;&#36824;&#26159;&#19981;&#33021;&#65281; &#65281; &#65281; &#65281;&#21482;&#23601;&#26159;&#25105;&#20204;&#21069;&#38754;
        &#35828;&#30340;&#65306;&#27169;&#22411;&#34429;&#28982;&#25913;&#21464;&#20102;&#65292;&#20294;&#26159;&#35270;&#22270;&#24182;&#19981;&#30693;&#36947;&#65292;&#25152;&#20197;&#35201;&#36890;&#30693; EditPart &#27169;&#22411;&#24050;&#32463;&#25913;&#21464;&#20102;&#65292;&#20877;&#30001; EditPart &#25913;&#21464;&#35270;
        &#22270;&#12290;&#36825;&#23601;&#28041;&#21450;&#21040;&#20197;&#21518;&#32463;&#24120;&#29992;&#21040;&#30340;&#30417;&#21548;&#65288;Listener&#65289;&#26426;&#21046;&#12290; </p></div></div><div class="article" title="&#30417;&#21548;&#27169;&#22411;&#25913;&#21464;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e808"></a>&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e813">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e829">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e847">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></div><div class="section" title="&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e813"></a>&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</h2></div></div></div><p>&#27169;&#22411;&#26377;&#36131;&#20219;&#25226;&#33258;&#24049;&#30340;&#25913;&#21464;&#36890;&#30693; EditPart&#65292;&#22240;&#20026;&#23545;&#25152;&#26377;&#30340;&#27169;&#22411;&#37117;&#35201;&#36890;&#30693;&#23545;&#24212;&#30340; EditPart&#65292;&#25152;&#20197;&#21019;&#24314;&#19968;&#20010;&#25277;
        &#35937;&#31867;AbstractModel&#20316;&#20026;&#36825;&#20123;&#27169;&#22411;&#31867;&#30340;&#36229;&#31867;&#65292; &#22312;AbstractModel&#31867;&#20013;&#20351;&#29992;java.beans.PropertyChangeListener &#25509;
        &#21475;&#21644; java.beans.PropertyChangeSupport&#31867;&#23436;&#25104;&#36825;&#20010;&#30446;&#30340;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.beans.PropertyChangeListener;
<strong class="hl-keyword">import</strong> java.beans.PropertyChangeSupport;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> AbstractModel {
	<strong class="hl-keyword">private</strong> PropertyChangeSupport listeners = <strong class="hl-keyword">new</strong> PropertyChangeSupport(<strong class="hl-keyword">this</strong>);

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addPropertyChangeListener(PropertyChangeListener listener) {
		listeners.addPropertyChangeListener(listener);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> firePropertyChange(String propName, Object oldValue,
			Object newValue) {
		listeners.firePropertyChange(propName, oldValue, newValue);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> removePropertyChangeListener(PropertyChangeListener listener) {
		listeners.removePropertyChangeListener(listener);
	}
}

    </pre><p>&#19979;&#38754;&#65292; &#25105;&#20204;&#23601;&#20351; AbstractModel &#20316;&#20026; HelloModel &#30340;&#36229;&#31867;&#65292; &#22240;&#20026;&#26159; HelloModel &#25913;&#21464;&#12290; &#28982;&#21518;&#22312; setConstraint 
        &#26041;&#27861;&#20013;&#35843;&#29992; firePropertyChange&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel   <strong class="hl-keyword">extends</strong> AbstractModel{
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String PROP_CONSTRAINT = <strong class="hl-string"><em style="color:red">"CONSTRAINT"</em></strong>;
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;
	<strong class="hl-keyword">private</strong> Rectangle constraint;<em class="hl-comment" style="color: silver">//&#32422;&#26463;</em>
	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	
	}

	<strong class="hl-keyword">public</strong> Rectangle getConstraint() {
		<strong class="hl-keyword">return</strong> constraint;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
			<em class="hl-comment" style="color: silver">//&#36890;&#30693;</em>
		firePropertyChange(PROP_CONSTRAINT, null, constraint);
	}
	
}

    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#37324;&#27880;&#24847;&#25105;&#20204;&#35774;&#32622;&#20102;&#19968;&#20010;&#24120;&#37327; P_CONSTRAINT &#20316;&#20026;&#27169;&#22411;&#20013;&#32422;&#26463;&#25913;&#21464;&#30340;&#26631;&#31034;&#12290; 
            firePropertyChange &#30340;&#31532; 2&#20010;&#21442;&#25968;&#37117;&#26159; null&#12290; </p></td></tr></table></div></div><div class="section" title="&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e829"></a>&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </h2></div></div></div><p>  &#28982;&#21518;&#65292;&#25105;&#20204;&#23601;&#35201;&#22312; EditPart &#30340; active()&#20013;&#27880;&#20876;&#30417;&#21548;&#22120;&#65292;&#36824;&#35201;&#22312; deactive()&#20013;&#21024;&#38500;&#30417;&#21548;&#22120;&#12290;&#21516;&#26679;&#30340;&#36947;&#29702;&#65292;&#25105;
    &#20204;&#21019;&#24314;&#19968;&#20010;&#25277;&#35937;&#30340; EditPart &#31867;&#65292;&#26469;&#27880;&#20876;&#30417;&#21548;&#22120;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.AbstractModel;

<strong class="hl-keyword">import</strong> java.beans.PropertyChangeListener;

<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> EditPartWithListener <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart
		<strong class="hl-keyword">implements</strong> PropertyChangeListener {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> activate() {
		<strong class="hl-keyword">super</strong>.activate();
		((AbstractModel) getModel()).addPropertyChangeListener(<strong class="hl-keyword">this</strong>);
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> deactivate() {
		<strong class="hl-keyword">super</strong>.deactivate();
		((AbstractModel) getModel()).removePropertyChangeListener(<strong class="hl-keyword">this</strong>);
	}

}

    </pre><p>  &#28982;&#21518;&#65292;&#25105;&#20204;&#30340; HelloEditPart &#35201;&#27966;&#29983;&#33258;&#36825;&#20010;&#25277;&#35937;&#31867;&#65292;&#28982;&#21518;&#22312;&#27169;&#22411;&#25913;&#21464;&#26102;&#21047;&#26032;&#35270;&#22270;&#12290;&#27880;&#24847;&#36825;&#37324;&#29992;&#21040;&#20102;&#25105;&#20204;
        &#21069;&#38754;&#35774;&#32622;&#30340;&#21464;&#37327; P_CONSTRAINT&#12290;&#36890;&#36807;&#36825;&#20010;&#21464;&#37327;&#25105;&#20204;&#25165;&#30693;&#36947;&#26159;&#35201;&#25913;&#21464; HelloModel&#27169;&#22411;&#30340;&#32422;&#26463;&#65292;&#19979;&#38754;&#30340;&#31456;
        &#33410;&#20013;&#25105;&#20204;&#36824;&#35201;&#25913;&#21464;&#25991;&#26412;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart  <strong class="hl-keyword">extends</strong> EditPartWithListener{
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) {
		<strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.PROP_CONSTRAINT))
			refreshVisuals();
		
	}
    .......
}
    </pre><p>&#20877;&#36816;&#34892;&#19968;&#19979;&#21543;&#65292;&#32477;&#23545;&#27809;&#38382;&#39064;&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step7/step7-1.jpg"></div></div><div class="section" title="Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e847"></a>Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </h2></div></div></div><p>  &#25191;&#34892;&#36807;&#30340; Command &#37117;&#25918;&#22312; EditDomain &#65288;&#36824;&#35760;&#24471;&#25105;&#20204;&#31532; 1 &#22238;&#23601;&#35762;&#21040;&#30340;&#36825;&#20010;&#19996;&#35199;&#21543;&#65289; &#20013;&#30340; CommandStack
        &#20013;&#12290; &#24403;&#25191;&#34892; undo &#25805;&#20316;&#26102;&#65292; &#35813;&#21629;&#20196;&#20174;&#21629;&#20196;&#22534;&#26632;&#20013;&#24377;&#20986;&#65307; redo &#26102;&#65292; &#21017;&#20877;&#25918;&#36827;&#21435;&#12290; &#25152;&#20197;&#25105;&#20204;&#20043;&#38656;&#35201;&#22312;***Command
        &#31867;&#20013;&#37325;&#36733; Command#Undo &#23601;&#21487;&#20197;&#20102;&#12290;&#20294;&#26159;&#65292;&#25105;&#20204;&#36824;&#35201;&#35774;&#32622;&#19968;&#20010;&#21464;&#37327;&#20197;&#35760;&#24405;&#27169;&#22411;&#20197;&#21069;&#30340;&#29366;&#24577;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ChangeConstraintCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<strong class="hl-keyword">private</strong> Rectangle constraint;
	<em class="hl-comment" style="color: silver">//&#20197;&#21069;&#30340;&#20301;&#32622;</em>
	<strong class="hl-keyword">private</strong> Rectangle oldConstraint;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		helloModel.setConstraint(constraint);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setModel(Object model) {
		<strong class="hl-keyword">this</strong>.helloModel = (HelloModel) model;
		<em class="hl-comment" style="color: silver">//&#35760;&#20303;&#20197;&#21069;&#30340;&#20301;&#32622;</em>
		oldConstraint = helloModel.getConstraint();
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		<em class="hl-comment" style="color: silver">//&#37325;&#26032;&#22238;&#21040;&#20197;&#21069;&#30340;&#20301;&#32622;</em>
		helloModel.setConstraint(oldConstraint);
	}

}

    </pre><p>&#37027;&#20026;&#20160;&#20040;&#25105;&#20204;&#19981;&#37325;&#36733; redo()&#21602;&#65311;&#20174; Command &#20013;&#21487;&#20197;&#30475;&#20986; redo()&#25191;&#34892;&#30340;&#23601;&#26159; execute()&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> Command {
    .....
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> redo() {
		execute();
	}
    .......
}
        
    </pre><p>  &#22312; Java &#20013;&#65292;Undo/Redo&#26159; Action&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;&#26377;&#33756;&#21333;&#25110;&#32773;&#24037;&#20855;&#25353;&#38062;&#26469;&#25191;&#34892;&#36825;&#20123; Action&#65292;&#37027;&#25105;&#20204;&#23601;&#39034;&#20415;
    &#25226;&#22914;&#20309;&#28155;&#21152;&#24037;&#20855;&#25353;&#38062;&#20171;&#32461;&#19968;&#19979;&#21543;&#12290;&#27493;&#39588;&#22914;&#19979;&#65306; &#65288;&#19981;&#35814;&#32454;&#35828;&#26126;&#65292;&#22823;&#23478;&#21435;&#30475;&#37027;&#20004;&#26412;&#20070;&#65289; </p><p>&#21019;&#24314;&#19968;&#20010; DiagramActionBarContributor&#31867;</p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.actions;

<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.ActionBarContributor;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.RedoRetargetAction;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.UndoRetargetAction;
<strong class="hl-keyword">import</strong> org.eclipse.jface.action.IToolBarManager;
<strong class="hl-keyword">import</strong> org.eclipse.ui.actions.ActionFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramActionBarContributor <strong class="hl-keyword">extends</strong> ActionBarContributor {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> buildActions() {
		addRetargetAction(<strong class="hl-keyword">new</strong> UndoRetargetAction());
		addRetargetAction(<strong class="hl-keyword">new</strong> RedoRetargetAction());
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> declareGlobalActionKeys() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> contributeToToolBar(IToolBarManager toolBarManager) {
		toolBarManager.add(getAction(ActionFactory.UNDO.getId()));
		toolBarManager.add(getAction(ActionFactory.REDO.getId()));
	}

}

    </pre><p> &#19979;&#38754;&#20869;&#23481;&#26469;&#33258; <a class="link" href="http://bjzhanghao.cnblogs.com/archive/2005/03/30/128704.html " target="_top">&#20843;&#36827;&#21046;</a>&#65306;</p><p> &#32534;&#36753;&#22120;&#27809;&#26377;&#33258;&#24049;&#30340;&#24037;&#20855;&#26465;&#65292;&#23427;&#30340;&#33756;&#21333;&#21482;&#33021;&#21152;&#22312;&#20027;&#33756;&#21333;&#37324;&#12290; &#65288;&#20854;&#23454;&#36825;&#35805;&#19981;&#33021;&#36825;&#20040;&#35828;&#65292;SWT Designer&#23601;&#26159; &#19968;&#20010;&#21453;&#20363;&#12290;EditPart &#22312; RCP&#20013;&#26159;&#21487;&#20197;&#28155;&#21152;&#24037;&#20855;&#26465;&#30340;&#12290;
        &#65289;</p><p>                &#39318;&#20808;&#35201;&#20171;&#32461; Retarget Action &#30340;&#27010;&#24565;&#65292;&#36825;&#26159;&#19968;&#31181;&#20855;&#26377;&#19968;&#23450;&#35821;&#20041;&#20294;&#27809;&#26377;&#23454;&#38469;&#21151;&#33021;&#30340; Action&#65292;&#23427;&#21807;&#19968;&#30340;&#20316;&#29992;
        &#23601;&#26159;&#22312;&#20027;&#33756;&#21333;&#26465;&#25110;&#20027;&#24037;&#20855;&#26465;&#19978;&#21344;&#25454;&#19968;&#20010;&#39033;&#20301;&#32622;&#65292; &#32534;&#36753;&#22120;&#21487;&#20197;&#23558;&#20855;&#26377;&#23454;&#38469; &#21151;&#33021;&#30340; Action &#26144;&#23556;&#21040;&#26576;&#20010; Retarget Action&#65292;&#24403;&#36825;&#20010;&#32534;&#36753;&#22120;&#34987;&#28608;&#27963;&#26102;&#65292;&#20027;&#33756;&#21333;/&#24037;&#20855;&#26465;&#19978;&#30340;&#37027;&#20010;
        Retarget Action&#23601;&#20250;&#20855;&#26377;&#37027;&#20010; Action &#30340;&#21151;&#33021;&#12290;</p><p>                &#20030; &#20363;&#26469;&#35828;&#65292;Eclipse &#25552;&#20379;&#20102; IWorkbenchActionConstants.COPY&#36825;&#20010; Retarget
        Action&#65292;&#23427;&#30340;&#25991;&#23383;&#21644;&#22270;&#26631;&#37117;&#26159;&#39044;&#20808; &#23450;&#20041;&#22909;&#30340;&#65292;&#20551;&#35774;&#25105;&#20204;&#30340;&#32534;&#36753;&#22120;&#38656;&#35201;&#19968;&#20010;"&#22797;&#21046;&#33410;&#28857;&#21040;&#21098;&#36148;&#26495;"&#21151;&#33021;&#65292;&#22240;&#20026;"&#22797;&#21046;&#33410;&#28857;"&#21644;"&#22797;&#21046;"&#36825;&#20004;&#20010;&#35789;&#30340;&#35821; &#20041;&#21313;&#20998;&#30456; &#36817;&#65292;&#25152;&#20197;&#21487;&#20197;&#26032;&#24314;&#19968;&#20010;&#20855;&#26377;&#23454;&#38469;&#21151;&#33021;&#30340;
        CopyNodeAction&#65288;extends Action&#65289; &#65292;&#28982;&#21518;&#22312;&#36866;&#24403;&#30340;&#20301;&#32622;&#35843; &#29992;&#19979;&#38754;&#20195;&#30721;&#23454;&#29616;&#20108;&#32773;&#30340;&#26144;&#23556;&#65306;
        IActionBars.setGlobalActionHandler(IWorkbenchActionConstants.COPY&#65292;copyNodeAction)
        &#24403;&#36825;&#20010;&#32534;&#36753;&#22120;&#34987;&#28608;&#27963;&#26102;&#65292;Eclipse &#20250;&#26816;&#26597;&#21040;&#36825;&#20010;&#26144;&#23556;&#65292;&#35753; COPY &#39033;&#21464;&#20026;&#21487;&#29992;&#29366;&#24577;&#65292;&#24182;&#19988;&#24403;&#29992;&#25143;&#25353;&#19979;&#23427;&#26102;&#21435;&#25191; &#34892; CopyNodeAction &#37324;&#23450;&#20041; &#30340;&#25805;&#20316;&#65292;&#21363;
        run()&#26041;&#27861;&#37324;&#30340;&#20195;&#30721;&#12290;Eclipse &#24341;&#20837;Retarget Action &#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#23613;&#37327; &#20943;&#23569;&#20027;&#33756;&#21333;/&#24037;&#20855;&#26465;&#30340;&#37325;&#24314;&#28040;&#32791;&#65292;&#24182;&#19988;&#26377;&#21033;&#20110;&#29992;&#25143;&#20351;&#29992;&#19978;&#30340;&#19968;&#33268;&#24615;&#12290;&#22312; GEF
        &#24212;&#29992;&#31243;&#24207;&#37324;&#65292;&#22240;&#20026;&#24456;&#21487;&#33021;&#23384;&#22312; &#22810;&#20010;&#35270;&#22270;&#65288;&#20363;&#22914;&#32534;&#36753;&#35270;&#22270; &#21644;&#22823;&#32434;&#35270;&#22270;&#65292;&#21363;&#20351;&#26242;&#26102;&#21482;&#26377;&#19968;&#20010;&#35270;&#22270;&#65292;&#20063;&#35201;&#32771;&#34385;&#21040;&#20197;&#21518;&#25193;&#23637;&#20026;&#22810;&#20010;&#30340;&#21487;&#33021;&#65289; &#65292;&#32780;
        &#27599;&#20010;&#35270;&#22270;&#37117;&#24212;&#35813;&#33021;&#22815;&#23436;&#25104;&#30456;&#31867;&#20284;&#30340;&#25805;&#20316;&#65292;&#20363;&#22914;&#22312;&#26641;&#32467;&#26500;&#30340;&#22823;&#32434;&#35270;&#22270;&#37324;&#20063;&#24212;&#35813;&#20687;&#32534;&#36753;&#35270; &#22270;&#19968;&#26679;&#21487;&#20197;&#21024;&#38500;&#36873; &#20013;&#33410;&#28857;&#65292;&#25152;&#20197;&#19968;&#33324;&#30340;&#25805;&#20316;&#37117;&#24212;&#20197;&#26144;&#23556;&#21040; Retarget Action &#30340;&#26041;&#24335;&#24314;&#31435;&#12290; </p><p>&#22312; plugin.xml &#25991;&#20214;&#20013;&#35774;&#32622; contributorClass&#12290;</p><div class="mediaobject"><img src="../../images/step7/step7-2.jpg"></div><p>&#36816;&#34892;</p><div class="mediaobject"><img src="../../images/step7/step7-3.jpg"></div></div></div><div class="article" title="&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e887"></a>&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e907">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e966">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e982">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e996">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e1010">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e1019">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></div><p>&#20869;&#23481;&#25552;&#35201; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</p></li><li class="listitem"><p>&#20174;&#35270;&#22270;Graphicalviewer &#20462;&#25913;&#22270;&#24418;&#21518;&#22914;&#20309;&#36890;&#30693;&#32473; model &#27169;&#22411; </p></li><li class="listitem"><p>&#20026;&#20160;&#20040;&#35201;&#24314;&#31435;&#25277;&#35937;&#27169;&#22411;</p></li><li class="listitem"><p>&#20351;&#29992; PaletterViewer&#12290;&#22914;&#20309;&#20026; PaletterViewer &#28155;&#21152;&#26631;&#20934;&#24037;&#20855; Tool&#65292;&#28155;&#21152;&#33258;&#23450;&#20041;&#24037;&#20855;&#65292;&#35774;
            &#32622; PaletterViewer&#30340;&#25277;&#23625; drawer&#23646;&#24615;&#35270;&#22270;  </p></li></ul></div><div class="section" title="&#21024;&#38500;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e907"></a>&#21024;&#38500;&#22270;&#24418;</h2></div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#19968;&#19979;&#22914;&#20309;&#21024;&#38500;&#22270;&#24418;&#12290;&#19968;&#33324;&#26469;&#35762;&#65292;&#21024;&#38500;&#22270;&#24418;&#38656;&#35201;&#19979;&#38754;&#30340;&#19968;&#20123;&#27493;&#39588;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#22312;&#24037;&#20855;&#26465;&#25110;&#32773;&#33756;&#21333;&#19978;&#21019;&#24314;&#30456;&#24212;&#30340; Action&#12290;</p></li><li class="listitem"><p> &#22312;&#22270;&#24418;&#27169;&#22411; A&#20013;&#21019;&#24314;&#30456;&#24212;&#30340;&#21024;&#38500;&#20989;&#25968; B&#65292;&#24182;&#36890;&#30693; Editpart &#30456;&#24212;&#30340;&#25913;&#21464;&#12290;</p></li><li class="listitem"><p>&#24403;&#21024;&#38500;&#22270;&#24418;&#26102;&#35201;&#29992;&#27169;&#22411; A&#23545;&#24212;&#30340; Editpart &#21047;&#26032; Graphical Editor&#26469;&#26174;&#31034;&#21024;&#38500;&#12290;</p></li><li class="listitem"><p> &#28982;&#21518;&#23601;&#35201;&#21019;&#24314;&#30456;&#24212;&#30340; Command &#26469;&#35843;&#29992;&#65288;2&#65289;&#20013;&#21019;&#24314;&#30340;&#21024;&#38500;&#20989;&#25968; B&#12290; </p></li><li class="listitem"><p> &#22312;&#30456;&#20851;&#30340; Policy&#20013;&#35843;&#29992;&#21069;&#38754;&#21019;&#24314;&#30340; Command&#12290;</p></li><li class="listitem"><p> &#22312;&#22270;&#24418;&#27169;&#22411; A&#30340;&#23376;&#27169;&#22411; C&#30340; Editpart&#20013;&#23433;&#35013;&#36825;&#20010; Policy&#12290;OK&#65281; </p></li></ul></div><p>&#25171;&#24320; DiagramActionBarContributor &#31867;&#65292;&#22312;&#20854;&#20013;&#28155;&#21152; Delete&#30340; Action</p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramActionBarContributor <strong class="hl-keyword">extends</strong> ActionBarContributor{
    ........
    <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> buildActions() {
		addRetargetAction(<strong class="hl-keyword">new</strong> UndoRetargetAction());
		addRetargetAction(<strong class="hl-keyword">new</strong> RedoRetargetAction());
        <em class="hl-comment" style="color: silver">//&#28155;&#21152;&#21024;&#38500;</em>
		addRetargetAction(<strong class="hl-keyword">new</strong> DeleteRetargetAction());
	}
    ......
     <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> contributeToToolBar(IToolBarManager toolBarManager) { 
        toolBarManager.add(getAction(ActionFactory.UNDO.getId())); 
        toolBarManager.add(getAction(ActionFactory.REDO.getId())); 
         <em class="hl-comment" style="color: silver">//&#28155;&#21152;&#21040;toolbar</em>
        toolBarManager.add(getAction(ActionFactory.DELETE.getId())); 
    }
    .......
}

    </pre><p>&#22240;&#27492;&#25105;&#20204;&#35201;&#21024;&#38500;&#30340; HelloModel &#26159;&#21253;&#21547;&#22312; ContentsModel &#20013;&#30340;&#65292;&#22240;&#27492;&#35201;&#22312;
        ContentsModel &#20013;&#28155;&#21152;&#21024;&#38500; HelloModel &#30340;&#20989;&#25968;&#12290;&#21478;&#22806;&#65292;&#25105;&#20204;&#30340; AbstractModel &#24050;&#32463;&#28155;&#21152;&#20102;
        PropertyChangeSupport &#26469;&#25903;&#25345;&#23545; Editpart &#30340;&#20449;&#24687;&#20256;&#36882;&#65292;&#22240;&#27492;&#65292;&#36825;&#37324;&#25105;&#20204;&#35753;
        ContentsModel &#32487;&#25215; AbstractModel&#12290;&#20462;&#25913; ContentsModel &#30340;&#20195;&#30721;&#22914;&#19979;&#65306; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.util.ArrayList;
<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel <strong class="hl-keyword">extends</strong> AbstractModel{
	<strong class="hl-keyword">private</strong> List children=<strong class="hl-keyword">new</strong> ArrayList();<em class="hl-comment" style="color: silver">//&#23376;&#27169;&#22411;&#21015;&#34920;</em>
	<em class="hl-comment" style="color: silver">// &#23450;&#20041;&#19979;&#38754;&#30340;&#23383;&#31526;&#20018;&#29992;&#20110;&#26631;&#35782;&#35813;&#27169;&#22411;&#20013;&#32467;&#26500;&#65288;Children&#65289;&#25913;&#21464; </em>
	  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String P_CHILDREN = <strong class="hl-string"><em style="color:red">"_children"</em></strong>; 
	<strong class="hl-tag" style="color: blue">/**
	 * &#28155;&#21152;&#23376;&#27169;&#22411;
	 * @param child
	 */</strong>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addChild(Object child){
		<strong class="hl-keyword">this</strong>.children.add(child);
		 <em class="hl-comment" style="color: silver">// &#28155;&#21152;&#23376;&#27169;&#22411;&#21518;&#36890;&#30693; EditPart </em>
	      firePropertyChange(P_CHILDREN, null, null); 
	}
	<strong class="hl-tag" style="color: blue">/**
	 * &#33719;&#24471;&#23376;&#27169;&#22411;
	 * @return
	 */</strong>
	<strong class="hl-keyword">public</strong> List getChildren() {
		<strong class="hl-keyword">return</strong> children;
	}
	  <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> removeChild(Object child) { 
	        <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	        children.remove(child); 
	        <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#23376;&#27169;&#22411;&#21518;&#36890;&#30693; EditPart </em>
	        firePropertyChange(P_CHILDREN, null, null); 
	 } 
}

    </pre><p>&#65289; &#28982;&#21518;&#65292; ContentsEditPart &#35201;&#33021;&#24863;&#30693; ContentsModel&#30456;&#24212;&#30340;&#25913;&#21464;&#24182;&#20462;&#25913; Graphical Editor
    &#19978;&#22270;&#24418;&#30340;&#26174;&#31034;&#12290;&#26041;&#27861;&#21644;&#21069;&#38754;&#20171;&#32461;&#30340;&#35813;&#25913;&#21464; HelloEditPart &#30340;&#26041;&#27861;&#19968;&#26679;&#12290;&#20195;&#30721;&#22914;&#19979;&#65306;</p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> EditPartWithListener { 
  ... 
   <em><span class="hl-annotation" style="color: gray">@Override</span></em>
  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) { 
    <em class="hl-comment" style="color: silver">// &#27169;&#22411;&#25913;&#21464;&#26102;&#36890;&#30693; </em>
    <strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(ContentsModel.P_CHILDREN)) { 
      <em class="hl-comment" style="color: silver">// &#22240;&#27492;&#23376;&#27169;&#22411;&#25913;&#21464;&#65292;&#35201;&#21047;&#26032;&#23376;&#27169;&#22411;&#30340; Editpart&#26174;&#31034;&#20854;&#25913;&#21464; </em>
      refreshChildren(); 
    } 
  } 
  ... 
} 
        
        
    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#27880;&#24847;&#36825;&#37324;&#21033;&#29992; refreshChildren &#26041;&#27861;&#26469;&#21047;&#26032;&#23376;&#27169;&#22411;&#30340; Editpart&#12290; </p></td></tr></table></div><p>&#35201;&#30495;&#30340;&#21024;&#38500;&#22270;&#24418;&#65292;&#36824;&#26159;&#35201;&#26377;&#30456;&#24212;&#30340; Command &#25165;&#34892;&#12290;&#22240;&#27492;&#25105;&#20204;&#21019;&#24314;&#20102;&#19979;&#38754;&#30340;DeleteCommand</p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DeleteCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> ContentsModel contentsModel;

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		<em class="hl-comment" style="color: silver">//&#21024;&#38500;&#27169;&#22411;</em>
		contentsModel.removeChild(helloModel);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setContentsModel(Object model) {
		contentsModel = (ContentsModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setHelloModel(Object model) {
		helloModel = (HelloModel) model;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		contentsModel.addChild(helloModel);
	}

}

    </pre><p> Command &#35201;&#22312; Editing Policy &#20013;&#35843;&#29992;&#12290;&#29992;&#25143;&#21457;&#20986; Delete &#21629;&#20196;&#26102;&#26159;&#21457;&#20986;&#30340;
        REQ_DELETE &#31867;&#22411;&#30340; Request&#65292;&#22240;&#27492;&#25105;&#20204;&#35201;&#32771;&#34385;&#22312;&#20160;&#20040;&#22320;&#26041;&#22788;&#29702;&#36825;&#20010; Request&#12290;GEF&#25552;&#20379;&#20102;
        ComponentEditPolicy&#26469;&#22788;&#29702; REQ_DELETE &#31867;&#22411;&#30340;Request&#12290;&#22312;ComponentEditPolicy&#31867;&#20013;&#65292;
        &#24403;&#21457;&#36865; REQ_DELETE &#31867;&#22411;&#30340; Request &#21518;&#65292;&#23601;&#35843;&#29992; createDeleteCommand &#26041;&#27861;&#65292;&#28982;&#21518;&#22312;&#35813;&#26041;
        &#27861;&#20013;&#29992;&#21069;&#38754;&#21019;&#24314;&#30340; DeleteCommand &#26469;&#23454;&#29616;&#23545;&#22270;&#24418;&#30340;&#21024;&#38500;&#12290; 
        &#25152;&#20197;&#65292;&#19979;&#38754;&#21019;&#24314;&#19968;&#20010; ComponentEditPolicy&#30340;&#27966;&#29983;&#31867; CustomComponentEditPolicy&#65292;
        &#28982;&#21518;&#37325;&#36733;&#20854; createDeleteCommand &#26041;&#27861;&#65292;&#20195;&#30721;&#22914;&#19979;&#65306; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.policies;

<strong class="hl-keyword">import</strong> gef.tutorial.step.commands.DeleteCommand;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editpolicies.ComponentEditPolicy;
<strong class="hl-keyword">import</strong> org.eclipse.gef.requests.GroupRequest;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomComponentEditPolicy <strong class="hl-keyword">extends</strong> ComponentEditPolicy {
	   <em class="hl-comment" style="color: silver">// &#37325;&#36733; createDeleteCommand </em>
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command createDeleteCommand(GroupRequest deleteRequest) {
		DeleteCommand deleteCommand = <strong class="hl-keyword">new</strong> DeleteCommand();
		deleteCommand.setContentsModel(getHost().getParent().getModel());
		deleteCommand.setHelloModel(getHost().getModel());
		<strong class="hl-keyword">return</strong> deleteCommand;
	}

}

    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#37324; getHost &#26041;&#27861;&#24471;&#21040;&#30340;&#26159; HelloModel &#30340; Editpart&#65292;&#36825;&#26159;&#22240;&#20026;&#36825;&#20010;
    CustomComponentEditPolicy &#35201;&#23433;&#35013;&#21040; HelloModel &#23545;&#24212;&#30340; HelloEditorPart &#20013;&#12290; </p></td></tr></table></div><p>&#26368;&#21518;&#65292;&#25226;&#36825;&#20010; CustomComponentEditPolicy &#23433;&#35013;&#21040; HelloEditPart &#20013;&#12290;&#36825;&#37324;
    &#20351;&#29992; GEF&#25552;&#20379;&#30340; COMPONENT_ROLE &#26469;&#26631;&#35782;&#36825;&#20010;&#23433;&#35013;&#30340; Policy&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditPart <strong class="hl-keyword">extends</strong> EditPartWithListener { 
  ... 
  <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() { 
    installEditPolicy(EditPolicy.COMPONENT_ROLE, <strong class="hl-keyword">new</strong> CustomComponentEditPolicy()); 
  } 
  ... 
} 
        
    </pre><div class="mediaobject"><img src="../../images/step8/step8-1.jpg"></div></div><div class="section" title="&#28155;&#21152;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e966"></a>&#28155;&#21152;&#22270;&#24418; </h2></div></div></div><p>
       &#28155;&#21152;&#22270;&#24418;&#21644;&#21024;&#38500;&#22270;&#24418;&#22522;&#26412;&#36807;&#31243;&#24046;&#19981;&#22810;&#65292;&#19981;&#36807;&#25105;&#20204;&#36825;&#37324;&#35201;&#20171;&#32461; GEF &#25552;&#20379;&#30340; Palette&#65292;&#20316;&#20026;
       &#19968;&#28857;&#26032;&#40092;&#30340;&#19996;&#35199;&#12290; 
   </p><p>Palette &#20013;&#25918;&#32622;&#30340;&#25152;&#26377;&#19996;&#19996;&#37117;&#31216;&#20026;&#24037;&#20855; Tool&#12290;&#25152;&#20197; Palette &#23601;&#26159;&#24037;&#20855;&#31665;&#12290;&#23545;&#20110;&#19968;&#20010;&#22797;&#26434;&#30340;
        &#32472;&#22270;&#36719;&#20214;&#26469;&#35762;&#65292;&#24037;&#20855;&#20250;&#26377;&#24456;&#22810;&#65292;&#22240;&#27492;&#31867;&#20284;&#30340;&#24037;&#20855;&#35201;&#25918;&#22312;&#19968;&#20010;&#24037;&#20855;&#30418;&#20013;&#65292;GEF &#37324;&#21483; Drawer&#65288;&#25277;
        &#23625;&#65289; &#12290;&#38500;&#20102;&#33258;&#24049;&#23450;&#20041;&#30340;&#19968;&#20123;&#24037;&#20855;&#20043;&#22806;&#65292;GEF&#36824;&#25552;&#20379;&#20102;&#19968;&#20123;&#36890;&#29992;&#30340;&#24037;&#20855;&#65292;&#35692;&#22914;&#8220;&#36873;&#25321;&#22270;&#24418;&#8221;&#21644;
        &#8220;&#36873;&#25321;&#22810;&#20010;&#22270;&#24418;&#8221;&#31561;&#12290; </p><p> GEF&#20013;&#23545;&#24037;&#20855;&#30340;&#25805;&#20316;&#20854;&#23454;&#23601;&#26159;&#23545;&#40736;&#26631;&#30340;&#25805;&#20316;&#12290;&#20363;&#22914;&#65292;&#24403;&#20351;&#29992;&#8220;&#36873;&#25321;&#22270;&#24418;&#8221;&#24037;&#20855;&#26102;&#65292;GEF
        &#35201;&#21028;&#26029;&#40736;&#26631;&#30340;&#20301;&#32622;&#65292;&#25165;&#33021;&#20915;&#23450;&#37027;&#20010;&#22270;&#24418;&#34987;&#36873;&#20013;&#65292;&#28982;&#21518;&#22270;&#24418;&#30340; Editpart &#20316;&#20986;&#21453;&#39304;&#26174;&#31034;&#36873;&#20013;&#30340;&#22270;
        &#24418;&#12290;&#21478;&#22806;&#65292;&#24403;&#40736;&#26631;&#25302;&#21160;&#31227;&#21160;&#22270;&#24418;&#26102;&#65292;&#20063;&#35201;&#21028;&#26029;&#40736;&#26631;&#30340;&#36816;&#21160;&#12290; </p><p>  &#24403;&#28155;&#21152;&#19968;&#20010;&#22270;&#24418;&#26102;&#65292;&#29992;&#25143;&#39318;&#20808;&#36873;&#25321;&#19968;&#20010;&#24037;&#20855; Tool&#65292;&#28982;&#21518;&#35843;&#29992;&#23433;&#35013;&#22312; Editpart&#65288;&#36825;&#37324;&#26159;&#29238;
        Editpart&#65289;&#20013;&#30340; Policy&#20013;&#30340; Command&#65288;&#36825;&#37324;&#26159; CreateCommand&#65289;&#22312;&#40736;&#26631;&#28857;&#20987;&#30340;&#20301;&#32622;&#32472;&#21046;&#19968;&#20010;
        &#22270;&#24418;&#12290;&#32780;&#19988;&#65292;&#24403;&#29992;&#25143;&#25302;&#21160;&#40736;&#26631;&#26102;&#65292;&#23558;&#25913;&#21464;&#22270;&#24418;&#30340;&#23610;&#23544;&#12290; </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#20123;Tool &#20063;&#21487;&#20197;&#19981;&#29992;&#25918;&#22312; Palette &#20013;&#12290;</p></td></tr></table></div><div class="section" title="&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor"><div class="titlepage"><div><div><h3 class="title"><a name="d0e982"></a>&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</h3></div></div></div><p>&#20026;&#20102;&#23454;&#29616;&#24102; Palette &#30340; Graphical Editor &#65292; GEF &#25552;&#20379;&#20102;&#19968;&#20010;
    org.eclipse.gef.ui.parts.GraphicalEditorWithPalette &#31867;&#12290; </p><p>  &#20174;&#19979;&#38754;&#30340;&#26641;&#21487;&#20197;&#30475;&#20986;&#65292;GraphicalEditorWithPalette &#31867;&#26159;&#20174; GraphicalEditor &#31867;&#32487;&#25215;&#26469;
        &#30340;&#65292;&#22240;&#27492;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#25226; DiagramEditor &#25913;&#20026;&#20174; GraphicalEditorWithPalette &#31867;&#27966;&#29983;&#65292;&#24182;
        &#19988;&#35201;&#32487;&#25215; getPaletteRoot&#26041;&#27861;&#12290; </p><div class="mediaobject"><img src="../../images/step8/step8-2.jpg"></div><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloWorldEditor <strong class="hl-keyword">extends</strong> GraphicalEditorWithPalette { 
  ... 
  <strong class="hl-keyword">protected</strong> PaletteRoot getPaletteRoot() { 
    <em class="hl-comment" style="color: silver">// &#21518;&#38754;&#35201;&#37325;&#36733;&#35813;&#26041;&#27861;&#65292;&#22312; Palette &#20013;&#21152;&#19978; Tools </em>
    <strong class="hl-keyword">return</strong> null; 
  } 
  ... 
} 
        
    </pre></div><div class="section" title="&#21019;&#24314; Palette"><div class="titlepage"><div><div><h3 class="title"><a name="d0e996"></a>&#21019;&#24314; Palette </h3></div></div></div><p>&#22240;&#20026;&#21019;&#24314; Palette &#23454;&#22312;&#22826;&#31616;&#21333;&#65292;&#22240;&#27492;&#25105;&#19981;&#32454;&#35828;&#65292;&#21482;&#26159;&#35831;&#22823;&#23478;&#30475;&#19979;&#38754;&#20195;&#30721;&#20013;&#30340;&#27493;&#39588;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditorWithPalette {
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> PaletteRoot getPaletteRoot() {
		  <em class="hl-comment" style="color: silver">// &#65288;1&#65289;&#39318;&#20808;&#35201;&#21019;&#24314;&#19968;&#20010;palette&#30340;route  </em>
	      PaletteRoot root = <strong class="hl-keyword">new</strong> PaletteRoot(); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;2&#65289;&#21019;&#24314;&#19968;&#20010;&#24037;&#20855;&#32452;&#29992;&#20110;&#25918;&#32622;&#24120;&#35268;Tools </em>
	      PaletteGroup toolGroup = <strong class="hl-keyword">new</strong> PaletteGroup(<strong class="hl-string"><em style="color:red">"&#24037;&#20855;"</em></strong>); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;3&#65289;&#21019;&#24314;&#19968;&#20010;GEF&#25552;&#20379;&#30340;&#8220;selection&#8221;&#24037;&#20855;&#24182;&#23558;&#20854;&#25918;&#21040;toolGroup&#20013; </em>
	      ToolEntry tool = <strong class="hl-keyword">new</strong> SelectionToolEntry(); 
	      toolGroup.add(tool); 
	      root.setDefaultEntry(tool); <em class="hl-comment" style="color: silver">// &#35813;&#65288;&#36873;&#25321;&#65289;&#24037;&#20855;&#26159;&#32570;&#30465;&#34987;&#36873;&#25321;&#30340;&#24037;&#20855; </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;4&#65289;&#21019;&#24314;&#19968;&#20010;GEF&#25552;&#20379;&#30340;&#8220;Marquee&#22810;&#36873;&#8221;&#24037;&#20855;&#24182;&#23558;&#20854;&#25918;&#21040;toolGroup&#20013; </em>

	      tool = <strong class="hl-keyword">new</strong> MarqueeToolEntry(); 
	      toolGroup.add(tool); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;5&#65289;&#21019;&#24314;&#19968;&#20010;Drawer&#65288;&#25277;&#23625;&#65289;&#25918;&#32622;&#32472;&#22270;&#24037;&#20855;&#65292;&#35813;&#25277;&#23625;&#21517;&#31216;&#20026;&#8220;&#30011;&#22270;&#8221; </em>
	      PaletteDrawer drawer = <strong class="hl-keyword">new</strong> PaletteDrawer(<strong class="hl-string"><em style="color:red">"&#30011;&#22270;"</em></strong>); 
	   <em class="hl-comment" style="color: silver">// &#25351;&#23450;&#8221;&#21019;&#24314;HelloModel&#27169;&#22411;&#8221;&#24037;&#20855;&#25152;&#23545;&#24212;&#30340;&#22270;&#26631; </em>
<em class="hl-comment" style="color: silver">//	      ImageDescriptor descriptor = </em>
<em class="hl-comment" style="color: silver">//	AbstractUIPlugin.imageDescriptorFromPlugin(Application.PLUGIN_ID, </em>
<em class="hl-comment" style="color: silver">//	IImageKeys.NEWHELLOMODEL); </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;6&#65289;&#21019;&#24314;&#8221;&#21019;&#24314;HelloModel&#27169;&#22411;&#8221;&#24037;&#20855; </em>
	      CreationToolEntry creationEntry = 
	        <strong class="hl-keyword">new</strong> CreationToolEntry( 
	          <strong class="hl-string"><em style="color:red">"&#32472;&#21046;HelloModel"</em></strong>, <em class="hl-comment" style="color: silver">// The character string displayed on a palette </em>
	          <strong class="hl-string"><em style="color:red">"&#21019;&#24314;HelloModel&#27169;&#22411;"</em></strong>, <em class="hl-comment" style="color: silver">// Tool &#25552;&#31034; </em>
	          <strong class="hl-keyword">new</strong> SimpleFactory(HelloModel.<strong class="hl-keyword">class</strong>), <em class="hl-comment" style="color: silver">// The factory which creates a model </em>
	          null, <em class="hl-comment" style="color: silver">// The image of 16X16 displayed on a palette </em>
	          null);<em class="hl-comment" style="color: silver">// The image of 24X24 displayed on a palette </em>
	      drawer.add(creationEntry);  <em class="hl-comment" style="color: silver">// &#65288;7&#65289;&#23558;&#20854;&#21152;&#21040;&#21069;&#38754;&#21019;&#24314;&#30340;&#25277;&#23625;&#20013; </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;8&#65289;&#26368;&#21518;&#23558;&#21019;&#24314;&#30340;&#20004;&#32452;&#24037;&#20855;&#21152;&#21040;root&#19978;. </em>
	      root.add(toolGroup); 
	      root.add(drawer); 
	 
	      <strong class="hl-keyword">return</strong> root; 
	}
    ........
        
    </pre><p> &#34429;&#28982;&#25105;&#20204;&#21069;&#38754;&#20351;&#29992;&#20102; CreationToolEntry &#31867;&#26469;&#20026;&#8220;&#30011;&#22270;&#8221;&#25277;&#23625; drawer&#28155;&#21152;&#19968;&#20010;&#24037;&#20855;&#65292;&#20294; &#26159;&#22240;&#20026;&#25105;&#20204;&#20351;&#29992;&#20102;
        SimpleFactory&#65292;&#22240;&#27492;&#22312;&#35813;&#20989;&#25968;&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;&#20102; HelloModel &#30340; newInstance&#65292;&#36824;&#26159;&#25226;&#35813; Entry&#25351;&#23450;&#20026;&#32472;&#21046;&#19968;&#20010; HelloModel &#22270;&#24418;&#12290;
        &#36816;&#34892;&#19968;&#19979;&#65292;&#23601;&#20250;&#21457;&#29616; Palette &#24050;&#32463;&#21152;&#19978;&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step8/step8-3.jpg"></div></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;&#30340; Command"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1010"></a>&#21019;&#24314;&#27169;&#22411;&#30340; Command </h3></div></div></div><p>&#21644;&#21024;&#38500;&#27169;&#22411;&#19968;&#26679;&#65292;&#35201;&#26032;&#24314;&#19968;&#20010;&#27169;&#22411;&#20063;&#35201;&#26377;&#30456;&#24212;&#30340; Command&#65292;&#19979;&#38754;&#25105;&#20204;&#23601;&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;
    CreateCommand&#30340; Command &#26469;&#25191;&#34892;&#26032;&#24314;&#22270;&#24418;&#30340;&#20219;&#21153;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CreateCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> ContentsModel contentsModel;

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		contentsModel.addChild(helloModel);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setContentsModel(Object model) {
		contentsModel = (ContentsModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setHelloModel(Object model) {
		helloModel = (HelloModel) model;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		contentsModel.removeChild(helloModel);
	}

}

    </pre></div><div class="section" title="&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1019"></a>&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</h3></div></div></div><p>&#28982;&#21518;&#23601;&#26159;&#27627;&#26080;&#24748;&#24565;&#30340;&#22312; XYLayoutEditPolicy&#20013;&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; CreateCommand&#65292; &#36825;&#26159;&#22240;
    &#20026;&#22312;&#36825;&#20010; Policy&#20013;&#26377; CreateRequest &#35831;&#27714;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomXYLayoutEditPolicy <strong class="hl-keyword">extends</strong> XYLayoutEditPolicy { 
.....
<strong class="hl-keyword">protected</strong> Command getCreateCommand(CreateRequest request) { 
     CreateCommand command = <strong class="hl-keyword">new</strong> CreateCommand(); 
     <em class="hl-comment" style="color: silver">// &#20135;&#29983;&#21019;&#24314;&#22270;&#24418;&#30340;&#23610;&#23544;&#21644;&#20301;&#32622; </em>
     Rectangle constraint = (Rectangle) getConstraintFor(request); 
     <em class="hl-comment" style="color: silver">// &#33719;&#24471;&#26032;&#21019;&#24314;&#30340;&#22270;&#24418; </em>
     HelloModel model = (HelloModel) request.getNewObject(); 
     <em class="hl-comment" style="color: silver">// &#20026;&#35813;&#22270;&#24418;&#35774;&#32622;&#21069;&#38754;&#33719;&#24471;&#30340;&#20301;&#32622;&#21644;&#23610;&#23544; </em>
     model.setConstraint(constraint); 
     <em class="hl-comment" style="color: silver">// &#23558;&#26032;&#21019;&#24314;&#30340;&#22270;&#24418;&#28155;&#21152;&#21040;&#27169;&#22411;&#20013;&#65292; </em>
<em class="hl-comment" style="color: silver">// &#22240;&#20026;&#25105;&#20204;&#22312;&#31532; 2 &#39029;&#30340;&#65288;2&#65289;&#20013;&#24050;&#32463;&#25226;&#27169;&#22411;&#26356;&#25913;&#21644;&#23427;&#20204;&#30340; Editpart &#32852;&#31995;&#36215;&#26469;&#65292; </em>
<em class="hl-comment" style="color: silver">// &#22240;&#27492;&#65292;Graphical Editor&#20013;&#30340;&#22270;&#24418;&#20063;&#20250;&#21457;&#29983;&#21464;&#21270; </em>
     command.setContentsModel(getHost().getModel()); 
     command.setHelloModel(model); 
     <strong class="hl-keyword">return</strong> command; 
 } 
.....
}
        
    </pre><p>&#25191;&#34892;&#19968;&#19979;&#12290;&#36873;&#25321;&#8220;&#21019;&#24314; HelloModel&#27169;&#22411;&#8221;&#24037;&#20855;&#22312; Graphical Editor&#19978;&#23601;&#20250;&#20986;&#29616;&#19968;&#20010;&#24102;&#21152;
        &#21495;&#30340;&#20809;&#26631;&#65288;&#36825;&#20010;&#20809;&#26631;&#26159;&#22312; CreationTool &#20013;&#25552;&#20379;&#30340;&#65292;&#35265;&#19979;&#38754;&#20195;&#30721;&#65289; &#65292;&#22312;&#26576;&#20301;&#32622;&#21333;&#20987;&#23601;&#20250;&#21019;&#24314;&#19968;
        &#20010;&#26032;&#30340; HelloModel &#22270;&#24418;&#65292;&#35813;&#22270;&#24418;&#30340;&#23610;&#23544;&#26159;&#30001;&#22270;&#24418;&#20013;&#30340;&#23383;&#31526;&#20018;&#26469;&#20915;&#23450;&#30340;&#12290;&#32780;&#22914;&#26524;&#20320;&#22312;&#21019;&#24314;&#26032;
        &#30340; HelloModel &#22270;&#24418;&#26102;&#25302;&#21160;&#40736;&#26631;&#65292;&#37027;&#20040;&#22270;&#24418;&#30340;&#23610;&#23544;&#30001;&#25302;&#21160;&#20915;&#23450;&#12290;&#22914;&#19979;&#22270;&#25152;&#31034;&#12290; </p><pre class="programlisting"> <strong class="hl-keyword">public</strong> CreationTool() { 
     setDefaultCursor(SharedCursors.CURSOR_TREE_ADD); 
     setDisabledCursor(SharedCursors.NO); 
} 
    </pre><div class="mediaobject"><img src="../../images/step8/step8-4.jpg"></div><p>&#24635;&#32467;&#19968;&#19979;&#65306;&#35201;&#24819;&#20570;&#20107;&#65292;&#23601;&#35201;&#21019;&#24314;&#30456;&#24212;&#30340; Command&#65292;&#24182;&#19988;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#36824;&#35201;&#30693;&#36947;&#25226;&#36825;&#20123;
        Command&#25918;&#21040;&#21512;&#36866;&#30340;Policy&#20013;&#12290; &#22312;http://help.eclipse.org/help31/index.jsp&#30340;GEF Programmer's
        Guide &#20013;&#30340; Editing and Edit Policies &#20013;&#25552;&#20379;&#20102;&#19968;&#20123; Command &#21644; Policy&#30340;&#23545;&#24212;&#34920;&#12290; </p><p>  &#22823;&#23478;&#21487;&#20197;&#24819;&#24819;&#20026;&#20160;&#20040;&#21024;&#38500;&#22270;&#24418;&#30340;&#24037;&#20855;&#25353;&#38062;&#25918;&#22312;&#24037;&#20855;&#26465;&#20013;&#65292; &#32780;&#28155;&#21152;&#22270;&#24418;&#30340;&#25353;&#38062;&#25918;&#22312; Palette
        &#20013;&#12290;&#20854;&#23454;&#25105;&#35273;&#24471; Delete&#35201;&#27604; Create&#31616;&#21333;&#12290;&#25152;&#20197;GEF&#25226;&#23427;&#20204;&#25918;&#22312;&#19981;&#21516;&#22320;&#26041;&#65292;&#20063;&#31526;&#21512;&#29992;&#25143;&#30340;&#20064;
        &#24815;&#12290; </p></div></div></div><div class="article" title="&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1039"></a>&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e1043">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e1057">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e1083">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1090">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1043"></a>&#20869;&#23481;&#25552;&#35201;</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#26174;&#31034;&#23646;&#24615; Properties&#35270;&#22270;</p></li><li class="listitem"><p>&#22312; Properties&#20013;&#20462;&#25913;&#22270;&#24418;&#23646;&#24615;&#12290;</p></li><li class="listitem"><p>&#30452;&#25509;&#32534;&#36753;&#22270;&#24418;&#23646;&#24615;&#65292;&#36825;&#37324;&#26159;&#20462;&#25913;&#25991;&#26412;&#26694;&#20013;&#30340;&#25991;&#23383;</p></li></ul></div></div><div class="section" title="&#23646;&#24615;&#35270;&#22270;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1057"></a>&#23646;&#24615;&#35270;&#22270;</h2></div></div></div><p>&#21069;&#38754;&#30340;&#20363;&#23376;&#20013;&#22270;&#24418;&#30340;&#25991;&#26412;&#37117;&#26159;&#22266;&#23450;&#30340;&#65292; &#19979;&#38754;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;&#23646;&#24615;&#35270;&#22270; &#65288;property view&#65289;
        &#26469;&#20462;&#25913;&#22270;&#24418;&#30340;&#23646;&#24615;&#12290;&#23646;&#24615;&#35270;&#22270;&#26159;&#36890;&#36807; org.eclipse.ui.views.properties.IPropertySource&#25509;&#21475;&#23454;
        &#29616;&#30340;&#12290; 
        &#22312; GEF &#20013;&#65292;&#20351;&#29992;&#23646;&#24615;&#35270;&#22270;&#20462;&#25913;&#30340;&#26159;&#22270;&#24418;&#27169;&#22411;&#30340;&#23646;&#24615;&#65288;&#25442;&#21477;&#35805;&#35828;&#23601;&#26159;&#22270;&#24418;&#27169;&#22411;&#26159;&#23646;&#24615;&#35270;
        &#22270;&#30340;&#25968;&#25454;&#28304;&#65306;&#24403;&#22270;&#24418;&#27169;&#22411;&#25913;&#21464;&#26102;&#65288;&#22914;&#22270;&#24418;&#23610;&#23544;&#25110;&#25991;&#26412;&#25913;&#21464;&#26102;&#65289; &#65292;&#23646;&#24615;&#35270;&#22270;&#35201;&#21453;&#26144;&#30456;&#24212;&#25913;&#21464;&#65307;
        &#32780;&#22312;&#23646;&#24615;&#35270;&#22270;&#20013;&#20462;&#25913;&#23646;&#24615;&#26102;&#65292;&#22270;&#24418;&#20063;&#35201;&#21457;&#29983;&#30456;&#24212;&#25913;&#21464;&#65289; &#65292;&#22240;&#27492;&#65292;&#21482;&#38656;&#35201;&#25226; IPropertySource
        &#25509;&#21475;&#21644;&#22270;&#24418;&#27169;&#22411;&#31867;&#32467;&#21512;&#36215;&#26469;&#23601;&#34892;&#20102;&#65292; &#36825;&#23601;&#38656;&#35201;&#22270;&#24418;&#27169;&#22411;&#31867;&#23454;&#29616; &#65288;implements&#65289; IPropertySource
        &#25509;&#21475;&#12290; 
        1&#65294;  &#22240;&#20026;&#25105;&#20204;&#35201;&#29992;&#23646;&#24615;&#35270;&#22270;&#26469;&#23545;&#24212;&#20110;&#25152;&#26377;&#30340;&#22270;&#24418;&#27169;&#22411;&#65292;&#22240;&#27492;&#25105;&#20204;&#35753; AbstractModel
        &#26469;&#23454;&#29616; IPropertySource&#25509;&#21475;&#65292;&#24182;&#37325;&#36733;&#36825;&#20010;&#25509;&#21475;&#20013;&#30340;&#26041;&#27861;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">import</strong> org.eclipse.ui.views.properties.IPropertyDescriptor;
<strong class="hl-keyword">import</strong> org.eclipse.ui.views.properties.IPropertySource;
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> AbstractModel <strong class="hl-keyword">implements</strong> IPropertySource { 
     ............
     <strong class="hl-keyword">public</strong> Object getEditableValue() { 
           <strong class="hl-keyword">return</strong> <strong class="hl-keyword">this</strong>; <em class="hl-comment" style="color: silver">// &#36820;&#22238;&#27169;&#22411;&#33258;&#36523;&#20316;&#20026;&#21487;&#32534;&#36753;&#30340;&#23646;&#24615;&#20540; </em>
     } 
    <strong class="hl-keyword">public</strong> IPropertyDescriptor[] getPropertyDescriptors() { 
     <em class="hl-comment" style="color: silver">// &#22914;&#26524;&#22312;&#25277;&#35937;&#27169;&#22411;&#20013;&#36820;&#22238;null&#20250;&#20986;&#29616;&#24322;&#24120;&#65292;&#22240;&#27492;&#36825;&#37324;&#36820;&#22238;&#19968;&#20010;&#38271;&#24230;&#20026;0&#30340;&#25968;&#32452; </em>
      <em class="hl-comment" style="color: silver">// &#21518;&#38754;&#23558;&#20171;&#32461;IPropertyDescriptor&#25968;&#32452; </em>
     <strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> IPropertyDescriptor[<span class="hl-number">0</span>]; 
    } 
    <strong class="hl-keyword">public</strong> Object getPropertyValue(Object id) { 
      
       <strong class="hl-keyword">return</strong> null; 
    } 
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">boolean</strong> isPropertySet(Object id) { 
        <strong class="hl-keyword">return</strong> false;
    }
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> resetPropertyValue(Object id) { 
       
    } 
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setPropertyValue(Object id, Object value) { 
      
     } 
  
     ............
}        
    </pre><p>&#20462;&#25913; HelloModel&#65292;&#20351;&#20854;&#23454;&#38469;&#19978;&#25104;&#20026;&#23646;&#24615;&#35270;&#22270;&#30340;&#25968;&#25454;&#28304;&#12290;&#36825;&#23601;&#35201;&#37325;&#36733; AbstractModel &#20013;&#30340;&#30456;&#24212;&#26041;&#27861;&#12290; </p><pre class="programlisting">
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel <strong class="hl-keyword">extends</strong> AbstractModel {
    ..........
	<em class="hl-comment" style="color: silver">/* &#36825;&#20010;&#22320;&#26041;&#28155;&#21152;&#30340;&#23383;&#31526;&#20018; ID &#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;&#26102;&#21487;&#20197;&#34987; Editpart &#35782;&#21035; */</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String P_TEXT = <strong class="hl-string"><em style="color:red">"_text"</em></strong>; <em class="hl-comment" style="color: silver">// &#9312;</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
		<em class="hl-comment" style="color: silver">/*
		 * &#22270;&#24418;&#25991;&#26412;&#25913;&#21464;&#26102;&#36890;&#30693;&#20854; EditPart,&#36825;&#20010;&#22320;&#26041;&#20351;&#29992; firePropertyChange &#26041;&#27861;&#26469;&#36890;&#30693;&#22270;&#24418;&#27169;&#22411;&#30340; Editpart
		 * &#22270;&#24418;&#30340;&#25991;&#26412;&#24050;&#32463;&#25913;&#21464;&#12290; &#29616;&#22312;&#65292;&#25226;&#22270;&#24418;&#27169;&#22411;&#21644;&#23646;&#24615;&#35270;&#22270;&#24050;&#32463;&#32852;&#31995;&#36215;&#26469;&#20102;&#12290;
		 */</em>
		firePropertyChange(P_TEXT, null, text);
	}
	<em class="hl-comment" style="color: silver">/*
	 * &#19979;&#38754;&#26102;&#37325;&#36733; IPropertySource &#25509;&#21475;&#30340;&#26041;&#27861;
	 * &#20854;&#23454; Property View &#20013;&#29992; TableView&#26469;&#26174;&#31034;&#23646;&#24615;&#12290;&#31532;&#19968;&#21015;&#26159;&#23646;&#24615;&#21517;&#31216;&#65292;&#31532; 2 &#21015;&#26159;&#23646;&#24615;&#20540;&#12290;
	 * IPropertyDescriptor[]&#25968;&#32452;&#39038;&#21517;&#24605;&#20041;&#23601;&#26159;&#29992;&#26469;&#35774;&#32622;&#23646;&#24615;&#21517;&#31216;&#30340;&#12290;&#36825;&#37324;&#25105;&#20204;&#21482;&#25552;&#20379;&#20102;&#19968;&#20010;&#23646;&#24615;&#65292; &#24182;&#21629;&#21517;&#20026; Greeting
	 */</em>
	<strong class="hl-keyword">public</strong> IPropertyDescriptor[] getPropertyDescriptors() {
		IPropertyDescriptor[] descriptors = <strong class="hl-keyword">new</strong> IPropertyDescriptor[] { <strong class="hl-keyword">new</strong> TextPropertyDescriptor(
				P_TEXT, <strong class="hl-string"><em style="color:red">"Greeting"</em></strong>) };
		<strong class="hl-keyword">return</strong> descriptors;

	}

	<em class="hl-comment" style="color: silver">// &#20351;&#29992;&#23646;&#24615;&#30340; ID &#26469;&#33719;&#24471;&#35813;&#23646;&#24615;&#22312;&#23646;&#24615;&#35270;&#22270;&#30340;&#20540;</em>
	<strong class="hl-keyword">public</strong> Object getPropertyValue(Object id) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT)) {
			<em class="hl-comment" style="color: silver">// &#36825;&#37324;&#33719;&#24471; Property view &#20013;&#25991;&#26412;&#23646;&#24615;&#30340;&#20540;</em>
			<strong class="hl-keyword">return</strong> text;
		}
		<strong class="hl-keyword">return</strong> null;
	}

	<em class="hl-comment" style="color: silver">// &#21028;&#26029;&#23646;&#24615;&#35270;&#22270;&#20013;&#30340;&#23646;&#24615;&#20540;&#26159;&#21542;&#25913;&#21464;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#30340;&#23646;&#24615;&#21017;&#36820;&#22238; false</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">boolean</strong> isPropertySet(Object id) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT))
			<strong class="hl-keyword">return</strong> true;
		<strong class="hl-keyword">else</strong>
			<strong class="hl-keyword">return</strong> false;
	}

	<em class="hl-comment" style="color: silver">// &#35774;&#32622;&#25351;&#23450; Id &#30340;&#23646;&#24615;&#20540;&#12290;&#22914;&#26524;&#35813;&#23646;&#24615;&#19981;&#33021;&#25913;&#21464;&#25110;&#32773;&#27809;&#26377;&#36825;&#20010;&#23646;&#24615;&#65292;&#21017;&#19981;&#20316;&#20219;&#20309;&#20107;</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setPropertyValue(Object id, Object value) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT)) {
			<em class="hl-comment" style="color: silver">// &#25913;&#21464;&#25991;&#26412;&#26102;&#35774;&#32622;&#25991;&#26412;&#30340;&#23646;&#24615;&#20540;</em>
			setText((String) value);
		}
	}           
    ..........
}        
    </pre><p>&#22240;&#20026;&#25105;&#20204;&#36824;&#27809;&#25226;&#23646;&#24615;&#35270;&#22270;&#21644; HelloEditorPart &#32852;&#31995;&#36215;&#26469;&#65292;&#22240;&#27492;&#23601;&#31639;&#20320;&#22312;&#23646;&#24615;
        &#35270;&#22270;&#20462;&#25913;&#20102;&#22270;&#24418;&#30340;&#23646;&#24615;&#65292;&#22312; Graphical Editor &#20013;&#30340;&#22270;&#24418;&#20063;&#19981;&#20250;&#21457;&#29983;&#25913;&#21464;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;
        &#35201;&#20462;&#25913; HelloEditorPart &#26469;&#25509;&#21463;&#25991;&#26412;&#23646;&#24615;&#25913;&#21464;&#30340;&#36890;&#30693;&#12290; </p><pre class="programlisting">
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart  <strong class="hl-keyword">extends</strong> EditPartWithListener{
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) {
		<strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.PROP_CONSTRAINT))
			refreshVisuals();
		 <strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.P_TEXT)) { 
	          <em class="hl-comment" style="color: silver">// &#24403;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;&#23646;&#24615;&#25913;&#21464;&#26102;&#65292;&#22312;Graphical Editor&#20013;&#30340;&#22270;&#24418;&#25991;&#26412;&#20063;&#25913;&#21464; </em>
	          Label label = (Label) getFigure(); 
	          label.setText((String) evt.getNewValue()); 
	      } 
	}
    .......

}        
    </pre><p>&#36825;&#26102;&#20505;&#22914;&#26524;&#20320;&#36816;&#34892;&#31243;&#24207;&#65292; &#36824;&#26159;&#30475;&#19981;&#21040;Property View&#65292; &#36825;&#26159;&#22240;&#20026;&#20320;&#36824;&#35201;&#22312;Perspective
    &#20013;&#21152;&#19978; Property View&#12290; </p><pre class="programlisting"><strong class="hl-keyword">package</strong> gef.tutorial.step;

<strong class="hl-keyword">import</strong> org.eclipse.ui.IFolderLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPageLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPerspectiveFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> Perspective <strong class="hl-keyword">implements</strong> IPerspectiveFactory {

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> createInitialLayout(IPageLayout layout) {
		<strong class="hl-keyword">final</strong> String properties = <strong class="hl-string"><em style="color:red">"org.eclipse.ui.views.PropertySheet"</em></strong>;
		<strong class="hl-keyword">final</strong> String editorArea = layout.getEditorArea();
		IFolderLayout leftTopFolder = layout.createFolder(<strong class="hl-string"><em style="color:red">"LeftTop"</em></strong>,
				IPageLayout.LEFT, <span class="hl-number">0.34f</span>, editorArea);
		leftTopFolder.addView(properties);
		layout.setEditorAreaVisible(true);
	}
}
        
    </pre><p>  &#22909;&#20102;&#65292;&#36816;&#34892;&#19968;&#19979;&#31243;&#24207;&#65292;&#22312; Property View&#20013;&#20462;&#25913;&#25991;&#26412;&#30340;&#20540;&#65292;&#28982;&#21518;&#22238;&#36710;&#23601;&#21487;&#20197;&#30475;&#21040;&#22270;&#24418;&#30340;
    &#25991;&#26412;&#20063;&#21457;&#29983;&#20102;&#25913;&#21464;&#12290;</p><div class="mediaobject"><img src="../../images/step9/step9-1.jpg"></div></div><div class="section" title="&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1083"></a>&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </h2></div></div></div><p> 
        &#21069;&#38754;&#30340;&#26041;&#27861;&#25913;&#21464;&#22270;&#24418;&#25991;&#26412;&#35980;&#20284;&#24456;&#22909;&#20102;&#65292;&#20294;&#26159;&#22914;&#26524;&#33021;&#30452;&#25509;&#22312; Graphical editor &#20013;&#20462;&#25913;&#25991;
        &#26412;&#23682;&#19981;&#26159;&#26356; kool&#12290;&#36825;&#19981;&#23601;&#26159;&#25152;&#35859;&#30340;&#8220;&#25152;&#35265;&#21363;&#25152;&#24471;&#8221;&#39532;&#65311;&#19979;&#38754;&#25105;&#20204;&#23601;&#20171;&#32461;&#20004;&#31181;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;
        &#24471;&#26041;&#27861;&#65306;&#40736;&#26631;&#21333;&#20987;&#36873;&#20013;&#22270;&#24418;&#21518;&#20877;&#21333;&#20987;&#40736;&#26631;&#65307;&#25110;&#32773;&#36873;&#20013;&#22270;&#24418;&#21518;&#25353; F2&#12290; 
        &#30452;&#25509;&#25991;&#26412;&#32534;&#36753;&#26159;&#36890;&#36807; REQ_DIRECT_EDIT &#31867;&#22411;&#30340; Request &#23454;&#29616;&#30340;&#65292;&#28982;&#21518; GEF &#38656;&#35201;&#30456;
        &#24212;&#30340; Command &#26469;&#25191;&#34892;&#23545;&#22270;&#24418;&#27169;&#22411;&#30340;&#30452;&#25509;&#32534;&#36753;&#12290;&#34429;&#28982;&#21644;&#21069;&#38754;&#35762;&#30340;&#26041;&#27861;&#19968;&#26679;&#65292;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;&#20063;
        &#26159;&#35201;&#22312;&#19968;&#20010;&#32534;&#36753;Policy&#31867;&#20013;&#25191;&#34892;Command&#65292; &#20294;&#26159;&#25152;&#19981;&#21516;&#30340;&#26159;&#65292; &#22312;&#21019;&#24314;&#32534;&#36753;Policy&#21644;Command
        &#20043;&#21069;&#65292; &#39318;&#20808;&#38656;&#35201;&#21019;&#24314; org.eclipse.gef.tools.DirectEditManager &#26469;&#25191;&#34892;&#23545;&#22270;&#24418;&#25991;&#26412;&#30340;&#30452;&#25509;&#32534;&#36753;&#12290;
        DirectEditManager &#25152;&#36215;&#30340;&#20316;&#29992;&#26159;&#25351;&#23450; Cell Editor&#21644;&#35774;&#32622; cell editor&#30340;&#20301;&#32622;&#12290; </p><div class="section" title="&#21019;&#24314; DirectEditManager"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1090"></a>&#21019;&#24314; DirectEditManager </h3></div></div></div><p>  &#39318;&#20808;&#65292;DirectEditManager&#26159;&#19968;&#20010;&#25277;&#35937;&#31867;&#65292;&#22240;&#27492;&#25105;&#20204;&#35201;&#27966;&#29983;&#33258;&#24049;&#30340;&#23454;&#38469;&#23376;&#31867;&#12290;&#19979;&#38754;&#25105;&#20204;
    &#32447;&#20171;&#32461;&#19968;&#19979; DirectEditManager &#30340;&#26500;&#36896;&#20989;&#25968;&#30340;&#21442;&#25968;&#12290; </p><p>public DirectEditManager(GraphicalEditPart source, Class editorType, CellEditorLocator locator) </p><p>&#36825;&#37324;&#65292; source&#23545;&#24212;&#19982;&#38656;&#32534;&#36753;&#27169;&#22411;&#30340; Editpart&#12290; editorType &#25351;&#23450;&#20102;&#29992;&#20110;&#32534;&#36753;&#27169;&#22411;&#23646;&#24615;&#30340; cell 
        editor&#30340;&#31867;&#22411;&#12290;&#36825;&#37324;&#30340; cell editor &#26159;&#20174; org.eclipse.jface.viewers.CellEditor&#27966;&#29983;&#30340;&#12290;&#32780;&#31649;&#29702; cell 
        editor&#25152;&#22788;&#20026;&#27490;&#30340;&#31867;&#30001;locator&#25351;&#23450;&#65292; &#36825;&#20010;locator&#35201;&#23454;&#29616;org.eclipse.gef.tools.CellEditorLocator
        &#25509;&#21475;&#12290; </p><p>&#19979;&#38754;&#65292; &#22312;package  gef.tutorial.step.parts;&#21253;&#20013;&#21019;&#24314;&#19968;&#20010;DirectEditManager
    &#30340;&#27966;&#29983;&#31867; CustomDirectEditManager&#12290;&#36825;&#37324;&#25226; cell editor &#35774;&#32622;&#20026; Text &#25511;&#20214;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.tools.CellEditorLocator;
<strong class="hl-keyword">import</strong> org.eclipse.gef.tools.DirectEditManager;
<strong class="hl-keyword">import</strong> org.eclipse.swt.widgets.Text;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomDirectEditManager <strong class="hl-keyword">extends</strong> DirectEditManager {

	<strong class="hl-keyword">private</strong> HelloModel helloModel; <em class="hl-comment" style="color: silver">// &#35201;&#20462;&#25913;&#35813;&#27169;&#22411;&#30340;&#25991;&#26412;&#23646;&#24615;</em>

	<strong class="hl-keyword">public</strong> CustomDirectEditManager(GraphicalEditPart source, Class editorType,
			CellEditorLocator locator) {
		<strong class="hl-keyword">super</strong>(source, editorType, locator);
		<em class="hl-comment" style="color: silver">// &#33719;&#24471; HelloModel &#27169;&#22411;</em>
		helloModel = (HelloModel) source.getModel();
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initCellEditor() {
		<em class="hl-comment" style="color: silver">// &#22312;&#26174;&#31034;&#19968;&#20010; cell editor &#20043;&#21069;&#65292;&#20808;&#32473;&#23427;&#35774;&#32622;&#19968;&#20010;&#20540;</em>
		<em class="hl-comment" style="color: silver">// &#36825;&#37324;&#30340;&#20540;&#26159;&#33719;&#24471;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;</em>
		getCellEditor().setValue(helloModel.getText());
		<em class="hl-comment" style="color: silver">// &#22312;&#25152;&#36873;&#20013;&#30340; TextCellEditor &#30340; Text &#25511;&#20214;&#20013;&#30340;&#25152;&#26377;&#25991;&#26412;&#37117;&#26174;&#31034;&#20026;&#36873;&#25321;&#29366;&#24577;</em>
		Text text = (Text) getCellEditor().getControl();
		text.selectAll();
	}

}

    </pre></div></div></div></div></div></div><div class="book" title="DocBook"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1106"></a>DocBook</h1></div><div><div class="author"><h3 class="author">myking</h3><code class="email">&lt;<a class="email" href="mailto:myking520@gmail.com">myking520@gmail.com</a>&gt;</code></div></div><div><p class="copyright">Copyright &copy; 2012 myking persional</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="article"><a href="#docBook-introduction">&#31616;&#20171;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1128">&#36935;&#21040;&#30340;&#38382;&#39064;</a></span></dt><dt><span class="section"><a href="#d0e1147">&#20248;&#28857;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e1186">&#31616;&#21333;&#20837;&#38376;</a></span></dt><dd><dl><dt><span class="section"><a href="#docbook-setup">&#23433;&#35013;docbook</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1196">&#19979;&#36733;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e1202">&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;</a></span></dt><dt><span class="section"><a href="#d0e1235">&#32467;&#26500;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1294">DocBook&#20351;&#29992;XIncludes&#25351;&#23450;&#22270;&#20687;&#36335;&#24452;&#30340;&#26041;&#27861; </a></span></dt><dt><span class="section"><a href="#d0e1376">&#20998;&#23376;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1415">&#22359;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1728">&#34892;&#20869;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1941">&#29305;&#27530;&#23383;&#31526;</a></span></dt><dt><span class="section"><a href="#d0e1947">&#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e1994">Callout &#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e2031">&#34920;&#26684;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2050">&#34920;&#26684;&#23454;&#20363;</a></span></dt><dt><span class="section"><a href="#d0e2134">&#36328;&#34892;&#34920;&#26684;</a></span></dt><dt><span class="section"><a href="#d0e2212">&#36328;&#21015;&#34920;&#26684;</a></span></dt></dl></dd></dl></dd></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>1. <a href="#d0e1251"></a></dt><dt>2. <a href="#d0e1382"></a></dt></dl></div><div class="article" title="&#31616;&#20171;"><div class="titlepage"><div><div><h1 class="title"><a name="docBook-introduction"></a>&#31616;&#20171;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e1128">&#36935;&#21040;&#30340;&#38382;&#39064;</a></span></dt><dt><span class="section"><a href="#d0e1147">&#20248;&#28857;</a></span></dt></dl></div><p>
        DocBook &#26159;&#19968;&#31181;&#27169;&#24335;&#65288;&#22312;&#22810;&#31181;&#35821;&#35328;&#19979;&#21487;&#29992;&#65292;&#21253;&#25324;RELAX NG&#12289;SGML &#21644; XML DTDs &#65292;&#20197;&#21450; W3C XML &#27169;&#24335;&#65289;&#65292;&#23427;&#30001;OASIS &#30340;DocBook &#25216;&#26415;&#22996;&#21592;&#20250;&#32500;&#25252;&#12290;&#23427;&#38750;&#24120;&#36866;&#21512;&#20110;&#20851;&#20110;&#35745;&#31639;&#26426;&#30828;&#20214;&#21644;&#36719;&#20214;&#30340;&#20070;&#31821;&#21644;&#35770;&#25991;&#65288;&#34429;&#28982;&#23427;&#32477;&#19981;&#38480;&#20110;&#36825;&#20123;&#24212;&#29992;&#65289;&#12290;
        &#12288;&#12288;&#22240;&#20026;&#23427;&#26159;&#19968;&#20010;&#22823;&#32780;&#24378;&#22766;&#30340;&#27169;&#24335;&#65292;&#22240;&#20026;&#23427;&#30340;&#20027;&#35201;&#32467;&#26500;&#31526;&#21512;&#19968;&#33324;&#27010;&#24565;&#25152;&#26500;&#25104;&#30340;"&#20070;"&#65292;DocBook &#24050;&#34987;&#19968;&#20010;&#24222;&#22823;&#32780;&#19988;&#36824;&#22312;&#25104;&#38271;&#20013;&#30340;&#20316;&#32773;&#32676;&#29992;&#20110;&#25152;&#26377;&#31181;&#31867;&#20070;&#31821;&#30340;&#32534;&#20889;&#12290;DocBook &#30001;&#19968;&#31995;&#21015;&#21830;&#19994;&#24037;&#20855;&#25903;&#25345;"out of box"&#65292;&#24182;&#19988;&#22823;&#37327;&#33258;&#30001;&#36719;&#20214;&#29615;&#22659;&#20063;&#22312;&#36805;&#36895;&#25193;&#22823;&#23545;&#23427;&#30340;&#25903;&#25345;&#12290;&#36825;&#20123;&#29305;&#24615;&#32467;&#21512;&#36215;&#26469;&#20351;&#24471; DocBook &#25104;&#20026;&#19968;&#31181;&#26131;&#20110;&#29702;&#35299;&#12289;&#24191;&#27867;&#24212;&#29992;&#21644;&#38750;&#24120;&#21463;&#27426;&#36814;&#30340;&#27169;&#24335;&#12290;&#20840;&#19990;&#30028;&#26377;&#35768;&#22810;&#32452;&#32455;&#23558; DocBook &#29992;&#20110;&#25968;&#30334;&#19975;&#39029;&#30340;&#25991;&#26723;&#65292;&#36825;&#20123;&#25991;&#26723;&#26377;&#19981;&#21516;&#30340;&#25171;&#21360;&#21644;&#22312;&#32447;&#26684;&#24335;&#12290;
        &#12288;&#12288;SGML vs. XML
        &#12288;&#12288;DocBook &#22996;&#21592;&#20250;&#32500;&#25252; DocBook DTD &#30340;SGML &#21644; XML &#29256;&#26412;&#21644;&#20854;&#20182;&#35821;&#35328;&#30340;XML &#29256;&#26412;&#12290;&#36825;&#22312;&#19968;&#23450;&#31243;&#24230;&#19978;&#26159;&#21487;&#34892;&#30340;&#65292;&#36825;&#20123;DTD &#20063;&#26159;&#19968;&#33268;&#30340;&#12290;&#36825;&#20123;DTD &#20013;&#27809;&#26377;&#25925;&#24847;&#30340;&#19981;&#21516;&#65292;&#23427;&#20204;&#20551;&#23450;&#25509;&#21463;&#19968;&#26679;&#30340;&#25991;&#26723;&#38598;&#12290; 
    </p><div class="section" title="&#36935;&#21040;&#30340;&#38382;&#39064;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1128"></a>&#36935;&#21040;&#30340;&#38382;&#39064;</h2></div></div></div><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#20869;&#23481;&#19982;&#26684;&#24335;&#20998;&#31163;.&#20889;&#25991;&#26723;&#30340;&#26102;&#20505;&#65292;&#19981;&#24471;&#19981;&#20860;&#39038;&#25991;&#26723;&#30340;&#26684;&#24335;&#65292;&#36825;&#26159;&#20214;&#24456;&#22836;&#30171;&#30340;&#20107;&#24773;,&#32463;&#24120;&#26159;&#26368;&#21518;&#19981;&#24471;&#19981;Review&#22909;&#20960;&#36941;&#65292;&#23601;&#26159;&#20026;&#20102;&#32479;&#19968;&#26684;&#24335;&#65292;&#21363;&#20351;&#20351;&#29992;&#27169;&#26495;&#20063;&#19981;&#33021;&#36991;&#20813;&#36825;&#20010;&#38382;&#39064;&#12290;</p></li><li class="listitem"><p>&#26080;&#27861;&#36827;&#34892;&#26377;&#25928;&#30340;&#29256;&#26412;&#25511;&#21046;&#65292;&#22240;&#20026;Word&#20445;&#23384;&#30340;&#26159;&#20108;&#36827;&#21046;&#26684;&#24335;&#65292;&#36825;&#23601;&#19981;&#33021;&#20351;&#29992;CVS&#30340;&#29256;&#26412;&#25511;&#21046;&#21151;&#33021;&#65292;&#21482;&#33021;&#25163;&#24037;&#21512;&#24182;&#65292;&#36825;&#26679;&#24456;&#23481;&#26131;&#20986;&#38169;&#12290;&#34429;&#28982;Word&#29616;&#22312;&#20063;&#21487;&#20197;&#20445;&#23384;&#25104;XML&#65292;&#20294;&#26159;&#30475;&#19968;&#19979;&#20445;&#23384;&#30340;&#25991;&#20214;&#23601;&#20250;&#21457;&#29616;&#65292;&#26684;&#24335;&#21644;&#20869;&#23481;&#28151;&#26434;&#22312;&#19968;&#36215;&#65292;&#31616;&#30452;&#27809;&#27861;&#30475;&#12290;&#20917;&#19988;&#65292;&#29256;&#26412;&#25511;&#21046;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#27880;&#37325;&#30340;&#24448;&#24448;&#26159;&#20869;&#23481;&#65292;&#29616;&#22312;&#21364;&#19981;&#24471;&#19981;&#22788;&#29702;&#22823;&#37327;&#30340;&#26684;&#24335;&#20449;&#24687;.</p></li><li class="listitem"><p>&#21487;&#31227;&#26893;&#24615;&#38382;&#39064;&#65292;&#27605;&#31455;Word&#21482;&#33021;&#36816;&#34892;&#22312;Windows&#24179;&#21488;&#19978;&#65292;&#21363;&#20351;&#21487;&#20197;&#20445;&#23384;&#20026;XML&#25110;&#32773;HTML&#65292;&#22312;&#20854;&#20182;&#24179;&#21488;&#19978;&#24456;&#38590;&#20462;&#25913;</p></li><li class="listitem"><p>&#29992;&#30423;&#29256;&#36824;&#26159;&#27491;&#29256;&#30340;&#38382;&#39064;</p></li></ul></div><p>
        </p></div><div class="section" title="&#20248;&#28857;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1147"></a>&#20248;&#28857;</h2></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#20869;&#23481;&#19982;&#26684;&#24335;&#20998;&#31163;</p><p>&#20320;&#21482;&#38656;&#35201;&#19987;&#27880;&#20110;&#25991;&#26723;&#30340;&#20869;&#23481;&#12290;&#25991;&#31456;&#30340;&#20869;&#23481;&#21644;&#26684;&#24335;&#26159;&#20998;&#31163;&#30340;&#12290;Docbook&#23450;&#20041;&#20102;&#35832;&#22914;&#31456;&#33410;(chapter)&#12289;&#27573;&#33853;(para)&#12289;&#34920;&#26684;(table)&#36825;&#20123;&#25991;&#26723;&#20803;&#32032;&#65292;&#20294;&#22914;&#20309;&#26174;&#31034;&#36825;&#20123;&#20803;&#32032;&#65292;&#21017;&#30001;&#26679;&#24335;&#34920;(XSL)&#26469;&#25511;&#21046;&#65292;&#20320;&#19981;&#24517;&#22312;&#25991;&#26723;&#20013;&#23884;&#20837;&#25490;&#29256;&#20449;&#24687;&#12290;
                        
                        &#36825;&#20063;&#24847;&#21619;&#30528;&#65292;&#20320;&#19981;&#33021;&#29992;&#8221;&#25152;&#35265;&#21363;&#25152;&#24471;&#8221;&#30340;&#26041;&#24335;&#26469;&#32534;&#36753;&#20320;&#30340;&#25991;&#26723;&#20102;&#12290;&#19981;&#36807;&#65292;&#20320;&#24456;&#24555;&#23601;&#20250;&#21916;&#27426;&#19978;&#20869;&#23481;&#21644;&#26684;&#24335;&#20998;&#31163;&#30340;&#65292;&#22240;&#20026;&#36825;&#19981;&#20165;&#33410;&#30465;&#20102;&#25490;&#29256;&#30340;&#26102;&#38388;&#12289;&#20063;&#20351;&#25991;&#26723;&#26679;&#24335;&#26356;&#20026;&#32479;&#19968;&#12290;&#21478;&#22806;&#65292;&#20351;&#29992;&#31243;&#24207;&#33258;&#21160;&#22788;&#29702;&#25991;&#26723;&#20063;&#21464;&#24471;&#26356;&#21152;&#23481;&#26131;&#20102;&#12290; </p></li><li class="listitem"><p>
                        &#22810;&#31181;&#25991;&#20214;&#26684;&#24335;&#36755;&#20986;
                    </p><p>&#21482;&#38656;&#35201;&#20070;&#20889;&#25991;&#26723;&#19968;&#27425;&#65292;&#23601;&#33021;&#22815;&#20197;&#22810;&#31181;&#25991;&#20214;&#26684;&#24335;&#36755;&#20986;&#12290;&#26377;&#24456;&#22810;&#20813;&#36153;&#30340;&#24037;&#20855;&#21487;&#20197;&#23558;Docbook&#25991;&#26723;&#36716;&#25442;&#25104;HTML&#12289;PDF&#65292;&#20197;&#21450;&#20854;&#23427;&#21508;&#31181;&#25991;&#20214;&#26684;&#24335;&#12290; </p></li><li class="listitem"><p>&#20415;&#20110;&#29256;&#26412;&#31649;&#29702;</p><p>
                        Docbook&#30340;&#25991;&#26723;&#28304;&#25991;&#20214;&#26159;&#25991;&#26412;&#25991;&#20214;&#65292;&#22240;&#27492;&#21487;&#20197;&#26041;&#20415;&#30340;&#20351;&#29992;cvs, subversion, git&#31561;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;&#36827;&#34892;&#29256;&#26412;&#31649;&#29702;&#12290; 
                    </p></li><li class="listitem"><p>&#26041;&#20415;&#38405;&#35835;</p><p>&#21482;&#35201;&#20351;&#29992;&#19968;&#20010;&#20877;&#26222;&#36890;&#19981;&#36807;&#30340;&#25991;&#26412;&#32534;&#36753;&#22120;&#65292;&#23601;&#21487;&#20197;&#38405;&#35835;&#12289;&#32534;&#36753;Docbook&#30340;&#25991;&#26723;&#65292;&#22240;&#20026;&#23427;&#21482;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;&#25991;&#26412;&#25991;&#20214;</p></li><li class="listitem"><p>&#22810;&#24179;&#21488;&#25903;&#25345;</p><p>Docbook&#26159;&#25991;&#26412;&#25991;&#26723;&#65292;&#22240;&#27492;&#65292;&#26080;&#35770;&#20320;&#26159;&#22312;windows&#19979;&#36824;&#26159;Linux&#19979;&#65292;&#37117;&#21487;&#20197;&#38405;&#35835;&#12289;&#20070;&#20889;&#25991;&#26723;&#12290;&#32780;Docbook&#30340;&#36716;&#25442;&#24037;&#20855;&#22823;&#22810;&#30001;Java&#32534;&#20889;&#65292;&#20063;&#25903;&#25345;&#36328;&#24179;&#21488;&#36816;&#34892;&#12290;&#36825;&#26679;&#19968;&#26469;&#65292;&#20320;&#21487;&#20197;&#22312;&#22810;&#31181;&#25805;&#20316;&#31995;&#32479;&#24179;&#21488;&#19979;&#20351;&#29992;&#32479;&#19968;&#30340;&#26041;&#24335;&#26469;&#31649;&#29702;&#20320;&#30340;&#25991;&#26723;&#20102;&#12290; </p></li><li class="listitem"><p>&#22810;&#35821;&#35328;&#25903;&#25345;</p><p>Docbook&#20351;&#29992;UTF-8&#23383;&#31526;&#38598;&#65292;&#22240;&#27492;&#65292;&#22312;&#25991;&#26723;&#20013;&#21487;&#20197;&#20351;&#29992;&#22810;&#22269;&#35821;&#35328;&#30340;&#23383;&#31526;&#38598;&#12290;&#36825;&#23545;&#22269;&#38469;&#21270;&#21512;&#20316;&#30340;&#39033;&#30446;&#26469;&#35828;&#24456;&#37325;&#35201;&#12290; </p></li></ul></div><p>
        </p></div></div><div class="article" title="&#31616;&#21333;&#20837;&#38376;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1186"></a>&#31616;&#21333;&#20837;&#38376;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#docbook-setup">&#23433;&#35013;docbook</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1196">&#19979;&#36733;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e1202">&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;</a></span></dt><dt><span class="section"><a href="#d0e1235">&#32467;&#26500;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1294">DocBook&#20351;&#29992;XIncludes&#25351;&#23450;&#22270;&#20687;&#36335;&#24452;&#30340;&#26041;&#27861; </a></span></dt><dt><span class="section"><a href="#d0e1376">&#20998;&#23376;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1415">&#22359;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1728">&#34892;&#20869;&#20803;&#32032;</a></span></dt><dt><span class="section"><a href="#d0e1941">&#29305;&#27530;&#23383;&#31526;</a></span></dt><dt><span class="section"><a href="#d0e1947">&#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e1994">Callout &#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e2031">&#34920;&#26684;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2050">&#34920;&#26684;&#23454;&#20363;</a></span></dt><dt><span class="section"><a href="#d0e2134">&#36328;&#34892;&#34920;&#26684;</a></span></dt><dt><span class="section"><a href="#d0e2212">&#36328;&#21015;&#34920;&#26684;</a></span></dt></dl></dd></dl></div><div class="section" title="&#23433;&#35013;docbook"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docbook-setup"></a>&#23433;&#35013;docbook</h2></div></div></div><div class="section" title="&#19979;&#36733;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1196"></a>&#19979;&#36733;</h3></div></div></div><p></p></div></div><div class="section" title="&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1202"></a>&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;</h2></div></div></div><p>&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#25991;&#26723;</p><pre class="screen"> &lt;?xml version='1.0' encoding="UTF-8"?&gt;
&lt; xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"&gt; 
&lt;article&gt;<a name="article"></a><img src="images/callouts/1.png" alt="1" border="0">
  &lt;info&gt;<a name="info"></a><img src="images/callouts/2.png" alt="2" border="0">
    &lt;title&gt;&#25991;&#31456;&lt;/title&gt; <a name="title"></a><img src="images/callouts/3.png" alt="3" border="0">
    &lt;author&gt;&#20316;&#32773;&lt;/author&gt;<a name="author"></a><img src="images/callouts/4.png" alt="4" border="0">
    &lt;address&gt;&#22320;&#22336;&lt;/address&gt;<a name="address"></a><img src="images/callouts/5.png" alt="5" border="0">
    &lt;copyright&gt;<a name="copyright"></a><img src="images/callouts/6.png" alt="6" border="0">&lt;year&gt;<a name="year"></a><img src="images/callouts/7.png" alt="7" border="0">2008&lt;/year&gt;&lt;holder&gt;&#25152;&#26377;&#32773;&lt;/holder&gt;<a name="holder"></a><img src="images/callouts/8.png" alt="8" border="0">&lt;/copyright&gt;
  &lt;/info&gt;
  &lt;sect1&gt;
    &lt;title&gt;&#26631;&#39064;&lt;/title&gt;
    &lt;para&gt;
      &#20869;&#23481;
    &lt;/para&gt;
  &lt;/sect1&gt;
&lt;/article&gt;  
    </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#article"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>&#25991;&#26723;&#30340;&#26681;&#20803;&#32032;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#info"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>&#25991;&#26723;&#20449;&#24687;</p></td></tr></table></div></div><div class="section" title="&#32467;&#26500;&#20803;&#32032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1235"></a>&#32467;&#26500;&#20803;&#32032;</h2></div></div></div><p>
       DocBook &#20013;&#30340;&#19968;&#20123;&#20803;&#32032;&#65292;&#22312;&#21457;&#24067;&#30340;&#26102;&#20505;&#20250;&#20316;&#20026;&#26465;&#30446;&#34987;&#25910;&#36827;&#30446;&#24405;&#12290;&#23427;&#20204;&#34920;&#31034;&#30340;&#26159;&#25991;&#26723;&#20869;&#37096;&#30340;&#32467;&#26500;&#65292;&#25152;&#20197;&#23427;&#20204;&#26159;&#32467;&#26500;&#20803;&#32032;,&#22914;&#19979;&#65306;
   </p><pre class="screen">
  &lt;set&gt;
  &lt;book&gt;
    &lt;part&gt;
      &lt;chapter&gt;
        &lt;sect1&gt;
          &lt;sect2&gt;
	    &#8230;&#8230;&#8230;&#8230;
          &lt;/sect2&gt;
        &lt;/sect1&gt;
      &lt;/chapter&gt; 
    &lt;/part&gt;  
  &lt;/book&gt;  
&lt;/set&gt;           
        
    </pre><p>
        &#22914;&#26524; DocBook &#30340;&#26681;&#20803;&#32032;&#26159;article&#65292;&#37027;&#20040;&#21487;&#20197;&#20801;&#35768;&#36825;&#31181;&#32467;&#26500;&#65306;
    </p><pre class="screen">
  &lt;article&gt;
  &lt;sect1&gt;
    &lt;sect2&gt;
	    &#8230;&#8230;&#8230;&#8230;
    &lt;/sect2&gt;
  &lt;/sect1&gt;
&lt;/article&gt;            
        
    </pre><p>&#32467;&#26500;&#20803;&#32032;&#21487;&#20197;&#25317;&#26377;&#26631;&#39064;&#65292;title&#12289;titleabbrev&#12289;subtitle&#20219;&#36873;&#19968;&#20010;&#65292;&#36824;&#21487;&#20197;&#25317;&#26377;info</p><p>&#20197;&#19979;&#26159;&#24120;&#29992;&#30340;&#32467;&#26500;&#20803;&#32032;
    </p><div class="table"><a name="d0e1251"></a><p class="title"><b>Table&nbsp;1.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>&#20803;&#32032;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>set</td><td>&#38598;</td></tr><tr><td>book</td><td>&#20070;</td></tr><tr><td>part</td><td>&#37096;</td></tr><tr><td>chapter</td><td>&#31456;</td></tr><tr><td>article</td><td>&#25991;&#31456;</td></tr><tr><td>sections</td><td>&#33410;</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="DocBook&#20351;&#29992;XIncludes&#25351;&#23450;&#22270;&#20687;&#36335;&#24452;&#30340;&#26041;&#27861;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1294"></a>DocBook&#20351;&#29992;XIncludes&#25351;&#23450;&#22270;&#20687;&#36335;&#24452;&#30340;&#26041;&#27861; </h2></div></div></div><pre class="screen">    &lt; book &nbsp;&#8230;&nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;&nbsp;xml:base="./"&gt;&nbsp;
&nbsp;  ......&nbsp;&nbsp;   
&lt; xi:include &nbsp; href = "chapter_overview.xml" &nbsp; /&gt; &nbsp;&nbsp;    </pre><p>  &#22312;&#20351;&#29992;XIncludes&#23548;&#20837;chapter_overview.xml&#26102;&#65292;XSL&#22788;&#29702;&#22120;&#23558;&#22312;&#35813;&#25991;&#20214;&#30340;&#36335;&#24452;&#21069;&#28155;&#21152;xml.base&#65292;&#22240;&#27492;&#23601;&#25104;&#20026;
        &#8220;./chapter_overview.xml&#8221;&#65292;&#36825;&#34920;&#31034;chapter_overview.xml&#22312;&lt;book&gt;&#20803;&#32032;&#25152;&#22312;&#25991;&#26723;&#30340;&#21516;&#19968;&#30446;&#24405; &#19979;&#12290; </p><p> &#36825;&#26159;XIncludes&#30340;&#22522;&#26412;&#29992;&#27861;&#12290; </p><p> &#20294;&#22312;&#20351;&#29992;XIncludes&#26597;&#25214;&#22270;&#20687;&#26102;&#65292;&#21364;&#38750;&#31616;&#21333;&#12290;&#29983;&#25104;HTML&#25110;PDF&#26102;&#65292;XSL&#26597;&#25214;&#22270;&#20687;&#26102;&#22522;&#20110;&#20197;&#19979;&#26465;&#20214;&#36827;&#34892;&#65306; </p><p>
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#22914;&#26524;&#26159;&#32477;&#23545;&#36335;&#24452;&#65292;&#21017;&#25353;&#32477;&#23545;&#36335;&#24452;&#26469;&#26597;&#25214;&#12290;</p></li><li class="listitem"><p>&#22914;&#26524;&#26159;&#30456;&#23545;&#36335;&#24452;&#65292;&#19988;&#26410;&#20351;&#29992;XIncludes&#65292;&#21017;&#25353;fileref&#25351;&#23450;&#30340;&#36335;&#24452;&#26597;&#25214;&#12290;</p></li><li class="listitem"><p>&#22914;&#26524;&#26159;&#30456;&#23545;&#36335;&#24452;&#65292;&#20294;&#20351;&#29992;XIncludes&#65292;&#19988;keep.relative.image.uris="1"&#65292;&#21017;&#25353;fileref&#25351;&#23450;&#30340;&#36335;&#24452;&#26597;&#25214;&#12290;</p></li><li class="listitem"><p>&#22914;&#26524;&#26159;&#30456;&#23545;&#36335;&#24452;&#65292;&#20294;&#20351;&#29992;XIncludes&#65292;&#19988;keep.relative.image.uris="0"&#65292;&#21017;&#25353;xml:base +
                    fileref&#25351;&#23450;&#30340;&#36335;&#24452;&#26597;&#25214;&#12290;</p></li></ol></div><p>
    </p><p> &#27492;&#22806;&#65292;&#29983;&#25104;HTML&#26102;keep.relative.image.uris&#40664;&#35748;&#20540;&#20026;1;&#32780;&#29983;&#25104;PDF&#26102;keep.relative.image.uris&#40664;&#35748;&#20540;&#20026;0&#12290; </p><p>
        &#22240;&#27492;&#65292;&#24403;&#20351;&#29992;&#20102;XIncludes&#21518;&#65292;&#35774;&#26377;&#19968;&#20010;&#21517;&#20026;test.xml&#30340;&#25991;&#20214;&#65288;&#34987;&#19978;&#36848;&lt;book&gt;&#25152;&#22312;&#25991;&#26723;&#36890;&#36807;XIncludes&#21253;&#21547;&#65289;&#36890;&#36807;fileref&#25351;&#23450;&#20102;&#19968;&#20010;&#30456;&#23545;&#30340;&#22270;&#20687;&#36335;&#24452;&#65306; </p><pre class="screen">    &lt; imagedata &nbsp; fileref = "images/custom/test.jpg" &nbsp; /&gt; &nbsp;&nbsp;    </pre><p>&#22312;&#29983;&#25104;HTML&#26102;&#65292;keep.relative.image.uris&#40664;&#35748;&#20540;&#20026;1&#65292;&#31526;&#21512;&#31532;3&#31181;&#24773;&#20917;&#65292;&#21017;&#30452;&#25509;&#25353;fileref&#25351;&#23450;&#30340;&#36335;&#24452;"images/custom/test.jpg"&#26469;&#26597;&#25214;&#65292;&#35813;&#36335;&#24452;&#30456;&#23545;&#20110;&#25152;&#29983;&#25104;&#30340;HTML&#25991;&#20214;&#12290;&#22240;&#27492;&#65292;&#21482;&#35201;&#25991;&#20214;&#36335;&#24452;&#31526;&#21512;&#19979;&#21015;&#26465;&#20214;&#65306;</p><p>test.html</p><p> images</p><p> &nbsp; &nbsp; |--&gt; custom</p><p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |--&gt; test.jpg</p><p>&#22270;&#20687;&#23601;&#33021;&#27491;&#24120;&#26174;&#31034;&#12290;</p><p>&#32780;&#22312;&#29983;&#25104;PDF&#26102;&#65292;&#30001;&#20110;keep.relative.image.uris&#40664;&#35748;&#20540;&#20026;0&#65292;&#31526;&#21512;&#31532;4&#31181;&#24773;&#20917;&#65292;&#21017;&#22312;&#35745;&#31639;&#36335;&#24452;&#26102;&#38656;&#28155;&#21152;xml:base&#30340;&#21069;
        &#32512;&#12290;&#20294;xml:base&#20540;&#20026;&#8220;./&#8221;&#65292;&#26159;&#30456;&#23545;&#20110;xml&#25991;&#20214;&#25152;&#22312;&#30340;&#36335;&#24452;&#32780;&#38750;&#30456;&#23545;&#20110;&#25152;&#29983;&#25104;&#30340;PDF&#25991;&#20214;&#25152;&#22312;&#30340;&#36335;&#24452;&#65292;&#22240;&#27492;&#24403;&#25105;&#20204;&#38656;&#35201;&#22312;&#21478;&#22806;&#19968;&#20010;&#30446;&#24405;&#65292;&#22914;
        Dist&#65292;&#20013;&#29983;&#25104;PDF&#26102;&#65292;&#21017;&#23548;&#33268;&#25214;&#19981;&#21040;&#30456;&#24212;&#30340;&#22270;&#20687;&#12290;&#36825;&#23601;&#23548;&#33268;&#20102;&#20351;&#29992;&#21516;&#19968;&#26631;&#31614;</p><pre class="screen">    &lt; imagedata &nbsp; fileref = "images/custom/test.jpg" &nbsp; /&gt; &nbsp;&nbsp;    </pre><p> &#29983;&#25104;HTML&#26102;&#22270;&#20687;&#27491;&#24120;&#65292;&#32780;&#29983;&#25104;PDF&#21364;&#25214;&#19981;&#21040;&#22270;&#20687;&#12290;
    &#35299;&#20915;&#30340;&#26041;&#27861;&#26159;&#22312;&#29983;&#25104;PDF&#30340;XSL&#25991;&#20214;&#20013;&#36890;&#36807;&#25351;&#23450;img.src.path&#30340;&#26041;&#24335;&#65292;&#21487;&#20197;&#35753;&#22788;&#29702;&#22120;&#30456;&#23545;&#20110;&#25152;&#29983;&#25104;&#30340;PDF&#25991;&#20214;&#30340;&#36335;&#24452;&#26469;&#26597;&#25214;&#22270;&#20687;&#12290; </p><pre class="screen">    &lt; xsl:param &nbsp; name = "img.src.path" &gt; Dist/pdf/ &lt;/ xsl:param &gt; &nbsp;&nbsp;    </pre><p>
        &#21152;&#19978;&#19978;&#38754;&#30340;&#37197;&#32622;&#21518;&#65292;fileref&#30340;&#36335;&#24452;&#23601;&#20250;&#21464;&#25104;"Dist/pdf/images/custom/test.jpg",&#19988;&#26159;&#30456;&#23545;&#20110;&#25152;&#29983;&#25104;&#30340;PDF&#25152;&#22312;&#30340;&#36335;&#24452;&#12290;&#22240;&#27492;&#65292;&#21482;&#35201;&#29983;&#25104;&#30340;PDF&#25991;&#20214;&#36335;&#24452;&#31526;&#21512;&#19979;&#21015;&#26465;&#20214;&#65306; </p><pre class="screen"> Dist &nbsp; &nbsp; |--&gt; pdf &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                 |--&gt; test.pdf &nbsp; &nbsp;
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|--&gt; images &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                            &nbsp;|--&gt; custom &nbsp; &nbsp; &nbsp; &nbsp;
                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;|--&gt; test.jpg  </pre><p>&#29983;&#25104;&#30340;PDF&#25991;&#20214;&#23601;&#33021;&#27491;&#30830;&#22320;&#23558;&#22270;&#20687;&#21152;&#36827;&#26469;&#12290; </p><p>&#20877;&#36827;&#19968;&#27493;&#35266;&#23519;HTML&#21450;PDF&#22270;&#20687;&#25152;&#22312;&#30340;&#36335;&#24452;&#65292;&#22343;&#20026;</p><pre class="screen"> images &nbsp; &nbsp;
 |--&gt; custom &nbsp; &nbsp; &nbsp; 
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|--&gt;test.jpg </pre><p>&#22240;&#27492;&#65292;</p><pre class="screen">   &lt; imagedata &nbsp; fileref = "images/custom/test.jpg" &nbsp; /&gt; &nbsp;   </pre><p> &#24635;&#33021;&#31616;&#21270;&#20026;&#65306; </p><pre class="screen">    &lt; imagedata &nbsp; fileref = "test.jpg" &nbsp; /&gt; &nbsp;&nbsp;    </pre><p>&#24403;&#28982;&#65292;&#29983;&#25104;PDF&#30340;XSL&#25991;&#20214;&#38656;&#25913;&#20026;&#65306;</p><pre class="screen">    &lt; xsl:param &nbsp; name = "img.src.path" &gt; Dist/pdf/images/custom/ &lt;/ xsl:param &gt; &nbsp;&nbsp;    </pre><p>&#32780;&#29983;&#25104;HTML&#30340;XSL&#25991;&#20214;&#38656;&#25913;&#20026;&#65306;</p><pre class="screen">    &lt; xsl:param &nbsp; name = "img.src.path" &gt; images/custom/ &lt;/ xsl:param &gt; &nbsp;&nbsp;    </pre><p>&#36825;&#26679;&#65292;&#26082;&#21487;&#20197;&#31616;&#21270;&#20102;&#22270;&#20687;&#25991;&#20214;&#30340;&#24341;&#29992;&#36335;&#24452;&#65292;&#19988;&#21487;&#20197;&#30830;&#20445;&#21516;&#26102;&#36866;&#29992;&#20110;HTML&#21450;PDF&#30340;&#27491;&#30830;&#29983;&#25104;&#12290; </p></div><div class="section" title="&#20998;&#23376;&#20803;&#32032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1376"></a>&#20998;&#23376;&#20803;&#32032;</h2></div></div></div><p> DocBook &#26368;&#22522;&#26412;&#30340;&#20803;&#32032;&#26159; para &#21644;&#22359;&#20803;&#32032;&#65292;&#27604;&#23427;&#20204;&#22823;&#30340;&#26159;&#32467;&#26500;&#20803;&#32032;&#65292;&#27604;&#23427;&#20204;&#23567;&#30340;&#26159;&#34892;&#20869;&#20803;&#32032;&#12290;</p><div class="table"><a name="d0e1382"></a><p class="title"><b>Table&nbsp;2.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>&#20803;&#32032;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td> sect1 </td><td>&#33410;&#65288;1~5&#32423;&#65289;</td></tr><tr><td> section </td><td>&#33410;&#65288;&#26080;&#38480;&#65289;</td></tr><tr><td> para </td><td> &#27573;&#33853; </td></tr><tr><td> formalpara </td><td> &#24102;&#26631;&#39064;&#27573;&#33853; </td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="&#22359;&#20803;&#32032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1415"></a>&#22359;&#20803;&#32032;</h2></div></div></div><p>&#22359;&#20803;&#32032;&#26159;&#21644;<span class="bold"><strong>para</strong></span>&#21516;&#32423;&#30340;&#20803;&#32032;&#65292;&#23427;&#20204;&#27604;&#36739;&#22797;&#26434;&#65292;&#21518;&#38754;&#20250;&#20998;&#21035;&#20171;&#32461;</p><table border="1" id="d0e1424"><colgroup>
                <col>
                <col>
                <col>
            </colgroup><thead><tr>
                    <th>&#31867;&#21035;</th>
                    <th>&#20803;&#32032;</th>
                    <th>&#35828;&#26126;</th>
                </tr></thead><tbody><tr>
                    <td rowspan="8">&#21015;&#34920;</td>
                    <td>calloutlist</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>bibliolist</td>
                    <td>&#20070;&#30446;&#21015;&#34920;</td>
                </tr><tr>
                    <td>glosslist</td>
                    <td>&#35789;&#27719;&#21015;&#34920;</td>
                </tr><tr>
                    <td>itemizedlist</td>
                    <td>&#26080;&#24207;&#21015;&#34920;</td>
                </tr><tr>
                    <td>orderedlist</td>
                    <td>&#26377;&#24207;&#21015;&#34920;</td>
                </tr><tr>
                    <td>segmentedlist</td>
                    <td>&#25104;&#20998;&#21015;&#34920;</td>
                </tr><tr>
                    <td>simplelist</td>
                    <td>&#31616;&#21333;&#21015;&#34920;</td>
                </tr><tr>
                    <td>variablelist</td>
                    <td>&#23450;&#20041;&#21015;&#34920;</td>
                </tr><tr>
                    <td rowspan="5">&#21578;&#31034;</td>
                    <td>caution</td>
                    <td>&#23567;&#24515;</td>
                </tr><tr>
                    <td>important</td>
                    <td>&#37325;&#35201;</td>
                </tr><tr>
                    <td>note</td>
                    <td>&#27880;&#24847;</td>
                </tr><tr>
                    <td>tip</td>
                    <td>&#25552;&#31034;</td>
                </tr><tr>
                    <td>warning</td>
                    <td>&#35686;&#21578;</td>
                </tr><tr>
                    <td rowspan="5">&#25991;&#26412;</td>
                    <td>address</td>
                    <td>&#22320;&#22336;</td>
                </tr><tr>
                    <td>literallayout</td>
                    <td>&#32431;&#25991;&#26412;</td>
                </tr><tr>
                    <td>programlisting</td>
                    <td>&#20195;&#30721;</td>
                </tr><tr>
                    <td>screen</td>
                    <td>&#25991;&#26412;&#25235;&#23631;</td>
                </tr><tr>
                    <td>synopsis</td>
                    <td>&#21629;&#20196;&#12289;&#20989;&#25968;&#32434;&#35201;</td>
                </tr><tr>
                    <td rowspan="6">&#20363;&#23376;&#65292;&#22270;&#29255;&#21644;&#34920;&#26684;</td>
                    <td>example</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>informalexample</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>figure</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>informalfigure</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>table</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td>informaltable</td>
                    <td>&nbsp;</td>
                </tr><tr>
                    <td rowspan="5">&#23186;&#20307;&#25991;&#20214;</td>
                    <td>audioobject</td>
                    <td>&#38899;&#39057;&#23545;&#35937;</td>
                </tr><tr>
                    <td>imageobject</td>
                    <td>&#22270;&#29255;&#23545;&#35937;</td>
                </tr><tr>
                    <td>imageobjectco</td>
                    <td>&#24102; callout &#30340;&#22270;&#29255;&#23545;&#35937;</td>
                </tr><tr>
                    <td>videoobject</td>
                    <td>&#35270;&#39057;&#23545;&#35937;</td>
                </tr><tr>
                    <td>textobject</td>
                    <td>&#25991;&#26412;&#23545;&#35937;</td>
                </tr><tr>
                    <td rowspan="4">&#20854;&#20182;</td>
                    <td>blockquote</td>
                    <td>&#24341;&#29992;</td>
                </tr><tr>
                    <td>epigraph</td>
                    <td>&#39064;&#35760;</td>
                </tr><tr>
                    <td>msgset</td>
                    <td>&#26377;&#20851;&#30340;&#38169;&#35823;&#20449;&#24687;</td>
                </tr><tr>
                    <td>sidebar</td>
                    <td>&#20391;&#36793;&#26639;</td>
                </tr></tbody></table></div><div class="section" title="&#34892;&#20869;&#20803;&#32032;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1728"></a>&#34892;&#20869;&#20803;&#32032;</h2></div></div></div><p></p><p> &#20551;&#22914;&#20320;&#24819;&#29992;&#29305;&#27530;&#30340;&#26684;&#24335;&#34920;&#31034;&#35832;&#22914;&#30701;&#35821;&#12289;&#29992;&#25143;&#36755;&#20837;&#12289;&#21629;&#20196;&#12289;&#36719;&#20214;&#12289;&#25991;&#20214;&#65292;&#23613;&#37327;&#19981;&#35201;&#20351;&#29992; emphasis(&#24378;&#35843;)&#65292;&#23427;&#20204;&#26377;&#19987;&#38376;&#30340;&#20803;&#32032;&#26469;&#34920;&#31034;&#12290;</p><p> &#23613;&#31649;&#20351;&#29992;&#20102;&#36825;&#20123;&#20803;&#32032;&#65292;&#24471;&#21040;&#30340;&#25928;&#26524;&#21487;&#33021;&#21644;&#24378;&#35843;&#19968;&#26679;&#26159;&#31895;&#20307;&#65292;&#32780;&#19988;&#36824;&#35201;&#32771;&#34385;&#20351;&#29992;&#21738;&#31181;&#31867;&#22411;&#65292;&#27604;&#36739;&#40635;&#28902;&#12290; </p><p> &#19981;&#36807;&#31561;&#21040;&#20320;&#24819;&#29992;&#32418;&#33394;&#34920;&#31034;&#21629;&#20196;&#12289;&#32511;&#33394;&#34920;&#31034;&#25991;&#20214;&#8230;&#8230;&#65292;&#36825;&#20010;&#26102;&#20505;&#65292;&#22914;&#26524;&#20320;&#19968;&#30452;&#29992;&#30340;&#26159; emphasis&#65292;&#20320;&#23558;&#20250;&#20026;&#20320;&#30340;&#33609;&#29575;&#20184;&#20986;&#20195;&#20215;&#12290; </p><table border="1" id="d0e1739"><colgroup>
                <col>
                <col>
                <col>
            </colgroup><thead><tr>
                    <th>&#20803;&#32032;&#21517;</th>
                    <th>&#21547;&#20041;</th>
                    <th>&#31034;&#20363;</th>
                </tr></thead><tbody><tr>
                    <td>abbrev</td>
                    <td>&#30053;&#20889;&#65292;&#19968;&#33324;&#21518;&#38754;&#24102;&#26377;&#19968;&#20010;&#28857;('.')</td>
                    <td>abbrev</td>
                </tr><tr>
                    <td>emphasis</td>
                    <td>&#24378;&#35843;</td>
                    <td><span class="italic">&#24378;&#35843;</span></td>
                </tr><tr>
                    <td>phrase</td>
                    <td>&#30701;&#35821;</td>
                    <td>&#30701;&#35821;</td>
                </tr><tr>
                    <td>quote</td>
                    <td>&#29992;&#24341;&#21495;&#24341;&#36215;&#26469;</td>
                    <td>&#8220;&#29992;&#24341;&#21495;&#24341;&#36215;&#26469;&#8221;</td>
                </tr><tr>
                    <td>trademark</td>
                    <td>&#27880;&#20876;&#21830;&#26631;</td>
                    <td> &#27880;&#20876;&#21830;&#26631;&#8482;</td>
                </tr><tr>
                    <td>literal</td>
                    <td>&#25991;&#23383;&#30340;&#23383;&#38754;&#21547;&#20041;</td>
                    <td>&#25991;&#23383;&#30340;&#23383;&#38754;&#21547;&#20041;</td>
                </tr><tr>
                    <td>prompt</td>
                    <td>&#25552;&#31034;&#31526;</td>
                    <td>&#25552;&#31034;&#31526;</td>
                </tr><tr>
                    <td>userinput</td>
                    <td>&#29992;&#25143;&#36755;&#20837;</td>
                    <td><span class="bold"><strong>&#29992;&#25143;&#36755;&#20837;</strong></span></td>
                </tr><tr>
                    <td>subscript</td>
                    <td>&#19979;&#26631;</td>
                    <td>&#19979;&#26631;</td>
                </tr><tr>
                    <td>superscript</td>
                    <td>&#19978;&#26631;</td>
                    <td>&#19978;&#26631;</td>
                </tr><tr>
                    <td>application</td>
                    <td>&#36719;&#20214;&#21517;</td>
                    <td>&#36719;&#20214;&#21517;</td>
                </tr><tr>
                    <td>command</td>
                    <td>&#21629;&#20196;</td>
                    <td><span class="bold"><strong>&#21629;&#20196;</strong></span></td>
                </tr><tr>
                    <td>envar</td>
                    <td>&#29615;&#22659;&#21464;&#37327;</td>
                    <td>&#29615;&#22659;&#21464;&#37327;</td>
                </tr><tr>
                    <td>filename</td>
                    <td>&#25991;&#20214;&#21517;</td>
                    <td>&#25991;&#20214;&#21517;</td>
                </tr><tr>
                    <td>database</td>
                    <td>&#25968;&#25454;&#24211;</td>
                    <td>&#25968;&#25454;&#24211;</td>
                </tr><tr>
                    <td>email</td>
                    <td>&#30005;&#23376;&#37038;&#20214;</td>
                    <td><code class="email">&lt;<a class="email" href="mailto:myking520@gmail.com">myking520@gmail.com</a>&gt;</code></td>
                </tr></tbody></table></div><div class="section" title="&#29305;&#27530;&#23383;&#31526;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1941"></a>&#29305;&#27530;&#23383;&#31526;</h2></div></div></div><p>  &#19968;&#20123;&#23383;&#31526;&#22312; XML &#20013;&#26377;&#29305;&#27530;&#30340;&#21547;&#20041;&#65292;&#21482;&#33021;&#22815;&#36890;&#36807;&#20854;&#23454;&#20307;&#21517;&#31216;&#36755;&#20837;  &#23383;&#31526;&#20889;&#27861;&#32553;&#20889;&#28085;&#20041;&lt;&amp;lt;less than&gt;&amp;gt;greater
            than&amp;&amp;amp;ampersand"&amp;quot;quote'&amp;apos;apostrophe&#31354;&#26684;&amp;nbsp;none-break&nbsp;space
            &#36890;&#24120;&#38656;&#35201;&#20351;&#29992;&#23454;&#20307;&#36755;&#20837;&#30340;&#23383;&#31526;&#21253;&#25324;&lt;&#12289;&amp;&#12289;&#31354;&#26684;&nbsp;&nbsp;XML
            &#20250;&#23558;&#20219;&#24847;&#25968;&#37327;&#30340;&#31354;&#26684;&#35299;&#26512;&#20026;&#19968;&#20010;&#65292;&#22914;&#26524;&#24819;&#36890;&#36807;&#22810;&#20010;&#31354;&#26684;&#25511;&#21046;&#32553;&#36827;&#65292;&#23601;&#35201;&#20351;&#29992;&amp;nbsp;&nbsp;&nbsp;]]&gt;&#36825;&#20010;&#23383;&#31526;&#24207;&#21015;&#20063;&#19981;&#33021;&#30452;&#25509;&#36755;&#20837;&#65292;&#36825;&#26679;&#36755;&#20837;&#23427;]]&amp;gt;
            &#20063;&#21487;&#20197;&#19981;&#20351;&#29992;&#23454;&#20307;&#36755;&#20837;&#29305;&#27530;&#23383;&#31526;&#65292;&#36890;&#36807;CDATA&#30452;&#25509;&#24341;&#29992;&#65306; &lt;![CDATA[ &lt;&amp; ]]&gt; </p></div><div class="section" title="&#21015;&#34920;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1947"></a>&#21015;&#34920;</h2></div></div></div><p>&#26368;&#26222;&#36890;&#30340;&#21015;&#34920;&#20026;&#26080;&#24207;&#21015;&#34920;&#21644;&#26377;&#24207;&#21015;&#34920;&#65306;</p><pre class="screen">&lt;itemizedlist&gt; <a name="itemizedlist"></a><img src="images/callouts/1.png" alt="1" border="0">
  &lt;listitem&gt;
    &#21015;&#34920;&#39033;&#20869;&#23481;&#65292;&#21487;&#20197;&#20351;&#29992;para&#12289;formalpara&#31561;
  &lt;/listitem&gt;
&lt;/itemizedlist&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#itemizedlist"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p> &#26080;&#24207;&#21015;&#34920;&#65307;&#26377;&#24207;&#21015;&#34920;&#20026;<span class="bold"><strong>orderedlist</strong></span>&#65292;&#27599;&#20010;&#39033;&#33258;&#21160;&#32534;&#21495; </p></td></tr></table></div><p title="&#35789;&#27719;&#21015;&#34920;"><b>&#35789;&#27719;&#21015;&#34920;.&nbsp;</b>&#35789;&#27719;&#21015;&#34920;&#27599;&#19968;&#39033;&#21253;&#25324;&#19968;&#20010;&#35789;&#27719;&#26631;&#39064;&#21644;&#35789;&#27719;&#23450;&#20041;&#65292;&#26631;&#39064;&#31895;&#20307;&#65292;&#23450;&#20041;&#32553;&#36827;&#12290;&#36825;&#26412;&#36523;&#23601;&#26159;&#19968;&#20010;&#35789;&#27719;&#21015;&#34920;</p><pre class="screen">&lt;glosslist&gt;<a name="glosslist"></a><img src="images/callouts/1.png" alt="1" border="0">
    &lt;glossentry&gt;<a name="glossentry"></a><img src="images/callouts/2.png" alt="2" border="0">
        &lt;glossterm&gt;&#35789;&#27719;&#26631;&#39064;&lt;/glossterm&gt;<a name="glossterm"></a><img src="images/callouts/3.png" alt="3" border="0">
        &lt;glossdef&gt;<a name="glossdef"></a><img src="images/callouts/4.png" alt="4" border="0">
             &lt;para&gt;&#35789;&#27719;&#23450;&#20041;&lt;/para&gt;<a name="para"></a><img src="images/callouts/5.png" alt="5" border="0">
        &lt;/glossdef&gt;
    &lt;/glossentry&gt;
&lt;/glosslist&gt;    </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#glosslist"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>&#35789;&#27719;&#21015;&#34920;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#glossentry"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>&#21015;&#34920;&#39033;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#glossdef"><img src="images/callouts/4.png" alt="4" border="0"></a> </p></td><td valign="top" align="left"><p>&#35789;&#27719;&#23450;&#20041;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#para"><img src="images/callouts/5.png" alt="5" border="0"></a> </p></td><td valign="top" align="left"><p>&#35789;&#27719;&#23450;&#20041;&#24517;&#39035;&#20026;para&#20803;&#32032;</p></td></tr></table></div></div><div class="section" title="Callout &#21015;&#34920;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1994"></a>Callout &#21015;&#34920;</h2></div></div></div><p> &#22312;&#24341;&#29992;&#30340;&#20195;&#30721;&#22359;&#20013;&#21152;&#35760;&#21495;&#65292;&#24182;&#22312;&#22806;&#37096;&#27880;&#37322;&#12290;&#22914;&#26524;&#20320;&#35201;&#35299;&#37322;&#19968;&#20010;&#27604;&#36739;&#22797;&#26434;&#30340;&#27010;&#24565;&#65292;<span class="bold"><strong>calloutlist</strong></span>&#36890;&#24120;&#26159;&#26368;&#22909;&#30340;&#36873;&#25321; </p><pre class="screen">
&lt;screen&gt;
&#36825;&#37324;&#20250;&#26377;&#19968;&#20010;&#25968;&#23383;1&lt;co  xml:id="co1"/&gt;<a name="co1"></a><img src="images/callouts/1.png" alt="1" border="0">&#30340;&#35760;&#21495;
&#23427;&#23601;&#26159; callout &lt;co  xml:id="co2"/&gt;   <a name="co2"></a><img src="images/callouts/2.png" alt="2" border="0">
&lt;/screen&gt;    
    
&lt;calloutlist&gt;<a name="calloutlist"></a><img src="images/callouts/3.png" alt="3" border="0">
  &lt;callout arearefs="co1"&gt;&#36825;&#37324;&#26159;&#35760;&#21495;1&#30340;&#35828;&#26126;&lt;/callout&gt;<a name="callout"></a><img src="images/callouts/4.png" alt="4" border="0">
  &lt;callout arearefs="co2"&gt;&#31532;&#20108;&#20010;&#35760;&#21495;&#30340;&#35828;&#26126;&lt;/callout&gt;    
&lt;/calloutlist&gt;                
        </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co1"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>&#20351;&#29992;&lt;co id="co1"/&gt;&#20316;&#35760;&#21495;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co2"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>&#20351;&#29992;&lt;co id="co2"/&gt;&#20316;&#35760;&#21495;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#calloutlist"><img src="images/callouts/3.png" alt="3" border="0"></a> </p></td><td valign="top" align="left"><p>calloutlist &#21015;&#34920;&#65292;&#27599;&#19968;&#20010;&#39033;&#37117;&#29992;&#25968;&#23383;&#32534;&#21495;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#callout"><img src="images/callouts/4.png" alt="4" border="0"></a> </p></td><td valign="top" align="left"><p> callout &#20803;&#32032;&#20316;&#20026;&#35299;&#37322;&#65292;&#20351;&#29992;<span class="bold"><strong>arearefs=""</strong></span>&#24341;&#29992; </p></td></tr></table></div></div><div class="section" title="&#34920;&#26684;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2031"></a>&#34920;&#26684;</h2></div></div></div><p>&#34920;&#26684;&#26356;&#36866;&#21512;&#29992;&#21487;&#35270;&#21270;&#26041;&#24335;&#26469;&#29983;&#25104;&#65307;&#22240;&#20026;&#23427;&#26377;&#20004;&#20010;&#32500;&#24230;&#65292;&#20351;&#29992;&#32447;&#24615;&#30340;&#26631;&#35760;&#35821;&#35328;&#26469;&#29983;&#25104;&#65292;&#33258;&#28982;&#27604;&#36739;&#40635;&#28902;&#12290;</p><p>DocBook &#29983;&#25104;&#34920;&#26684;&#34429;&#28982;&#40635;&#28902;&#65292;&#20294;&#26159;&#30456;&#23545; reStructuredText &#31561;&#20351;&#29992;&#31354;&#38388;&#26041;&#20301;&#29983;&#25104;&#30340;&#26041;&#24335;&#65292;&#21364;&#26356;&#23481;&#26131;&#25511;&#21046;</p><p>&#34920;&#26684;&#20998;&#20026;&#20004;&#31181;<span class="bold"><strong>table</strong></span>&#21644;<span class="bold"><strong>informaltable</strong></span>&#65292;&#21306;&#21035;&#22312;&#20110;<span class="bold"><strong>table</strong></span>&#21487;&#20197;&#26377;&#26631;&#39064;&#65292;&#33021;&#22815;&#34987;&#25910;&#24405;&#21040;&#30446;&#24405;&#20013;&#12290;&#19979;&#38754;&#26159;&#34920;&#26684;&#30340;&#23454;&#20363;&#65306;</p><div class="section" title="&#34920;&#26684;&#23454;&#20363;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2050"></a>&#34920;&#26684;&#23454;&#20363;</h3></div></div></div><table border="1" id="d0e2054"><colgroup>
                  <col>
                  <col>
                  <col>
              </colgroup><thead><tr>
                      <th>&nbsp;</th>
                      <th>&#34920;&#22836;</th>
                      <td>&nbsp;</td>
                  </tr></thead><tfoot><tr>
                      <th>&nbsp;</th>
                      <th>&nbsp;</th>
                      <th>&#34920;&#24213;</th>
                  </tr></tfoot><tbody><tr>
                      <td>&#21333;&#20803;&#26684;&#19968;</td>
                      <td>&#21333;&#20803;&#26684;&#20108;</td>
                      <td>&#21333;&#20803;&#26684;&#19977;</td>
                  </tr><tr>
                      <td>11</td>
                      <td>12</td>
                      <td>13</td>
                  </tr><tr>
                      <td>&nbsp;</td>
                      <td>22</td>
                      <td>23</td>
                  </tr><tr>
                      <td>31</td>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                  </tr></tbody></table><pre class="screen">&lt;table&gt;
  &lt;title&gt;&#34920;&#26684;&#23454;&#20363;&lt;/title&gt;
  &lt;tgroup cols="3"&gt;
    &lt;thead&gt;&lt;row&gt;&lt;entry&gt;&lt;/entry&gt;&lt;entry&gt;&#34920;&#22836;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;
    &lt;tfoot&gt;&lt;row&gt;&lt;entry&gt;&lt;/entry&gt;&lt;entry&gt;&lt;/entry&gt;&lt;entry&gt;&#34920;&#24213;&lt;/entry&gt;&lt;/row&gt;&lt;/tfoot&gt;
  &lt;tbody&gt;
    &lt;row&gt;
        &lt;entry&gt;&#21333;&#20803;&#26684;&#19968;&lt;/entry&gt;
        &lt;entry&gt;&#21333;&#20803;&#26684;&#20108;&lt;/entry&gt;
        &lt;entry&gt;&#21333;&#20803;&#26684;&#19977;&lt;/entry&gt;
    &lt;/row&gt;
    &lt;row&gt;
	&lt;entry&gt;11&lt;/entry&gt;
	&lt;entry&gt;12&lt;/entry&gt;
	&lt;entry&gt;13&lt;/entry&gt;
    &lt;/row&gt;
    &lt;row&gt;
	&lt;entry&gt;&lt;/entry&gt;
	&lt;entry&gt;22&lt;/entry&gt;
	&lt;entry&gt;23&lt;/entry&gt;
    &lt;/row&gt;
    &lt;row&gt;
	&lt;entry&gt;31&lt;/entry&gt;
    &lt;/row&gt;
  &lt;/tbody&gt;
  &lt;/tgroup&gt;
&lt;/table&gt;
  </pre></div><div class="section" title="&#36328;&#34892;&#34920;&#26684;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2134"></a>&#36328;&#34892;&#34920;&#26684;</h3></div></div></div><table border="1" id="d0e2138"><colgroup>
               <col>
               <col>
               <col>
           </colgroup><tbody><tr>
                   <td rowspan="2">&#36328;&#20004;&#34892;</td>
                   <td>12</td>
                   <td>13</td>
               </tr><tr>
                   <td>22</td>
                   <td>23</td>
               </tr><tr>
                   <td>31</td>
                   <td rowspan="3">&#36328;&#19977;&#34892;</td>
                   <td>33</td>
               </tr><tr>
                   <td>41</td>
                   <td rowspan="2">&#36328;&#20004;&#34892;</td>
               </tr><tr>
                   <td>51</td>
               </tr></tbody></table><pre class="screen">&lt;table&gt;
  &lt;title&gt;&#36328;&#34892;&#34920;&#26684;&lt;/title&gt;
  &lt;tgroup cols="3"&gt;
    &lt;tbody&gt;
	  &lt;row&gt;
	    &lt;entry morerows="1"1&gt;<a name="morerows"></a><img src="images/callouts/1.png" alt="1" border="0">&#36328;&#20004;&#34892;&lt;/entry&gt;&lt;entry&gt;12&lt;/entry&gt;&lt;entry&gt;13&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	   <a name="entry1"></a><img src="images/callouts/2.png" alt="2" border="0"> &lt;entry&gt;22&lt;/entry&gt;&lt;entry&gt;23&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	    &lt;entry&gt;31&lt;/entry&gt;&lt;entry morerows="2"&gt;&#36328;&#19977;&#34892;&lt;/entry&gt;&lt;entry&gt;33&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	    &lt;entry&gt;41&lt;/entry&gt;3&lt;entry morerows="1"&gt;&#36328;&#20004;&#34892;&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	    &lt;entry&gt;51&lt;/entry&gt;
	  &lt;/row&gt;
    &lt;/tbody&gt;
  &lt;/tgroup&gt;
&lt;/table&gt;  </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#morerows"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p> &#20351;&#29992;<span class="bold"><strong>morerows="N"</strong></span>&#21512;&#24182;&#19979;&#26041;&#30340;N&#20010;&#21333;&#20803;&#26684; </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#entry1"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p> &#30001;&#20110;&#35813;&#34892;&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;&#24050;&#32463;&#34987;&#21512;&#24182;&#65292;&#25152;&#20197;&#24212;&#22312;&#36825;&#37324;&#20986;&#29616;&#30340;<span class="bold"><strong>entry</strong></span>&#20803;&#32032;&#21462;&#28040; </p><p> </p></td></tr></table></div></div><div class="section" title="&#36328;&#21015;&#34920;&#26684;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2212"></a>&#36328;&#21015;&#34920;&#26684;</h3></div></div></div><table border="1" id="d0e2216"><colgroup>
                <col>
                <col>
                <col>
                <col>
            </colgroup><tbody><tr>
                    <td colspan="2">&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;</td>
                    <td>&#31532;&#19977;&#20010;&#21333;&#20803;&#26684;</td>
                    <td>&#31532;&#22235;&#20010;&#21333;&#20803;&#26684;</td>
                </tr><tr>
                    <td>&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;</td>
                    <td colspan="3">&#31532;&#20108;&#20010;&#21333;&#20803;&#26684;</td>
                </tr><tr>
                    <td>&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;</td>
                    <td>&#31532;&#20108;&#20010;&#21333;&#20803;&#26684;</td>
                    <td>&#31532;&#19977;&#20010;&#21333;&#20803;&#26684;</td>
                    <td>&#31532;&#22235;&#20010;&#21333;&#20803;&#26684;</td>
                </tr></tbody></table><pre class="screen">&lt;table&gt;
  &lt;title&gt;&#36328;&#21015;&#34920;&#26684;&lt;/title&gt;
  &lt;tgroup cols="4"&gt;
&lt;colspec colnum="1" <a name="colnum"></a><img src="images/callouts/1.png" alt="1" border="0">  colname="1"  <a name="colname"></a><img src="images/callouts/2.png" alt="2" border="0"> /&gt;
&lt;colspec colnum="2" colname="2"/&gt;
&lt;colspec colnum="3" colname="3"/&gt;
&lt;colspec colnum="4" colname="4"/&gt;	
    &lt;tbody&gt;
	  &lt;row&gt;
	    &lt;entry namest="1"  <a name="namest"></a><img src="images/callouts/3.png" alt="3" border="0"> nameend="2"  <a name="nameend"></a><img src="images/callouts/4.png" alt="4" border="0"> &gt;&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry&gt;&#31532;&#19977;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry&gt;&#31532;&#22235;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	    &lt;entry&gt;&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry namest="2" nameend="4"&gt;&#31532;&#20108;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;
	  &lt;/row&gt;
	  &lt;row&gt;
	    &lt;entry&gt;&#31532;&#19968;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry&gt;&#31532;&#20108;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry&gt;&#31532;&#19977;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;&lt;entry&gt;&#31532;&#22235;&#20010;&#21333;&#20803;&#26684;&lt;/entry&gt;
	  &lt;/row&gt;
    &lt;/tbody&gt;
  &lt;/tgroup&gt;
&lt;/table&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#colnum"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p> &#21015;&#32534;&#21495; </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#colname"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p> &#21015;&#21517; </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#namest"><img src="images/callouts/3.png" alt="3" border="0"></a> </p></td><td valign="top" align="left"><p> &#36328;&#21015;&#21333;&#20803;&#26684;&#30340;&#36215;&#22987;&#21015;&#65292;&#29992;&#21015;&#21517;&#25351;&#23450; </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#nameend"><img src="images/callouts/4.png" alt="4" border="0"></a> </p></td><td valign="top" align="left"><p> &#36328;&#21015;&#21333;&#20803;&#26684;&#30340;&#32467;&#26463;&#21015; </p></td></tr></table></div></div></div></div></div><div class="book" title="ICONIX&#25991;&#26723;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2285"></a>ICONIX&#25991;&#26723;</h1></div><div><div class="author"><h3 class="author"><span class="orgname">myking</span><div class="address"><p><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="email">&lt;<a class="email" href="mailto:myking520@gmail.com">myking520@gmail.com</a>&gt;</code><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p></div></h3></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="article"><a href="#d0e2298">&#31616;&#20171;</a></span></dt></dl></div><div class="article" title="&#31616;&#20171;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2298"></a>&#31616;&#20171;</h1></div></div><hr></div><p>&#12288;ICONIX&#26159;&#23613;&#26089;&#36827;&#20837;&#32534;&#30721;&#38454;&#27573;&#65292;&#32553;&#30701;&#20998;&#26512;&#35774;&#35745;&#21608;&#26399;&#30340;&#36719;&#20214;&#24320;&#21457;&#26041;&#27861; &#21512;&#29702;&#30340;&#31616;&#21270;&#32479;&#19968;&#36807;&#31243;(RUP)&#65292; &#22522;&#20110;&#26497;&#38480;&#32534;&#31243;(XP)&#21644; &#25935;&#25463;&#36719;&#20214;&#24320;&#21457;&#30340;&#24605;&#24819;. ICONIX&#36807;&#31243;&#19982; UML&#21644;RUP&#30456;&#27604;&#65292;&#26159;&#36731;&#37327;&#32423;&#30340;&#36807;&#31243;&#12290; &#19981;&#21516;&#20110;XP&#21644;&#25935;&#25463;&#26041;&#27861;&#65292; ICONIX&#25552;&#20379;&#20805;&#36275;&#30340;&#38656;&#27714;&#21644;&#35774;&#35745;&#25991;&#26723;&#65292;&#20294;&#19981;&#36807;&#24230;&#20998;&#26512;&#35774;&#35745;&#12290; ICONIX&#36807;&#31243;&#20174;&#25226;&#38656;&#27714;&#25991;&#26723;&#21464;&#25104;&#21487;&#36816;&#20316;&#30340;&#20195;&#30721;&#36807;&#31243;&#21482;&#38656;&#22235;&#27493;&#65292;&#20351;&#29992;&#22235;&#24352;UML&#22270;&#12290;
        &#12288;&#12288;ICONIX&#30340;&#21407;&#21017;&#20998;&#21035;&#26159;&#23427;&#30340;&#29992;&#36884; &#24378;&#22766;&#20998;&#26512;&#19968;&#20010;&#26041;&#27861;&#20026;&#32553;&#23567;&#20998;&#26512;&#21644;&#35774;&#35745;&#20043;&#38388;&#30340;&#24046;&#36317;&#12290; &#24378;&#22766;&#20998;&#26512;&#36890;&#36807;&#20445;&#35777;&#20943;&#23569;&#20108;&#20041;&#24615;&#22312;&#20351;&#29992;&#20013;&#26696;&#20214;&#25551;&#36848;&#65292;&#20182;&#20204;&#22312;&#20276;&#38543;&#30340;&#19978;&#19979;&#25991;&#34987;&#20889; &#39046;&#22495;&#27169;&#22411;. &#36825;&#20010;&#36807;&#31243;&#20351;&#29992;&#36884;&#20107;&#20363;&#26356;&#21152;&#23481;&#26131;&#35774;&#35745;&#65292;&#27979;&#35797;&#21644;&#20272;&#35745;&#12290;
        &#12288;&#12288;ICONIX&#36807;&#31243;&#22312;&#20070;&#34987;&#25551;&#36848; &#20351;&#29992;&#26696;&#20214;&#22609;&#36896;&#19982;UML&#30340;&#34987;&#39550;&#39542;&#30340;&#23545;&#35937;&#65306; &#29702;&#35770;&#21644;&#23454;&#36341;
        &#12288;&#12288;&#26681;&#26412;&#19978;&#65292; ICONIX&#36807;&#31243;&#25551;&#36848;&#22609;&#36896;&#36807;&#31243;&#30340;&#26680;&#24515;&#8220;&#36923;&#36753;&#8221;&#20998;&#26512;&#21644;&#35774;&#35745;&#12290; &#28982;&#32780;&#65292;&#36807;&#31243;&#21487;&#20197;&#20351;&#29992;&#65292;&#26080;&#38656;&#21098;&#35009;&#22312;&#36319;&#38543;&#21478;&#22806;&#39033;&#30446;&#31649;&#29702;&#25110;&#25935;&#25463;&#26041;&#27861;&#23398;&#30340;&#39033;&#30446;&#12290; &#20070; &#25935;&#25463;&#21457;&#23637;&#20197;ICONIX&#36807;&#31243;&#22312;&#19968;&#20010;&#25935;&#25463;&#39033;&#30446;&#25551;&#36848;&#22914;&#20309;&#20351;&#29992;ICONIX&#36807;&#31243;&#12290;</p></div></div><div class="set" title="eclipse &#25554;&#20214;&#24320;&#21457;" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2305"></a>eclipse &#25554;&#20214;&#24320;&#21457;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="book"><a href="#d0e2310">GEF</a></span></dt><dd><dl><dt><span class="part"><a href="#d0e2314">I. GEF &#25945;&#31243;2</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e2319">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2322">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2327">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e2333">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e2339">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e2345">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e2351">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2360">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2364">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e2377">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2380">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e2419">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e2434">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2504">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2509">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2517">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e2529">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2545">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2549">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e2562">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2573">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2582">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2591">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2600">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2611">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e2618">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2635">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2646">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2665">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2672">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2681">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2690">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2699">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2725">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2730">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e2778">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e2787">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e2814">Command</a></span></dt><dt><span class="section"><a href="#d0e2825">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2838">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2843">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e2859">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2877">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2917">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2937">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e2996">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3012">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e3026">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e3040">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e3049">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e3069">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3073">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e3087">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e3113">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3120">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></dd></dl></dd></dl></div><div class="book" title="GEF"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2310"></a>GEF</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="part"><a href="#d0e2314">I. GEF &#25945;&#31243;2</a></span></dt><dd><dl><dt><span class="article"><a href="#d0e2319">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2322">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2327">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e2333">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e2339">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e2345">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e2351">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2360">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2364">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e2377">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2380">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e2419">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e2434">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2504">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2509">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2517">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e2529">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2545">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2549">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e2562">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2573">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2582">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2591">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2600">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2611">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e2618">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2635">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2646">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2665">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2672">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2681">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2690">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2699">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2725">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2730">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e2778">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e2787">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e2814">Command</a></span></dt><dt><span class="section"><a href="#d0e2825">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2838">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2843">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e2859">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2877">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2917">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2937">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e2996">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3012">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e3026">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e3040">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e3049">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e3069">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3073">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e3087">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e3113">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3120">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></dd></dl></div><div class="part" title="Part&nbsp;I.&nbsp;GEF &#25945;&#31243;2"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2314"></a>Part&nbsp;I.&nbsp;GEF &#25945;&#31243;2</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="article"><a href="#d0e2319">&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2322">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2327">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e2333">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e2339">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e2345">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e2351">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2360">&#21019;&#24314; Editor </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2364">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e2377">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2380">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e2419">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e2434">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e2504">GEF&#36335;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2509">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2517">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e2529">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2545">&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2549">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e2562">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2573">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2582">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2591">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2600">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2611">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e2618">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2635">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2646">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2665">&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2672">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2681">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2690">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2699">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2725">&#22270;&#24418;&#25805;&#20316; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2730">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e2778">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e2787">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e2814">Command</a></span></dt><dt><span class="section"><a href="#d0e2825">&#20462;&#25913; Editing Policy </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2838">&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2843">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e2859">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2877">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></dd><dt><span class="article"><a href="#d0e2917">&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2937">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e2996">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3012">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e3026">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e3040">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e3049">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></dd><dt><span class="article"><a href="#d0e3069">&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3073">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e3087">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e3113">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3120">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></dd></dl></div><div class="article" title="&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;"><div class="titlepage"><div><div><h2 class="title"><a name="d0e2319"></a>&#24314;&#31435;&#19968;&#20010;RCP&#24037;&#31243;</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2322">&#21019;&#24314;plugin-in project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2327">&#36873;&#25321;plugin-in project</a></span></dt><dt><span class="section"><a href="#d0e2333">Project name &#20026; gef.tutorial.step </a></span></dt><dt><span class="section"><a href="#d0e2339">&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </a></span></dt><dt><span class="section"><a href="#d0e2345">&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</a></span></dt><dt><span class="section"><a href="#d0e2351">&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</a></span></dt></dl></dd></dl></div><div class="section" title="&#21019;&#24314;plugin-in project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2322"></a>&#21019;&#24314;plugin-in project</h2></div></div></div><p>GEF&#21487;&#20197;&#24314;&#31435;&#22312; Eclipse&#30340; View&#20013;&#65292;&#19981;&#36807;&#26368;&#26222;&#36890;&#30340;&#26159;&#24314;&#31435;&#22312; Editor&#20013;&#65292;&#25105;&#24819;&#36825;&#26159;&#22240;&#20026; Editor&#25552;&#20379;&#20102;&#25991;
            &#20214;&#30340;&#20445;&#23384;&#26426;&#21046;&#21543;&#12290;&#20854;&#23454; View&#21644; Editor &#30340;&#21306;&#21035;&#24456;&#38590;&#35762;&#65292;&#26377;&#20852;&#36259;&#30340;&#21487;&#20197;&#30475;&#30475; RCP&#37027;&#26412;&#20070;&#12290; 
            &#25105;&#20204;&#36825;&#37324;&#30340;&#25945;&#31243;&#23601;&#26159;&#25226; GEF&#24314;&#31435;&#22312; RCP&#20043;&#19978;&#12290;&#25152;&#20197;&#25105;&#20204;&#35201;&#20808;&#24314;&#31435;&#19968;&#20010; RCP&#24037;&#31243;&#12290; </p><div class="section" title="&#36873;&#25321;plugin-in project"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2327"></a>&#36873;&#25321;plugin-in project</h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-1.jpg"></div></div><div class="section" title="Project name &#20026; gef.tutorial.step"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2333"></a>Project name &#20026; gef.tutorial.step </h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-2.jpg"></div></div><div class="section" title="&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2339"></a>&#22312; Rich Client Application&#20013;&#36873;&#25321; Ye s </h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-3.jpg"></div></div><div class="section" title="&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2345"></a>&#36873;&#25321; Hello RCP&#65292;&#21333;&#20987; Finish &#32467;&#26463;</h3></div></div></div><div class="mediaobject"><img src="../../images/step1/step1-4.jpg"></div></div><div class="section" title="&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2351"></a>&#35774;&#32622; plug-in&#24037;&#31243;&#30340; Dependability</h3></div></div></div><p>&#20026;&#20102;&#20351;&#29992; GEF&#65292;&#25105;&#20204;&#38656;&#35201;&#32473;&#36825;&#20010;&#24037;&#31243;&#21152;&#19978; org.eclipse.gef (3.1.0)&#12290;&#25171;&#24320; plugin.xml &#25991;&#20214;&#65292;&#22312; dependencies&#39029;
                &#38754;&#20013;&#21333;&#20987; Add&#8230;&#25214;&#21040; org.eclipse.gef,OK&#21518;&#23601;&#21152;&#19978;&#20102;</p><div class="mediaobject"><img src="../../images/step1/step1-5.jpg"></div></div></div></div><div class="article" title="&#21019;&#24314; Editor"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2360"></a>&#21019;&#24314; Editor </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2364">&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</a></span></dt><dt><span class="section"><a href="#d0e2377">&#24320;&#22987;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2380">&#26032;&#24314;&#19968;&#20010;editor</a></span></dt><dt><span class="section"><a href="#d0e2419">&#28155;&#21152;editor &#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#d0e2434">&#28155;&#21152;&#33756;&#21333;</a></span></dt></dl></dd></dl></div><div class="section" title="&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2364"></a>&#24314;&#35758;&#21442;&#32771;&#20070;&#31821;</h2></div></div></div><p>&#19979;&#38754;&#35813;&#21019;&#24314;&#26368;&#37325;&#35201;&#30340;&#37096;&#20998; Editor&#20102;&#12290; &#26368;&#36890;&#29992;&#30340;&#20363;&#23376;&#31243;&#24207;&#26159;&#25226; GEF&#30340;&#22270;&#24418;&#30011;&#22312; Editor&#19978;&#65292;&#25105;&#19981;&#26126;&#30333;&#20026;&#20160; &#20040;&#26377;&#20123;&#20154;&#24456;&#24076;&#26395;&#25226;&#22270;&#30011;&#21040;View&#19978;&#12290;
            &#20854;&#23454;Editor&#20174;EditorPart&#27966;&#29983;&#32780;&#26469;&#65292; &#25552;&#20379;&#20102;&#23545;&#22270;&#24418;&#20462;&#25913;&#21518;&#30340;&#25552;&#31034;&#20445;&#23384; &#65288;dirty &#22788;&#29702;&#65289;&#21644;&#20445;&#23384;&#31561;&#20989;&#25968;&#12290;&#20851;&#20110; Editor&#21644; View&#30340;&#20171;&#32461;&#21644;&#21306;&#21035;&#65292;&#21487;&#20197;&#21442;&#32771;&#36825;&#20004;&#26412;&#20070;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Eclipse Rich Client Platform : Designing, Coding, and Packaging Java(TM)
                        Applications (Eclipse (Addison-Wesley)) </p></li><li class="listitem"><p>Eclipse: Building Commercial-Quality Plug-ins (Eclipse Series) </p></li></ul></div><p>
        </p></div><div class="section" title="&#24320;&#22987;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2377"></a>&#24320;&#22987;</h2></div></div></div><div class="section" title="&#26032;&#24314;&#19968;&#20010;editor"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2380"></a>&#26032;&#24314;&#19968;&#20010;editor</h3></div></div></div><p>&#19968;&#20010;&#26368;&#22522;&#26412;&#30340; GEF &#24037;&#31243; &#24212;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#27169;&#22411;</p></li><li class="listitem"><p>&#25511;&#21046;&#22120;</p></li><li class="listitem"><p>&#35270;&#22270;</p></li></ul></div><p>&#22312;&#19979;&#38754;&#30340;&#22270;&#20013;&#21487;&#20197;&#30475;&#21040;&#25105;&#20204;&#24314;&#31435;&#20102; 3 &#20010;&#21253;&#65292; &#65288;&#21478;&#19968;&#20010;&#21253;&#26159;
            RCP &#30340;&#65289;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> gef.tutorial.step.model &#25918;&#32622;&#21644;&#27169;&#22411;&#30456;&#20851;&#30340;&#31867;</p></li><li class="listitem"><p> gef.tutorial.step.parts &#25918;&#32622;&#21644;&#25511;&#21046;&#22120;&#30456;&#20851;&#30340;&#31867;</p></li><li class="listitem"><p>gef.tutorial.step.ui  &#25918;&#32622;&#21644;&#35270; &#22270;&#30456;&#20851;&#30340;&#31867; &#26174;&#31034; GEF &#22270;&#24418;&#30340;&#26159;&#22312;
                    Editor &#30340; Viewer &#20013;&#65292;&#25152;&#20197;&#25105;&#20204;&#19979;&#38754;&#29983;&#25104;&#30340; editor &#31867;&#23601;&#24212;&#35813; &#25918;&#22312;&#36825;&#20010;&#21253;&#37324;&#38754;&#12290;</p></li></ul></div><div class="mediaobject"><img src="../../images/step2/step2-1.jpg"></div><p>&#19979;&#38754;&#25105;&#20204;&#20808;&#21019;&#24314; gef.tutorial.step.ui &#21253;&#20013;&#30340; Eclipse&#30340; editor&#25554;&#20214;&#65292;&#22240;&#20026;&#25105;&#20204;&#20250;&#21457;&#29616;&#65292;&#20197;&#21518;&#30340;&#22823;&#37096;&#20998;&#24037;&#20316;
                &#26159;&#35201;&#22312; Editor &#20013;&#20889;&#20195;&#30721;&#12290;Eclipse &#20013;&#30340; Editor &#26159;&#20174; org.eclipse.ui.part.EditorPart &#25193;&#23637;&#32780;&#26469;&#30340;&#65292;&#22240;&#20026;&#25105;&#20204;&#35201;&#25226;
                Editor &#20316;&#20026;&#25805;&#20316; GEF &#30340;&#30028;&#38754;&#65292;&#25152;&#20197;&#25105;&#20204;&#36825;&#37324;&#29983;&#25104;&#30340; DiagramEditor &#31867;&#26159;&#20174; org.eclipse.ui.part.EditorPart &#30340;&#23376;&#31867; org.eclipse.ui.parts.GraphicalEditor&#27966;&#29983;&#32780;&#26469;&#12290;&#22240;&#20026; GraphicalEditor&#31867;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#21019;&#24314;&#26174;&#31034; GEF&#22270;&#24418;&#30340;
                &#35270;&#22270; Viewer&#65292;&#36825;&#20010;&#21518;&#38754;&#20250;&#30475;&#21040;&#12290; 
                &#20851;&#20110; GraphicalEditor&#31867;&#30340;&#23618;&#27425;&#32467;&#26500;&#21487;&#20197;&#20174; help.eclipse.org&#20013;&#30475;&#21040;&#65292;&#25105;&#25226;&#23427;&#25335;&#36125;&#21040;&#20102;&#36825;&#37324;&#12290; </p><div class="mediaobject"><img src="../../images/step2/step2-2.jpg"></div><p>&#25105;&#20204;&#29983;&#25104;&#30340; DiagramEditor&#31867;&#25918;&#22312; gef.tutorial.step.ui&#21253;&#20013;&#65292;&#20195;&#30721;&#37117;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;&#20294;&#26159;&#25105;&#20204; &#35201;&#21152;&#19968;&#20010; ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;
            Editor</p><pre class="programlisting">
                package gef.tutorial.step.ui;

import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.gef.DefaultEditDomain;
import org.eclipse.gef.ui.parts.GraphicalEditor;

public class DiagramEditor extends GraphicalEditor {
	public final static String ID = "gef.tutorial.step.ui.DiagramEditor";// &#25105;&#20204;&#35201;&#21152;&#19968;&#20010;
																			// ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;
																			// Editor

	@Override
	protected void initializeGraphicalViewer() {
		// TODO Auto-generated method stub

	}

	public DiagramEditor() {
		/*
		 * Editing domain&#31649;&#29702;&#21629;&#20196;&#22534;&#26632; command stack&#12289;&#24037;&#20855;&#26465; palette viewer &#31561;&#12290;Editing
		 * domain&#36824;&#36215;&#36890;&#30693;&#22312; Graphicalviewer &#20013;&#29983;&#25104;&#30340; SWT &#20107;&#20214;&#30340;&#20316;&#29992;&#12290;&#22240;&#27492;&#65292;&#19968;&#23450;&#35201;&#24314;&#31435;&#19968;&#20010; Editing
		 * domain&#12290;&#36825;&#37324;&#65292;&#22312;
		 * DiagramEditor&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#20351;&#29992;setEditDomain()&#20989;&#25968;&#35774;&#32622;&#20102;&#19968;&#20010;org.eclipse.gef
		 * .DefaultEditDomain&#20316;&#20026; Editing domain&#12290;&#25105;&#20204;&#35201;&#35828;&#26126;&#30340;&#26159;&#65306;&#34429;&#28982;&#23545; GEF&#26469;&#35762;&#19968;&#20010; Editing
		 * domain&#24517;&#39035;&#26159;&#35774;&#32622;&#25104; Graphicalviewer &#65288;&#30452;&#30333;&#28857;&#35828;&#23601;&#26159;&#21487;&#30011;&#22270;&#30340;&#65289; &#65292;&#22240;&#20026;&#25105;&#20204;&#30340; DiagramEditor&#26159;&#20174;
		 * GraphicalEditor &#27966;&#29983;&#30340;&#65292;&#25152;&#20197;&#36825;&#37324;&#30340;&#32570;&#30465;&#30340; Editing domain&#8212;DefaultEditDomain
		 * &#20854;&#20869;&#22312;&#26159;&#34987;&#35774;&#32622;&#25104; Graphicalviewer&#30340;&#12290; &#35828;&#26126;&#65306;&#22914;&#26524;&#25105;&#20204;&#25226; Graphicalviewer &#25918;&#22312; Editor &#20013;&#26102;&#65292;&#25105;&#20204;&#20351;&#29992;
		 * DefaultEditDomain&#12290;&#22914;&#26524;&#25226; Graphicalviewer&#25918;&#22312;View&#20013;&#25110;&#32773;&#25918;&#22312;&#19968;&#20010;&#29420;&#31435;&#30340;Eclipse&#24212;&#29992;&#20013;&#26102;&#65292;
		 * &#25105;&#20204;&#35201;&#29992;org.eclipse.gef.EditDomain &#20316;&#20026; Editing domain&#12290;
		 */
		this.setEditDomain(new DefaultEditDomain(this));
	}

	@Override
	public void doSave(IProgressMonitor arg0) {
		// TODO Auto-generated method stub

	}

}

            </pre></div><div class="section" title="&#28155;&#21152;editor &#25193;&#23637;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2419"></a>&#28155;&#21152;editor &#25193;&#23637;</h3></div></div></div><p>&#22312; plugin.xml &#30340; extensions &#39029;&#38754;&#20013;&#65292;&#21333;&#20987; Add&#8230;&#25353;&#38062;&#25214;&#21040; org.eclipse.ui.editors&#65292;OK&#21518;&#23601;&#30475;&#21040;&#20102;&#12290;
            &#28982;&#21518;&#21491;&#28857;&#36825;&#20010;&#28155;&#21152;&#30340; org.eclipse.ui.editors&#65292;&#36873;&#25321; New-&gt;editor &#33756;&#21333;&#65292;&#23601;&#29983;&#25104;&#20102;&#19979;&#22270;&#30340; editor. </p><div class="mediaobject"><img src="../../images/step2/step2-3.jpg"></div><p>&#25105;&#20204;&#35201;&#20462;&#25913;&#19979;&#38754;&#30340; Extension Element Details: </p><div class="mediaobject"><img src="../../images/step2/step2-4.jpg"></div><p>&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#24819;&#21150;&#27861;&#26174;&#31034;&#36825;&#20010; DiagramEditor&#20102;&#12290;&#36825;&#37324;&#25105;&#20204;&#32473; RCP&#24037;&#31243;&#21152;&#20010;&#33756;&#21333;&#65292;&#36825;&#20010;&#33756;&#21333;&#21487;&#20197;&#25171;&#24320;
                &#19968;&#20010;&#31354;&#30333;&#30340; GEF Editor&#12290; </p></div><div class="section" title="&#28155;&#21152;&#33756;&#21333;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2434"></a>&#28155;&#21152;&#33756;&#21333;</h3></div></div></div><div class="section" title="&#21019;&#24314;&#19968;&#20010; Action &#30340;&#27966;&#29983;&#31867;"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2437"></a>&#21019;&#24314;&#19968;&#20010; Action &#30340;&#27966;&#29983;&#31867;</h4></div></div></div><p>&#36825;&#37324;&#38754;&#23450;&#20041;&#20102;&#33756;&#21333;&#21644;&#23545;&#24212;&#30340;&#24037;&#20855;&#25353;&#38062;&#30340;&#26174;&#31034;&#23383;&#31526;&#20018;&#21644;&#22270;&#26631;&#65292;&#20197;
                &#21450;&#20854; ID&#31561;&#31561;&#12290;&#36825;&#37324;&#30340; Action &#27966;&#29983;&#31867;&#21517;&#20026; DiagramAction&#65292;&#34987;&#25918;&#21040; gef.tutorial.step.actions&#21253;&#20013;&#12290; &#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step.actions;

import gef.tutorial.step.Activator;
import gef.tutorial.step.Application;

import org.eclipse.jface.action.Action;
import org.eclipse.jface.viewers.ISelection;
import org.eclipse.ui.ISelectionListener;
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.IWorkbenchPart;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
import org.eclipse.ui.plugin.AbstractUIPlugin;

public class DiagramAction extends Action implements ISelectionListener,IWorkbenchAction {
	private final IWorkbenchWindow window;
	public final static String ID="gef.tutorial.step.actions.DiagramAction";
	@Override
	public void selectionChanged(IWorkbenchPart arg0, ISelection arg1) {

	}
	public DiagramAction(IWorkbenchWindow window) {
		super();
		this.window = window;
		this.setId(ID);//&#28155;&#21152;id
		this.setText("&amp;Diagram");
		this.setToolTipText("Draw the GEF diagram.");
		this.setImageDescriptor(AbstractUIPlugin.imageDescriptorFromPlugin(Activator.PLUGIN_ID, "icons/alt_window_16.gif"));
		window.getSelectionService().addSelectionListener(this);
	}
	@Override
	public void dispose() {
		window.getSelectionService().removeSelectionListener(this);
		
	}

}

            </pre></div><div class="section" title="&#28155;&#21152;&#21019;&#24314;&#30340; DiagramAction"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2444"></a>&#28155;&#21152;&#21019;&#24314;&#30340; DiagramAction</h4></div></div></div><p>&#22312; ApplicationActionBarAdvisor.java &#25991;&#20214;&#20013;&#28155;&#21152;&#21069;&#38754;&#21019;&#24314;&#30340; DiagramAction&#12290;&#36825;&#37324;&#25105;&#20204;&#39034;&#20415;
                &#21019;&#24314;&#20102;&#19968;&#20010; Exit &#33756;&#21333;&#21644;&#19968;&#20010; About&#33756;&#21333;&#12290;&#20813;&#24471;&#25105;&#20204;&#30340; Diagram&#33756;&#21333;&#30475;&#19978;&#21435;&#22826;&#21333;&#34180;&#12290;&#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step;

import gef.tutorial.step.actions.DiagramAction;

import org.eclipse.jface.action.IMenuManager;
import org.eclipse.jface.action.MenuManager;
import org.eclipse.jface.action.Separator;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.actions.ActionFactory;
import org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
import org.eclipse.ui.application.ActionBarAdvisor;
import org.eclipse.ui.application.IActionBarConfigurer;

public class ApplicationActionBarAdvisor extends ActionBarAdvisor {
	private IWorkbenchAction about;
	private IWorkbenchAction exit;
	private IWorkbenchAction diagram;
	public ApplicationActionBarAdvisor(IActionBarConfigurer configurer) {
		super(configurer);
	}

	protected void makeActions(IWorkbenchWindow window) {
		about=ActionFactory.ABOUT.create(window);
		exit=ActionFactory.QUIT.create(window);
		diagram=new DiagramAction(window);
		register(about);
		register(exit);
		register(diagram);
	}

	protected void fillMenuBar(IMenuManager menuBar) {
		MenuManager fileMenu=new MenuManager("&amp;File", "File");
		fileMenu.add(diagram);
		fileMenu.add(new Separator());
		fileMenu.add(exit);
		MenuManager helpMenu=new MenuManager("&amp;Help", "Help");
		helpMenu.add(about);
		menuBar.add(fileMenu);
		menuBar.add(helpMenu);
	}

}

                    
                </pre><p>&#22312; plugin.xml &#25991;&#20214;&#30340; overview&#39029;&#38754;&#20013;&#28857;&#20987;&#8220;Launce an Eclipse application&#8221;&#37027;&#20010;&#38142;&#25509;&#65292;&#23601;&#21487;&#20197;&#30475;
                    &#21040;&#21152;&#36825;&#20010;&#33756;&#21333;&#30340;&#25928;&#26524;&#20102;&#12290;&#20294;&#26159;&#36825;&#20010;&#33756;&#21333;&#36824;&#19981;&#33021;&#36215;&#20219;&#20309;&#20316;&#29992;&#65292;&#22240;&#20026;&#25105;&#20204;&#22312; DiagramAction &#37027;&#20010;&#31867;&#30340; run()&#20013;&#27809;
                    &#35753;&#23427;&#20570;&#20219;&#20309;&#20107;&#24773;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#35753;&#23427;&#26174;&#31034;&#19968;&#20010;&#23545;&#35805;&#26694;&#65292;&#28982;&#21518;&#25171;&#24320;&#19968;&#20010; Diagram Editor</p><div class="mediaobject"><img src="../../images/step2/step2-5.jpg"></div></div><div class="section" title="&#26174;&#31034;&#20986;DiagramEdior"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2456"></a>&#26174;&#31034;&#20986;DiagramEdior</h4></div></div></div><div class="section" title="&#21019;&#24314;&#19968;&#20010;EditorInput"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2459"></a>&#21019;&#24314;&#19968;&#20010;EditorInput</h5></div></div></div><p>&#22240;&#20026;&#25152;&#26377;&#30340; Editor &#37117;&#35201;&#26377;&#20010; EditorInput &#20316;&#20026;&#20854;&#20869;&#23481;&#30340;&#25552;&#20379;&#32773;&#65292;&#25152;&#20197;&#25105;&#20204;&#29983;&#25104;&#20102;&#19968;&#20010;
                    DiagramEditorInput &#20316;&#20026; DiagramEditor &#30340;&#25552;&#20379;&#32773;&#12290;&#22240;&#20026;&#25105;&#20204;&#26159; RCP &#24037;&#31243;&#65292;&#25152;&#20197;&#25105;&#20204;&#30340; DiagramEditorInput
                    &#26159;&#20174; IPathEditorInput &#27966;&#29983;&#30340;&#12290;&#36825;&#37324;&#30340;&#20363;&#23376;&#22909;&#20687;&#26159;&#20174; Using GEF with EMF&#20013;&#20511;&#29992;&#26469;&#30340;&#65292;&#25105;&#35760;&#19981;&#24456;&#28165;&#26970;&#20102;&#12290;
                    &#25105;&#20204;&#19981;&#35814;&#32454;&#35848;&#36825;&#20010; EditorInput &#30340;&#20316;&#29992;&#65292;&#26377;&#30097;&#38382;&#30340;&#21487;&#20197;&#21442;&#32771; RCP &#37027;&#26412;&#20070;&#65292;&#20889;&#30340;&#24456;&#35814;&#32454;&#12290;&#21478;&#22806;&#65292;&#21069;&#38754;&#25512;&#33616;&#30340;
                    &#21478;&#22806;&#21830;&#19994;&#25554;&#20214;&#24320;&#21457;&#30340;&#20070;&#20063;&#20171;&#32461;&#30340;&#24456;&#22810;&#12290;&#28304;&#30721;&#22914;&#19979;</p><pre class="programlisting">
                package gef.tutorial.step.ui;

import org.eclipse.core.runtime.IPath;
import org.eclipse.core.runtime.Path;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.IPathEditorInput;
import org.eclipse.ui.IPersistableElement;

public class DiagramEditorInput implements IPathEditorInput {
	private IPath path;
	public DiagramEditorInput(Path path) {
		this.path=path;
	}

	@Override 
	public boolean exists() {
		return path.toFile().exists();
	}

	@Override
	public ImageDescriptor getImageDescriptor() {
		return null;
	}

	@Override
	public String getName() {
		return path.toString();
	}

	@Override
	public IPersistableElement getPersistable() {
		return null;
	}

	@Override
	public String getToolTipText() {
		return path.toString();
	}

	@Override
	public Object getAdapter(Class arg0) {
		return null;
	}

	@Override
	public IPath getPath() {
		return path;
	}

}

                    
                </pre></div><div class="section" title="&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2466"></a>&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;</h5></div></div></div><p>&#22312; DiagramAction &#20013;&#30340; run()&#20989;&#25968;&#20869;&#28155;&#21152;&#20195;&#30721;&#35753; Diagram &#33756;&#21333;&#25171;&#24320;&#19968;&#20010;&#23545;&#35805;&#26694;&#12290;&#25991;&#20214;&#30340;&#25193;
                    &#23637;&#21517;&#20026;*.diagram&#12290;</p><pre class="programlisting">
                            <strong class="hl-keyword">package</strong> gef.tutorial.step.actions;

<strong class="hl-keyword">import</strong> gef.tutorial.step.Activator;
<strong class="hl-keyword">import</strong> gef.tutorial.step.Application;
<strong class="hl-keyword">import</strong> gef.tutorial.step.ui.DiagramEditor;
<strong class="hl-keyword">import</strong> gef.tutorial.step.ui.DiagramEditorInput;

<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.Path;
<strong class="hl-keyword">import</strong> org.eclipse.jface.action.Action;
<strong class="hl-keyword">import</strong> org.eclipse.jface.viewers.ISelection;
<strong class="hl-keyword">import</strong> org.eclipse.swt.SWT;
<strong class="hl-keyword">import</strong> org.eclipse.swt.widgets.FileDialog;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IEditorInput;
<strong class="hl-keyword">import</strong> org.eclipse.ui.ISelectionListener;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbench;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchPage;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchPart;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IWorkbenchWindow;
<strong class="hl-keyword">import</strong> org.eclipse.ui.PartInitException;
<strong class="hl-keyword">import</strong> org.eclipse.ui.actions.ActionFactory.IWorkbenchAction;
<strong class="hl-keyword">import</strong> org.eclipse.ui.plugin.AbstractUIPlugin;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramAction <strong class="hl-keyword">extends</strong> Action <strong class="hl-keyword">implements</strong> ISelectionListener,IWorkbenchAction {
	<strong class="hl-keyword">private</strong> <strong class="hl-keyword">final</strong> IWorkbenchWindow window;
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">final</strong> <strong class="hl-keyword">static</strong> String ID=<strong class="hl-string"><em style="color:red">"gef.tutorial.step.actions.DiagramAction"</em></strong>;
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> selectionChanged(IWorkbenchPart arg0, ISelection arg1) {

	}
	<strong class="hl-keyword">public</strong> DiagramAction(IWorkbenchWindow window) {
		<strong class="hl-keyword">super</strong>();
		<strong class="hl-keyword">this</strong>.window = window;
		<strong class="hl-keyword">this</strong>.setId(ID);<em class="hl-comment" style="color: silver">//&#28155;&#21152;id</em>
		<strong class="hl-keyword">this</strong>.setText(<strong class="hl-string"><em style="color:red">"&amp;Diagram"</em></strong>);
		<strong class="hl-keyword">this</strong>.setToolTipText(<strong class="hl-string"><em style="color:red">"Draw the GEF diagram."</em></strong>);
		<strong class="hl-keyword">this</strong>.setImageDescriptor(AbstractUIPlugin.imageDescriptorFromPlugin(Activator.PLUGIN_ID, <strong class="hl-string"><em style="color:red">"icons/alt_window_16.gif"</em></strong>));
		window.getSelectionService().addSelectionListener(<strong class="hl-keyword">this</strong>);
	}
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> dispose() {
		window.getSelectionService().removeSelectionListener(<strong class="hl-keyword">this</strong>);
		
	}
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> run() {
		String path = openFileDialog();
		<strong class="hl-keyword">if</strong> (path != null) {
			IEditorInput input = <strong class="hl-keyword">new</strong> DiagramEditorInput(<strong class="hl-keyword">new</strong> Path(path));
			IWorkbenchPage page = window.getActivePage();
			<strong class="hl-keyword">try</strong> {
				page.openEditor(input, DiagramEditor.ID, true);
			} <strong class="hl-keyword">catch</strong> (PartInitException e) {
				<em class="hl-comment" style="color: silver">// handle error</em>
			}
		}
	}
	<strong class="hl-keyword">private</strong> String openFileDialog() {
		FileDialog dialog = <strong class="hl-keyword">new</strong> FileDialog(window.getShell(), SWT.OPEN);
		dialog.setText(<strong class="hl-string"><em style="color:red">"GEF File"</em></strong>);
		dialog.setFilterExtensions(<strong class="hl-keyword">new</strong> String[] { <strong class="hl-string"><em style="color:red">".diagram"</em></strong> });
		<strong class="hl-keyword">return</strong> dialog.open();
	}
}

                    </pre></div><div class="section" title="&#35774;&#32622; Editor&#20026;&#21487;&#35265;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2473"></a>&#35774;&#32622; Editor&#20026;&#21487;&#35265;</h5></div></div></div><p>&#26368;&#21518;&#22312;Perspective.java&#25991;&#20214;&#20013;&#35774;&#32622; Editor&#20026;&#21487;&#35265;&#12290;</p><pre class="programlisting">
                        <strong class="hl-keyword">package</strong> gef.tutorial.step;

<strong class="hl-keyword">import</strong> org.eclipse.ui.IPageLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPerspectiveFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> Perspective <strong class="hl-keyword">implements</strong> IPerspectiveFactory {

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> createInitialLayout(IPageLayout layout) {
		layout.setEditorAreaVisible(true);
	}
}

                    </pre></div><div class="section" title="&#20160;&#20040;&#26159; GEF&#30340;&#36335;&#23376;"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2480"></a>&#20160;&#20040;&#26159; GEF&#30340;&#36335;&#23376;</h5></div></div></div><p>&#26368;&#21518;&#22312;Perspective.java&#25991;&#20214;&#20013;&#35774;&#32622; Editor&#20026;&#21487;&#35265;&#12290;</p><div class="mediaobject"><img src="../../images/step2/step2-6.jpg"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1&#12289;&#21019;&#24314;&#27169;&#22411; &#22914;HelloModel</p></li><li class="listitem"><p>2&#12289;&#21019;&#24314;&#25511;&#21046;&#22120; editpart &#19968;&#33324;&#26126;&#26126;&#20026;HelloEditPart</p></li><li class="listitem"><p>3&#12289;&#21019;&#24314;&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#30340;&#24037;&#21378;&#65292;&#19968;&#33324;&#21629;&#21517;&#20026;**PartFactory</p></li><li class="listitem"><p>4&#12289;&#22312;edit &#20013;&#21019;&#24314;GraphicalViewer &#24182;&#26174;&#31034;&#22270;&#20687;</p></li></ul></div><p>&#25105;&#20204;&#23601;&#25353;&#19978;&#22270;&#30340;&#39034;&#24207;&#21644;&#35268;&#21017;&#23454;&#29616; GEF&#12290; </p></div></div></div></div></div><div class="article" title="GEF&#36335;&#23376;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2504"></a>GEF&#36335;&#23376;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2509">&#21019;&#24314;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2517">&#21019;&#24314;&#27169;&#22411;</a></span></dt><dt><span class="section"><a href="#d0e2529">&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </a></span></dt></dl></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2509"></a>&#21019;&#24314;&#27169;&#22411; </h2></div></div></div><p>&#39318;&#20808;&#25105;&#20204;&#21019;&#24314;&#26368;&#22522;&#26412;&#30340;&#27169;&#22411;&#65292;&#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#21482;&#24819;&#22312; Diagram Editor&#20013;&#26174;&#31034; Hello World &#23601;&#22909;&#65292;&#25152;&#20197;&#25105;&#20204;
    &#21482;&#26377;&#19968;&#20010;&#27169;&#22411;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#27169;&#22411;&#25918;&#22312; gef.tutorial.step.model &#21253;&#20013;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel {
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;

	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	}
	
}

      </pre></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2517"></a>&#21019;&#24314;&#27169;&#22411;</h2></div></div></div><p>  &#19979;&#38754;&#35813;&#21019;&#24314;&#26174;&#31034;&#19978;&#38754;&#27169;&#22411;&#30340;&#35270;&#22270; View&#20102;&#21543;&#65292; &#20808;&#21035;&#24537;&#65292; &#25105;&#20204;&#35201;&#20808;&#21019;&#24314;&#36830;&#25509;&#35270;&#22270;&#21644;&#27169;&#22411;&#30340;&#25511;&#21046;&#22120;&#65292; &#22312; GEF
        &#20013;&#23601;&#26159; EditPart &#20102;&#12290;&#22240;&#20026;&#22312;&#21019;&#24314;&#35270;&#22270;&#30340;&#26102;&#20505;&#35201;&#25191;&#34892;&#36825;&#20010;&#25511;&#21046;&#22120;&#12290;&#38752;&#65292;&#35828;&#26159;&#20160;&#20040; MVC&#65292;&#25105;&#35273;&#24471;&#22815;&#20081;&#30340;&#12290; 
        &#37027;&#25105;&#20204;&#23601;&#21019;&#24314;&#19968;&#20010; HelloEditorPart &#21543;&#65292; &#65288;&#20854;&#23454;&#26368;&#22909;&#20889;&#25104; HelloEditPart&#65289; &#65292;&#25918;&#22312;gef.tutorial.step.parts&#21253;&#20013;&#12290;
        &#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#36825;&#37324;&#30340; HelloEditorPart&#30340;&#20027;&#35201;&#20316;&#29992;&#23601;&#26159;&#29992; Draw2D&#30340;&#20989;&#25968;&#20316;&#22270;&#65292; &#36825;&#37324;&#30340;&#22270;&#24418;&#23601;&#26159;&#22312;&#19968;&#20010; Label
        &#19978;&#20889; Hello World &#36825;&#20960;&#20010;&#23383;&#27597;&#12290; </p><p>&#22823;&#23478;&#27880;&#24847; import&#30340;&#26102;&#20505;&#35201; import&#36827;&#27491;&#30830;&#30340;&#31867;&#12290;&#35692;&#22914;&#36825;&#37324;&#23601;&#24212;&#35813; import org.eclipse.draw2d.Label&#12290;&#22240;&#20026;
    &#25105;&#20204;&#21518;&#38754;&#29992;&#30340;&#26159; Graphical Viewer&#65292;&#25105;&#20204;&#36825;&#37324;&#30340; HelloEditorPart &#23601;&#20174; AbstractGraphicalEditPart &#27966;&#29983;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Label;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		HelloModel model=(HelloModel)<strong class="hl-keyword">this</strong>.getModel();
		Label label=<strong class="hl-keyword">new</strong> Label();
		label.setText(model.getText());
		<strong class="hl-keyword">return</strong> label;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

    </pre><p>&#36825;&#37324;&#25105;&#20204;&#20351;&#29992; getModel()&#20989;&#25968;&#33719;&#24471; HelloModel &#27169;&#22411;&#12290;&#22240;&#20026;&#22312; GEF &#20013;&#27169;&#22411;&#34987;&#24403;&#20316; Object &#31867;&#22411;&#23545;&#24453;&#65292;&#25152;
        &#20197;&#25105;&#20204;&#36825;&#37324;&#36827;&#34892;&#20102;&#24378;&#21046;&#36716;&#25442;&#12290;&#36825;&#20010;&#35201;&#27880;&#24847;&#65292;&#20197;&#21518;&#25105;&#20204;&#29983;&#25104; Setters &#26102;&#20063;&#35201;&#29992; Object &#31867;&#22411;&#65292;&#28982;&#21518;&#20877;&#24378;&#21046;&#36716;&#25442;&#65292;
        &#21518;&#38754;&#20250;&#30475;&#21040;&#30340;&#12290; 
        &#36825;&#26679;&#65292;&#25105;&#20204;&#21019;&#24314;&#30340; HelloModel &#23601;&#21487;&#20197;&#34987; EditPart&#25805;&#20316;&#20102;&#65292;&#24182;&#19988; EditPart&#36824;&#32472;&#21046;&#20102;&#22270;&#24418;&#12290; </p></div><div class="section" title="&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2529"></a>&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#65288;Controller&#65289; </h2></div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#26377;&#20102;&#27169;&#22411; HelloModel&#65292;&#26377;&#20102;&#23427;
        &#26041;&#27861;&#26159;&#29992;&#24037;&#21378; Factory&#12290;&#20026;&#20160;&#20040;&#29992;&#24037;&#21378;&#27169;&#24335;&#21602;&#65292;
        &#20102;&#12290;&#24037;&#21378;&#27169;&#24335;&#22823;&#23478;&#21442;&#32771;&#27169;&#24335;&#20070;&#12290; 
        &#31616;&#21333;&#22320;&#35828;&#65292; &#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;&#21482;&#38656;&#20004;&#27493;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#39318;&#20808;&#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#20854;&#25511;&#21046;&#22120; </p></li><li class="listitem"><p>&#28982;&#21518;&#29992; setModel() &#20989;&#25968;&#36830;&#25509;&#27169;&#22411;&#21644;&#20854;&#25511;&#21046;&#22120;&#12290;</p></li></ul></div><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.EditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.EditPartFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> PartFactory <strong class="hl-keyword">implements</strong> EditPartFactory {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> EditPart createEditPart(EditPart context, Object model) {
		EditPart part=<strong class="hl-keyword">this</strong>.getPartForElement(model);<em class="hl-comment" style="color: silver">//&#33719;&#24471;&#25511;&#21046;&#22120;</em>
		part.setModel(model);<em class="hl-comment" style="color: silver">//&#36830;&#25509;&#27169;&#22411;&#21644;&#25511;&#21046;&#22120;</em>
		<strong class="hl-keyword">return</strong> part;
	}

	<strong class="hl-tag" style="color: blue">/**
	 * &#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#25511;&#21046;&#22120;
	 * @param model
	 * @return &#25511;&#21046;&#22120;
	 */</strong>
	<strong class="hl-keyword">private</strong> EditPart getPartForElement(Object model) {
		<strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> HelloModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> HelloEditorPart();
		}
		<strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> RuntimeException(<strong class="hl-string"><em style="color:red">"Can't create part for model element: "</em></strong>
				+ ((model != null) ? model.getClass().getName()
						: <strong class="hl-string"><em style="color:red">"null"</em></strong>));
	}

}

    </pre></div></div><div class="article" title="&#31649;&#29702;&#22810;&#20010;&#27169;&#22411;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2545"></a>&#31649;&#29702;&#22810;&#20010;&#27169;&#22411; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2549">&#20869;&#23481;&#25552;&#35201;&#65306;</a></span></dt><dt><span class="section"><a href="#d0e2562">&#22270;&#24418;&#38598;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2573">&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2582">&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2591">&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </a></span></dt><dt><span class="section"><a href="#d0e2600">&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </a></span></dt><dt><span class="section"><a href="#d0e2611">&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </a></span></dt><dt><span class="section"><a href="#d0e2618">&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2635">&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </a></span></dt><dt><span class="section"><a href="#d0e2646">&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</a></span></dt></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;&#65306;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2549"></a>&#20869;&#23481;&#25552;&#35201;&#65306;</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#31649;&#29702;&#22810;&#20010;&#27169;&#22411;&#12290;&#20854;&#20013;&#19968;&#20010;&#27169;&#22411; ContentsModel &#20445;&#23384;&#25972;&#20010;&#22270;&#24418;&#30340;&#20449;&#24687;&#65292;&#36825;&#20010;&#22270;&#24418;&#20013;&#25105;&#20204;&#35201;&#29992; HelloModel
          &#30340;&#23545;&#35937;&#20570;&#19977;&#20010; Hello World!</p></li><li class="listitem"><p>&#22312;&#25972;&#20010;&#22270;&#24418;&#30340; ContentsModel &#27169;&#22411;&#20013;&#20351;&#29992; Layer&#23618;&#30340;&#27010;&#24565;&#65292;&#32473;&#37324;&#38754;&#30340;&#22270;&#24418;&#21152;&#19978;&#39068;&#33394;&#31561;&#25928;&#26524;&#12290;</p></li></ul></div><p>&#19978;&#22238;&#20070;&#35828;&#21040;&#22914;&#20309;&#20351;&#29992; GEF&#26469;&#26174;&#31034; Hello World&#65292;&#20070;&#25509;&#19978;&#22238;&#65292;&#25105;&#20204;&#35201;&#20171;&#32461;&#22914;&#20309;&#25226; Hello World &#36825;&#20010;&#22270;&#24418;&#25918;
            &#21040;&#19968;&#20010;&#22270;&#24418;&#38598;&#20013;&#65292;&#36825;&#20010;&#22270;&#24418;&#38598;&#27169;&#22411;&#20445;&#23384;&#30528;&#25972;&#20010;&#22270;&#24418;&#30340;&#20449;&#24687;&#12290;&#28982;&#21518;&#25105;&#20204;&#35201;&#20351;&#29992;&#24067;&#23616;&#31649;&#29702;&#22120;&#65288;layout manager&#65289;
            XYLayout &#26469;&#32472;&#21046;&#36825;&#20010;&#22270;&#24418;&#38598;&#65292;&#36825;&#20010;&#24067;&#23616;&#31649;&#29702;&#22120;&#21487;&#20197;&#20351;&#22270;&#24418;&#33258;&#30001;&#31227;&#21160;&#12290; </p></div><div class="section" title="&#22270;&#24418;&#38598;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2562"></a>&#22270;&#24418;&#38598;&#27169;&#22411; </h2></div></div></div><p>  &#36825;&#37324;&#25105;&#20204;&#35201;&#21019;&#24314;&#19968;&#20010;&#22270;&#24418;&#38598;&#27169;&#22411; CpntentsModel&#65292;&#36825;&#20010;&#27169;&#22411;&#21253;&#25324;&#22810;&#20010; Hello World &#23545;&#35937;&#12290;&#32780;&#19988;&#36825;&#20010;&#22270;&#24418;
        &#38598;&#27169;&#22411;&#29992;&#20110;&#31649;&#29702;&#25972;&#20010;&#22270;&#24418;&#65292;&#35692;&#22914;&#35774;&#32622;&#22270;&#24418;&#30340;&#24067;&#23616;&#31561;&#12290; 
        &#22238;&#24518;&#19968;&#19979;&#19978;&#22238;&#20070;&#20013;&#26500;&#24314;&#19968;&#20010; GEF&#30340;&#36807;&#31243;&#12290;&#23545;&#20102;&#65292;&#31616;&#21333;&#22320;&#35828;&#23601;&#26159;&#65306; </p><div class="mediaobject"><img src="../../images/step4/step4-1.jpg"></div><p>  &#25105;&#22823;&#32966;&#22320;&#39044;&#35745;&#19968;&#19979;&#65292; &#20272;&#35745;&#24456;&#24555;&#20250;&#26377; GEF&#24320;&#21457;&#30340;&#25554;&#20214;&#20102;&#65292; &#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#24635;&#26159;&#35201;&#19968;&#20010;&#19968;&#20010;&#21435;&#21019;&#24314;&#36825;&#20010;&#21658;&#21658;&#65292;
        &#20854;&#23454;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#25554;&#20214;&#19968;&#27425;&#23601;&#25630;&#23450;&#19978;&#38754;&#20960;&#20010;&#25991;&#20214;&#12290; </p></div><div class="section" title="&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2573"></a>&#21019;&#24314;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel </h2></div></div></div><p>&#21019;&#24314; ContentsModel &#23601;&#19981;&#21776;&#20711;&#20102;&#65292;&#20195;&#30721;&#22914;&#19979; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel {

}

      </pre></div><div class="section" title="&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2582"></a>&#21019;&#24314; ContentsModel &#30340;&#25511;&#21046;&#22120; ContentsEditPart </h2></div></div></div><p>&#19979;&#38754;&#65292;&#25105;&#20204;&#36824;&#26159;&#20174; AbstractGraphicalEditPart &#27966;&#29983;&#19968;&#20010;&#23545;&#24212; ContentsModel &#30340; ContentsEditPart&#12290;&#25105;&#20204;&#22312;
        &#32487;&#25215;&#26469;&#30340; createFigure &#26041;&#27861;&#20013;&#32473;&#36825;&#20010;&#22270;&#24418;&#38598;&#35774;&#32622;&#19968;&#20010; Draw2D &#30340;&#22270;&#23618;&#65288;Layer &#31867;&#65289; &#65292;&#36825;&#20010;&#22270;&#23618;&#30340;&#29305;&#28857;&#26159;&#36879;&#26126;
        &#22270;&#23618;&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

      </pre></div><div class="section" title="&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2591"></a>&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120; ContentsEditPart </h2></div></div></div><p>  &#35828;&#36215;&#26469;&#25105;&#37117;&#35273;&#24471;&#28902;&#65292;&#25105;&#20204;&#21448;&#35201;&#22312; PartFactory.java &#20013;&#36830;&#25509;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#23427;&#30340;&#25511;&#21046;&#22120;
    ContentsEditPart &#20102;&#12290;&#20197;&#21518;&#25105;&#20204;&#35201;&#22312; PartFactory.java&#20013;&#36830;&#25509; n &#22810;&#21658;&#21658;&#21644;&#23427;&#20204;&#30340;&#25511;&#21046;&#22120;&#12290;&#28155;&#21152;&#20195;&#30721;&#22914;&#19979;&#65306;</p><pre class="programlisting">
	<strong class="hl-tag" style="color: blue">/**
	 * &#26681;&#25454;&#27169;&#22411;&#31867;&#22411;&#21019;&#24314;&#25511;&#21046;&#22120;
	 * @param model
	 * @return &#25511;&#21046;&#22120;
	 */</strong>
	<strong class="hl-keyword">private</strong> EditPart getPartForElement(Object model) {
		<strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> HelloModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> HelloEditorPart();
		}<strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong>(model <strong class="hl-keyword">instanceof</strong> ContentModel){
			<strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> ContentsEditPart();
		}
		<strong class="hl-keyword">throw</strong> <strong class="hl-keyword">new</strong> RuntimeException(<strong class="hl-string"><em style="color:red">"Can't create part for model element: "</em></strong>
				+ ((model != null) ? model.getClass().getName()
						: <strong class="hl-string"><em style="color:red">"null"</em></strong>));
	}
        
    </pre></div><div class="section" title="&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2600"></a>&#20462;&#25913; Viewer&#20013;&#26174;&#31034;&#30340;&#27169;&#22411;&#20026; ContentsModel </h2></div></div></div><p>&#35760;&#24471;&#25105;&#20204;&#21069;&#38754;&#22312;DiagramEditor&#31867;&#30340;initializeGraphicalViewer&#26041;&#27861;&#20013;&#25226;HelloModel&#35774;&#32622;&#20026;&#22270;&#24418;&#27169;&#22411;&#21543;&#12290;
    &#19981;&#35760;&#24471;&#30340;&#30475;&#31532; 1 &#22238;&#12290;&#36825;&#37324;&#25105;&#20204;&#35201;&#25226; ContentsModel &#35774;&#32622;&#20026;&#22270;&#24418;&#27169;&#22411;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.ui;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.parts.PartFactory;

<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.IProgressMonitor;
<strong class="hl-keyword">import</strong> org.eclipse.gef.DefaultEditDomain;
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalViewer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditor {
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">final</strong> <strong class="hl-keyword">static</strong> String ID = <strong class="hl-string"><em style="color:red">"gef.tutorial.step.ui.DiagramEditor"</em></strong>;<em class="hl-comment" style="color: silver">// &#25105;&#20204;&#35201;&#21152;&#19968;&#20010;</em>
		 																<em class="hl-comment" style="color: silver">// ID&#29992;&#20110;&#26631;&#31034;&#36825;&#20010;																			// Editor</em>

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() {
		
		<strong class="hl-keyword">this</strong>.getGraphicalViewer().setContents(<strong class="hl-keyword">new</strong> ContentsModel());

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> configureGraphicalViewer() {
		<strong class="hl-keyword">super</strong>.configureGraphicalViewer();
		GraphicalViewer viewr;	
		viewr=<strong class="hl-keyword">this</strong>.getGraphicalViewer();
		viewr.setEditPartFactory(<strong class="hl-keyword">new</strong> PartFactory());
	}

	<strong class="hl-keyword">public</strong> DiagramEditor() {
		<em class="hl-comment" style="color: silver">/*
		 * Editing domain&#31649;&#29702;&#21629;&#20196;&#22534;&#26632; command stack&#12289;&#24037;&#20855;&#26465; palette viewer &#31561;&#12290;Editing
		 * domain&#36824;&#36215;&#36890;&#30693;&#22312; Graphicalviewer &#20013;&#29983;&#25104;&#30340; SWT &#20107;&#20214;&#30340;&#20316;&#29992;&#12290;&#22240;&#27492;&#65292;&#19968;&#23450;&#35201;&#24314;&#31435;&#19968;&#20010; Editing
		 * domain&#12290;&#36825;&#37324;&#65292;&#22312;
		 * DiagramEditor&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#20351;&#29992;setEditDomain()&#20989;&#25968;&#35774;&#32622;&#20102;&#19968;&#20010;org.eclipse.gef
		 * .DefaultEditDomain&#20316;&#20026; Editing domain&#12290;&#25105;&#20204;&#35201;&#35828;&#26126;&#30340;&#26159;&#65306;&#34429;&#28982;&#23545; GEF&#26469;&#35762;&#19968;&#20010; Editing
		 * domain&#24517;&#39035;&#26159;&#35774;&#32622;&#25104; Graphicalviewer &#65288;&#30452;&#30333;&#28857;&#35828;&#23601;&#26159;&#21487;&#30011;&#22270;&#30340;&#65289; &#65292;&#22240;&#20026;&#25105;&#20204;&#30340; DiagramEditor&#26159;&#20174;
		 * GraphicalEditor &#27966;&#29983;&#30340;&#65292;&#25152;&#20197;&#36825;&#37324;&#30340;&#32570;&#30465;&#30340; Editing domain&#8212;DefaultEditDomain
		 * &#20854;&#20869;&#22312;&#26159;&#34987;&#35774;&#32622;&#25104; Graphicalviewer&#30340;&#12290; &#35828;&#26126;&#65306;&#22914;&#26524;&#25105;&#20204;&#25226; Graphicalviewer &#25918;&#22312; Editor &#20013;&#26102;&#65292;&#25105;&#20204;&#20351;&#29992;
		 * DefaultEditDomain&#12290;&#22914;&#26524;&#25226; Graphicalviewer&#25918;&#22312;View&#20013;&#25110;&#32773;&#25918;&#22312;&#19968;&#20010;&#29420;&#31435;&#30340;Eclipse&#24212;&#29992;&#20013;&#26102;&#65292;
		 * &#25105;&#20204;&#35201;&#29992;org.eclipse.gef.EditDomain &#20316;&#20026; Editing domain&#12290;
		 */</em>
		<strong class="hl-keyword">this</strong>.setEditDomain(<strong class="hl-keyword">new</strong> DefaultEditDomain(<strong class="hl-keyword">this</strong>));
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> doSave(IProgressMonitor arg0) {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

}

    </pre><p>  &#22914;&#26524;&#20320;&#24895;&#24847;&#36816;&#34892;&#19968;&#19979;&#65292;&#20250;&#21457;&#29616;&#36825;&#26102; Diagram Editor&#19978;&#36824;&#26159;&#27809;&#26174;&#31034;&#20219;&#20309;&#22270;&#24418;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#35201;&#35753;&#23427;&#26174;&#31034;&#22270;
        &#24418;&#12290; </p></div><div class="section" title="&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2611"></a>&#20026;&#22270;&#24418;&#38598;&#28155;&#21152;&#23376;&#38598; </h2></div></div></div><p>  &#22914;&#26524;&#25105;&#20204;&#19981;&#20165;&#20165;&#26159;&#32472;&#21046; Hello World&#30340;&#35805;&#65292;&#37027;&#20165;&#26377; HelloModel &#26159;&#19981;&#22815;&#30340;&#12290;&#25105;&#20204;&#36824;&#35201;&#26377;&#19968;&#20010;&#19978;&#23618;&#27169;&#22411;&#65292;
        &#23601;&#26159;&#21069;&#38754;&#21019;&#24314;&#30340;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel&#12290;&#22270;&#24418;&#38598;&#27169;&#22411; ContentsModel &#21644;&#22270;&#24418; HelloModel &#20043;&#38388;&#26159;&#29238;&#23376;&#20851;
        &#31995;&#65288;&#19981;&#26159;&#32487;&#25215;&#21644;&#27966;&#29983;&#20851;&#31995;&#65292;&#32780;&#26159;&#19968;&#20010;&#21253;&#21547;&#22810;&#20010;&#30340;&#20851;&#31995;&#65289; &#12290;GEF &#25552;&#20379;&#20102;&#19968;&#20010;&#26694;&#26550;&#26469;&#23454;&#29616;&#36825;&#20010;&#29238;&#23376;&#20851;&#31995;&#65292;&#21518;&#38754;
        &#25105;&#20204;&#20250;&#35848;&#21040;&#12290;&#36825;&#37324;&#25105;&#20204;&#20808;&#20805;&#23454;&#36825;&#20010;&#29238;&#27169;&#22411;&#12290; </p></div><div class="section" title="&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2618"></a>&#25226; ContentsModel &#21464;&#25104;&#29238;&#27169;&#22411; </h2></div></div></div><p> 
        &#22312; GEF &#20013;&#65292;&#32463;&#24120;&#20250;&#38543;&#30528;&#24212;&#29992;&#30340;&#38656;&#27714;&#65292;&#29238;&#27169;&#22411;&#20250;&#21464;&#25104;&#23376;&#27169;&#22411;&#12290;&#35692;&#22914;&#22312;&#19978;&#19968;&#22238;&#20013;&#30340; HelloModel &#24403;&#26102;&#36824;&#26159;
        &#29238;&#27169;&#22411;&#21602;&#65292; &#21040;&#36825;&#37324;&#22914;&#26524;&#25105;&#20204;&#38656;&#35201;&#33457;n&#20010;Hello World&#30340;&#26102;&#20505;&#65292; &#25105;&#20204;&#23601;&#38656;&#35201;&#22312;&#20854;&#19978;&#24314;&#19968;&#20010;&#29238;&#27169;&#22411;ContentsModel&#12290;
        HelloModel&#23601;&#35201;&#34987;&#28155;&#21152;&#21040;&#36825;&#20010;&#29238;&#27169;&#22411;&#20013;&#12290;&#33258;&#28982; ContentsModel &#19981;&#20250;&#21482;&#26377;HelloModel&#36825;&#19968;&#20010;&#23401;&#23376;&#12290; &#22312; ContentsModel &#20013;&#65292;&#25105;&#20204;&#35201;&#26377;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#19968;&#20010;&#21015;&#34920; child &#26469;&#20445;&#23384;&#23376;&#27169;&#22411;</p><p>&#19968;&#20010;&#28155;&#21152;&#23376;&#27169;&#22411;&#30340;&#26041;&#27861;&#65307;</p><p>&#19968;&#20010;&#33719;&#24471;&#23376;&#27169;&#22411;&#30340;&#26041;&#27861;</p></li></ul></div><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.util.ArrayList;
<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel {
	<strong class="hl-keyword">private</strong> List children=<strong class="hl-keyword">new</strong> ArrayList();<em class="hl-comment" style="color: silver">//&#23376;&#27169;&#22411;&#21015;&#34920;</em>
	<strong class="hl-tag" style="color: blue">/**
	 * &#28155;&#21152;&#23376;&#27169;&#22411;
	 * @param child
	 */</strong>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addChild(Object child){
		<strong class="hl-keyword">this</strong>.children.add(child);
	}
	<strong class="hl-tag" style="color: blue">/**
	 * &#33719;&#24471;&#23376;&#27169;&#22411;
	 * @return
	 */</strong>
	<strong class="hl-keyword">public</strong> List getChildren() {
		<strong class="hl-keyword">return</strong> children;
	}

}

      </pre></div><div class="section" title="&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2635"></a>&#25226; ContentsEditPart&#20063;&#21464;&#25104;&#29238;&#27169;&#22411; </h2></div></div></div><p> 
        &#35760;&#24471;&#21069;&#38754;&#25105;&#20204;&#35828;&#36807; GEF&#26377;&#20010;&#26694;&#26550;&#21487;&#20197;&#20445;&#35777;&#29238;&#23376;&#20851;&#31995;&#12290;&#20026;&#20102;&#20351;&#19978;&#38754;&#30340;&#29238;&#23376;&#20851;&#31995;&#33021;&#22815;&#39034;&#21033;&#24037;&#20316;&#65292;&#38656;&#35201;&#22312;&#29238;
        &#20146;&#65288;&#36825;&#37324;&#26159; ContentsModel&#65289;&#30340; EditPart&#65288;&#36825;&#37324;&#26159; ContentsEditPart&#65289;&#20013;&#65292;&#22312; getModelChildren()&#26041;&#27861;&#65288;&#20174;
        AbstractEditPart &#32487;&#25215;&#32780;&#26469;&#65289;&#20013;&#36820;&#22238;&#23376;&#27169;&#22411;&#30340;&#21015;&#34920; List&#12290;&#35828;&#30333;&#19968;&#28857;&#65292;&#23601;&#26159;&#35828; ContentsModel&#26082;&#28982;&#24403;&#29241;&#20102;&#65292;&#37027;&#23427;
        &#23545;&#24212;&#30340; ContentsEditPart &#20063;&#35201;&#25215;&#25285;&#36215;&#24403;&#29241;&#30340;&#36131;&#20219;&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;

<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> List getModelChildren() {
		<strong class="hl-keyword">return</strong> ((ContentsModel)<strong class="hl-keyword">this</strong>.getModel()).getChildren();
	}

}

    </pre><p>&#22909;&#20102;&#65292;&#20107;&#21040;&#22914;&#20170;&#25165;&#25226;&#29238;&#23376;&#20851;&#31995;&#30830;&#23450;&#12290; </p></div><div class="section" title="&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2646"></a>&#22312; Graphicalviewer&#20013;&#26174;&#31034;&#19968;&#19979;&#29238;&#23376;&#20851;&#31995;</h2></div></div></div><p>&#26082;&#28982;&#29238;&#23376;&#20851;&#31995;&#24050;&#32463;&#30830;&#23450;&#65292;&#20063;&#32654;&#21270;&#20102; Hello World&#65292;&#37027;&#35753;&#25105;&#20204;&#22312; Graphicalviewer &#20013;&#26174;&#31034;&#19968;&#19979;&#21543;&#12290;&#27880;&#24847;&#65292;&#22312;
        &#36825;&#37324;&#26174;&#31034;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#25165;&#30693;&#36947;&#21407;&#26469; HelloModel &#30495;&#30340;&#26159; ContentsModel &#30340;&#20799;&#23376;&#65292;&#22240;&#20026; HelloModel &#34987;&#21152;&#21040;
        ContentsModel &#37324;&#12290;&#36825;&#20010;&#28155;&#21152;&#36807;&#31243;&#26159;&#22312; initializeGraphicalViewer&#26041;&#27861;&#20013;&#23436;&#25104;&#30340; </p><pre class="programlisting"><strong class="hl-keyword">package</strong> gef.tutorial.step.ui; 
 
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel; 
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel; 
<strong class="hl-keyword">import</strong> gef.tutorial.step.parts.PartFactory; 
 
<strong class="hl-keyword">import</strong> org.eclipse.core.runtime.IProgressMonitor; 
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.DefaultEditDomain; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalViewer; 
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor; 
 
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditor { 
...........
 
  <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() { 
 	ContentsModel parent = <strong class="hl-keyword">new</strong> ContentsModel(); 
	    HelloModel child1 = <strong class="hl-keyword">new</strong> HelloModel(); <em class="hl-comment" style="color: silver">// &#21019;&#24314;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	    parent.addChild(child1); <em class="hl-comment" style="color: silver">// &#28155;&#21152;HelloModel&#21040;ContentsModel&#20013; </em>
	    <strong class="hl-keyword">this</strong>.getGraphicalViewer().setContents(parent); 
 } 
 
 &#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;. 
 }</pre><p>  &#22914;&#26524;&#20877;&#36816;&#34892;&#19968;&#19979;&#65292;&#23601;&#20250;&#21457;&#29616;&#19979;&#38754;&#30340;&#25928;&#26524;&#12290;&#38752;&#65292;&#36824;&#26159;&#20160;&#20040;&#20063;&#27809;&#26377;&#12290;&#24819;&#24819;&#25105;&#20204;&#30340;&#31243;&#24207;&#21644;&#20197;&#21069;&#26377;&#20160;&#20040;&#21464;&#21270;&#21602;&#65292;
        &#37027;&#20123;&#25913;&#21464;&#27169;&#22411;&#30340;&#22320;&#26041;&#25105;&#20204;&#19981;&#35201;&#21435;&#24819;&#65292;&#22240;&#20026;&#37027;&#19981;&#24433;&#21709;&#22270;&#24418;&#26174;&#31034;&#12290;&#21644;&#22270;&#24418;&#30456;&#20851;&#30340;&#25913;&#21464;&#26159;&#65306;&#25105;&#20204;&#29616;&#22312;&#24320;&#22987;&#26174;&#31034;
        ContentsModel &#20102;&#65292;&#23427;&#23545;&#24212;&#30340; ContentsEditPart &#20013;&#35774;&#32622;&#20102;&#22270;&#23618;&#12290; </p><div class="mediaobject"><img src="../../images/step4/step4-2.jpg"></div><p>&#32780;&#22914;&#26524;&#25105;&#20204;&#35753; createFigure &#26041;&#27861;&#36820;&#22238; null&#65306;</p><div class="mediaobject"><img src="../../images/step4/step4-3.jpg"></div></div></div><div class="article" title="&#24067;&#23616;&#31649;&#29702;&#22120;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2665"></a>&#24067;&#23616;&#31649;&#29702;&#22120; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2672">&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2681">&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2690">&#24212;&#29992;&#32422;&#26463; </a></span></dt><dt><span class="section"><a href="#d0e2699">&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </a></span></dt></dl></div><p> GEF &#24212;&#29992;&#20351;&#29992;&#30340;&#26159; Draw2D &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#65292;&#25152;&#20197; GEF &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#21644; Draw2D &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#20960;&#20046;&#30456;
        &#21516;&#12290;&#20294;&#26159;&#65292;GEF&#20013;&#22270;&#24418;&#22312;&#35270;&#22270;&#20013;&#30340;&#20301;&#32622;&#21644;&#22270;&#24418;&#30340;&#22823;&#23567;&#26159;&#30001;&#20854;&#27169;&#22411;&#23450;&#20041;&#30340;&#65292;&#22240;&#27492;&#20182;&#20204;&#26377;&#28857;&#19981;&#21516;&#12290;&#20851;&#20110; Draw2D
        &#30340;&#24067;&#23616;&#31649;&#29702;&#22120;&#25105;&#20204;&#22312;&#20197;&#21518;&#30340;&#25945;&#31243;&#20013;&#20171;&#32461;&#12290; </p><div class="section" title="&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2672"></a>&#35774;&#32622;&#24067;&#23616;&#31649;&#29702;&#22120; </h2></div></div></div><p>&#24067;&#23616;&#31649;&#29702;&#22120;&#26377;&#24456;&#22810;&#31181;&#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#29992;&#19968;&#31181;&#65306;org.eclipse.draw2d.XYLayout&#12290;&#36825;&#31181;&#24067;&#23616;&#31649;&#29702;&#22120;&#20801;&#35768;&#22270;&#24418;&#33258;
    &#30001;&#22320;&#31227;&#21160;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;

<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Layer;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.XYLayout;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		Layer layer=<strong class="hl-keyword">new</strong> Layer();
		layer.setLayoutManager(<strong class="hl-keyword">new</strong> XYLayout());
		<strong class="hl-keyword">return</strong> layer;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> List getModelChildren() {
		<strong class="hl-keyword">return</strong> ((ContentsModel)<strong class="hl-keyword">this</strong>.getModel()).getChildren();
	}

}

      </pre></div><div class="section" title="&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2681"></a>&#22312;&#27169;&#22411;&#31867;&#20013;&#31649;&#29702;&#32422;&#26463; </h2></div></div></div><p>
      &#20026;&#20102;&#20351;&#29992;&#19978;&#38754;&#30340; XYLayout&#65292;&#38656;&#35201;&#35774;&#32622;&#19968;&#19979;&#34987;&#35813;&#24067;&#23616;&#31649;&#29702;&#22120;&#31649;&#29702;&#30340;&#22270;&#24418;&#23545;&#35937;&#30340;&#23610;&#23544;&#21644;&#20301;&#32622;&#31561;&#65292;&#36825;&#23601;&#26159;
      &#32422;&#26463; Constraint&#12290;&#20030;&#20010;&#20363;&#23376;&#21543;&#65292;&#22914;&#26524;&#20320;&#35201;&#22312;&#22270;&#24418;&#38598;&#20013;&#32472;&#21046;&#19968;&#20010;&#30697;&#24418;&#65292;&#37027;&#20320;&#23601;&#35201;&#26377;&#19968;&#20010;&#20301;&#32622;&#28857;&#65288;&#35692;&#22914;&#20320;&#35774;&#32622;
      &#24038;&#19978;&#28857;&#20316;&#20026;&#20301;&#32622;&#28857;&#65289;&#21644;&#19968;&#20010;&#23610;&#23544;&#65288;&#38271;&#21644;&#39640;&#65289; &#12290;&#20877;&#35828;&#30333;&#19968;&#28857;&#65292;&#32422;&#26463;&#23601;&#26159;&#25351;&#20986;&#22270;&#24418;&#22312;&#22270;&#24418;&#38598;&#20013;&#30340;&#20301;&#32622;&#21644;&#22823;&#23567;&#12290; 
      &#23545;&#22270;&#24418;&#38598; ContentsModel &#20013;&#30340;&#27599;&#20010;&#22270;&#24418;&#37117;&#35201;&#28155;&#21152;&#32422;&#26463;&#65292;&#22240;&#27492;&#32422;&#26463;&#34987;&#28155;&#21152;&#21040;&#20182;&#20204;&#30340;&#27169;&#22411;&#31867;&#20013;&#65288;&#35760;&#24471;&#25105;&#20204;
      &#21069;&#38754;&#35828;&#36807; Draw2D&#21644; GEF&#24067;&#23616;&#31649;&#29702;&#22120;&#30340;&#19981;&#21516;&#20043;&#22788;&#21543;&#65289; &#12290;&#36825;&#37324;&#25105;&#20204;&#21482;&#26377; Hello World &#19968;&#20010;&#22270;&#24418;&#31867;&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;
      &#22312; HelloModel &#20013;&#28155;&#21152;&#32422;&#26463;&#12290;&#25105;&#20204;&#36825;&#37324; HelloWorld &#26159;&#20889;&#22312; Label &#19978;&#65292;&#25152;&#20197;&#25105;&#20204;&#23601;&#32473;&#20986;&#19968;&#20010;&#30697;&#24418; Rectangle &#20316;
      &#20026;&#32422;&#26463;&#12290; 
      &#22312;&#27169;&#22411;&#20013;&#65292;&#32422;&#26463;&#26159;&#19968;&#20123;&#19982;&#23454;&#38469;&#19994;&#21153;&#26080;&#20851;&#30340;&#25104;&#21592;&#12290; 
  </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel {
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;
	<strong class="hl-keyword">private</strong> Rectangle constraint;<em class="hl-comment" style="color: silver">//&#32422;&#26463;</em>
	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	}

	<strong class="hl-keyword">public</strong> Rectangle getConstraint() {
		<strong class="hl-keyword">return</strong> constraint;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}
	
}

      </pre></div><div class="section" title="&#24212;&#29992;&#32422;&#26463;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2690"></a>&#24212;&#29992;&#32422;&#26463; </h2></div></div></div><p>&#26082;&#28982;&#24050;&#32463;&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#20102;&#32422;&#26463;&#65292;&#37027;&#20040;&#22312;&#20160;&#20040;&#22320;&#26041;&#25226;&#32422;&#26463;&#26045;&#21152;&#32473;&#22270;&#24418;&#21602;&#12290;GEF&#22312; AbstractEditPart &#31867;&#20013;&#25552;
        &#20379;&#20102; refreshVisuals()&#29992;&#20110;&#25226;&#32422;&#26463;&#26045;&#21152;&#32473;&#22270;&#24418;&#12290;&#22240;&#20026;&#25105;&#20204;&#26159;&#22312; HelloEditorPart &#20013;&#32472;&#22270;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;&#22312;
        HelloEditorPart &#20013;&#37325;&#36733;&#35813;&#26041;&#27861;&#65288;refreshVisuals &#26041;&#27861;&#19981;&#26159;&#40664;&#35748;&#23601;&#34987;&#37325;&#36733;&#30340;&#65289; &#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.ColorConstants;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.CompoundBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.IFigure;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.Label;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.LineBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.MarginBorder;
<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.parts.GraphicalEditor;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> IFigure createFigure() {
		HelloModel model=(HelloModel)<strong class="hl-keyword">this</strong>.getModel();
		Label label = <strong class="hl-keyword">new</strong> Label();
		label.setText(model.getText());
		<em class="hl-comment" style="color: silver">//&#36793;&#26694;</em>
		label.setBorder(<strong class="hl-keyword">new</strong> CompoundBorder(<strong class="hl-keyword">new</strong> LineBorder(),
				<strong class="hl-keyword">new</strong> MarginBorder(<span class="hl-number">3</span>)));
		<em class="hl-comment" style="color: silver">//&#32972;&#26223;&#39068;&#33394;</em>
		label.setBackgroundColor(ColorConstants.orange);
		<em class="hl-comment" style="color: silver">//&#19981;&#36879;&#26126;</em>
		label.setOpaque(true);

		<strong class="hl-keyword">return</strong> label;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> refreshVisuals() {
		Rectangle constraint=((HelloModel)<strong class="hl-keyword">this</strong>.getModel()).getConstraint();
		((GraphicalEditPart)getParent()).setLayoutConstraint(<strong class="hl-keyword">this</strong>, <strong class="hl-keyword">this</strong>.getFigure(), constraint);
	}

}

      </pre></div><div class="section" title="&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2699"></a>&#32472;&#21046;&#24102;&#32422;&#26463;&#30340;&#22270;&#24418; </h2></div></div></div><p> &#26368;&#21518;&#65292;&#25105;&#20204;&#22312;&#35270;&#22270;&#20013;&#30475;&#30475;&#28155;&#21152;&#32422;&#26463;&#20043;&#21518;&#30340;&#22270;&#24418;&#26159;&#20160;&#20040;&#26679;&#30340;&#25928;&#26524;&#12290;&#36825;&#37324;&#25105;&#20204;&#32472;&#21046;&#20102;&#19977;&#20010; Hello World &#22270; &#24418;&#65292;&#20182;&#20204;&#30340;&#32422;&#26463;&#65288;&#20854;&#23454;&#23601;&#26159;&#20182;&#20204;&#30340;&#20301;&#32622;&#21644;&#22823;&#23567;&#65292;&#30001;&#30697;&#24418;&#20915;&#23450;&#65289;&#20998;&#21035;&#26159;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Rectangle(0, 0, -1, -1) </p></li><li class="listitem"><p> Rectangle(30, 30, -1, -1) </p></li><li class="listitem"><p> Rectangle(10, 80, 80, 50) </p></li></ul></div><p> &#22823;&#23478;&#21487;&#33021;&#22855;&#24618;&#65292;&#20026;&#20160;&#20040;&#31532; 1 &#21644;&#31532;2&#20010;&#30697;&#24418;&#30340;&#38271;&#21644;&#23485;&#34987;&#35774;&#32622;&#20026;-1 &#21602;&#65292;&#36825;&#26679;&#21487;&#20197;&#20351;&#30697;&#24418;&#30340;&#23610;&#23544;&#38543;&#30528;&#37324;&#38754;&#25991; &#26412;&#30340;&#21464;&#21270;&#32780;&#21464;&#21270;&#65292;&#23601;&#26159;&#35828;&#36825;&#26679;&#30340;&#30697;&#24418;&#27491;&#22909;&#33021;&#21253;&#21547;&#25991;&#26412;&#12290;&#32780;&#23545;&#31532;
        3 &#20010;&#30697;&#24418;&#32780;&#35328;&#65292;&#22914;&#26524;&#37324;&#38754;&#30340;&#25991;&#26412;&#22826;&#38271;&#65292;&#23601;&#20250; &#26377;&#37096;&#20998;&#30475;&#19981;&#21040;&#20102;&#12290; &#22312; gef.tutorial.step.ui.DiagramEditor&#20013;&#65292;&#28155;&#21152;&#20195;&#30721;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">
<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initializeGraphicalViewer() {
		ContentsModel contents = <strong class="hl-keyword">new</strong> ContentsModel();

		HelloModel child1 = <strong class="hl-keyword">new</strong> HelloModel();
		child1.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">0</span>, <span class="hl-number">0</span>, -<span class="hl-number">1</span>, -<span class="hl-number">1</span>));
		contents.addChild(child1);

		HelloModel child2 = <strong class="hl-keyword">new</strong> HelloModel();
		child2.setText(<strong class="hl-string"><em style="color:red">"Welcome"</em></strong>);
		child2.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">30</span>, <span class="hl-number">30</span>, -<span class="hl-number">1</span>, -<span class="hl-number">1</span>));
		contents.addChild(child2);

		HelloModel child3 = <strong class="hl-keyword">new</strong> HelloModel();
		child3.setConstraint(<strong class="hl-keyword">new</strong> Rectangle(<span class="hl-number">10</span>, <span class="hl-number">80</span>, <span class="hl-number">80</span>, <span class="hl-number">50</span>));
		contents.addChild(child3);

		getGraphicalViewer().setContents(contents);
	}         
     </pre><p>
 </p><p>&#22909;&#20102;&#65292;&#26368;&#21518;&#30340;&#25928;&#26524;&#23601;&#26159;&#65306; </p><div class="mediaobject"><img src="../../images/step5/step5-1.jpg"></div></div></div><div class="article" title="&#22270;&#24418;&#25805;&#20316;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2725"></a>&#22270;&#24418;&#25805;&#20316; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2730">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e2778">&#21019;&#24314; editing policy</a></span></dt><dt><span class="section"><a href="#d0e2787">&#23433;&#35013; editing policy </a></span></dt><dt><span class="section"><a href="#d0e2814">Command</a></span></dt><dt><span class="section"><a href="#d0e2825">&#20462;&#25913; Editing Policy </a></span></dt></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2730"></a>&#20869;&#23481;&#25552;&#35201;</h2></div></div></div><p>&#20869;&#23481;&#25552;&#35201;&#65306; </p><p>&#65288;1&#65289;&#20351;&#29992; XYLayout &#24067;&#23616; </p><p>&#65288;2&#65289;Edit &#25805;&#20316;&#22270;&#24418;&#65292;&#35692;&#22914;&#36890;&#36807;&#21477;&#26564;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418;</p><p> &#65288;3&#65289;&#21019;&#24314;&#21644;&#23433;&#35013; editing policy&#65292;&#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418; </p><p>&#65288;4&#65289;&#21019;&#24314;&#21644;&#25191;&#34892;&#21629;&#20196; Command&#65292;&#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#65292;&#31227;&#21160;&#22270;&#24418; </p><p>&#65288;5&#65289;Undo&#21644; Redo &#30340;&#25805;&#20316; </p><p>          &#36825;&#31456;&#24320;&#22987;&#28041;&#21450;&#21040; Policy&#12289;Command&#12289;Role &#31561;&#27010;&#24565;&#20102;&#12290;&#24403;&#27169;&#22411;&#25913;&#21464;&#26102;&#65288;&#35692;&#22914;&#36825;&#37324;&#30340; HelloWorld &#25913;&#21464;&#23610;&#23544; &#25110;&#25913;&#21464;&#20301;&#32622;&#65289; &#65292;&#35201;&#20135;&#29983;&#35831;&#27714;
        Request(org.eclipse.gef.Request)&#65292;&#28982;&#21518;&#36825;&#35831;&#27714;&#23601;&#21457;&#36865;&#32473;&#27169;&#22411;&#23545;&#24212;&#30340; EditPart&#65288;&#21069; &#38754;&#35762;&#36807;&#19968;&#20010;&#27169;&#22411;&#23601;&#23545;&#24212;&#19968;&#20010;EditPart&#65289; &#65292;
        &#22312;EditPart&#20013;&#23433;&#35013;&#26377;Editing Policy&#65292; &#24403;&#28982;&#22312;EditPart&#20013;&#30340;Editing Policy &#19981;&#21482;&#19968;&#20010;&#65292;&#25152;&#20197;&#24212;&#35813;&#26159; Editing Policies&#12290;Editing
        Policy&#30340;&#20316;&#29992;&#23601;&#26159;&#31649;&#29702;&#19968;&#20123; Commond&#21629;&#20196;&#65292;&#32780;&#36825;&#20123;&#21629;&#20196;&#23601; &#26159;&#28385;&#36275;&#19978;&#38754;&#30340;&#35831;&#27714;&#30340;&#12290;Editing Policy&#22312; Eclipse&#30340;GEF&#24320;&#21457;&#25351;&#21335;&#37096;&#20998;&#26377;&#23545;&#24212;&#34920;&#12290; </p><p>         &#20026;&#20102;&#20351;&#22823;&#23478;&#26126;&#30333;&#30340;&#24555;&#28857;&#65292;&#25105;&#24819;&#20030;&#19968;&#20010;&#19981;&#24688;&#24403;&#30340;&#20363;&#23376;&#26469;&#35828;&#26126;&#20182;&#20204;&#20043;&#38388;&#30340;&#20851;&#31995;&#12290;&#35692;&#22914;&#35828;&#25105;&#33258;&#24049;&#23601;&#26159;&#19968;&#20010;&#27169; &#22411; Model&#65292;&#25105;&#32769;&#23110;&#26159;&#23545;&#24212;&#20110;&#25105;&#30340; EditPart&#65288;&#25511;&#21046;&#22120;&#65289;
        &#12290;&#25105;&#24819;&#20080;&#20010;&#25968;&#30721;&#30456;&#26426;&#65288;Model changing&#65289;&#21602;&#65292;&#37027;&#25105;&#23601;&#20135; &#29983;&#20102;&#30456;&#20851;&#30340;&#35831;&#27714; Request&#65292;&#36825;&#20123;&#35831;&#27714;&#21457;&#36865;&#32473;&#25105;&#32769;&#23110; EditPart&#65292;&#24403;&#28982;&#25105;&#23478;&#26377;&#24456;&#22810; Policies
        &#35268;&#30697;&#65292;&#36825;&#20123;&#35268;&#30697;&#26159;&#25105; &#32769;&#23110;&#25484;&#25569;&#65288;&#30456;&#24403;&#20110;&#25226; Policies &#23433;&#35013;&#21040; EditPart&#65289; &#65292;&#25105;&#32769;&#23110;&#19968;&#30475;&#25105;&#23478;&#27491;&#22909;&#26377;&#30456;&#20851;&#30340; Policy&#65292;&#23601;&#25226;&#36825;&#20010; Policy &#35466; &#22312;&#32440;&#19978;&#25343;&#32473;&#25105;&#65288;&#27966;&#29983;&#19968;&#20010;
        Policy&#31867;&#65289; &#12290; &#65288;&#27880;&#24847;&#36825;&#20010;Policy&#21487;&#19981;&#20809;&#31649;&#29702;&#20080;&#30456;&#26426;&#30340;&#21629;&#20196; BuyCommand&#65292;&#21487;&#33021;&#36824;&#21253; &#25324;&#22914;&#20309;&#22788;&#29702;&#25105;&#21407;&#26469;&#30340;&#30456;&#26426; DeleteCommand &#31561;&#31561;&#12290;
        &#65289;&#28982;&#21518;&#23601;&#35828;&#20320;&#21435;&#20080;&#21543;&#65292;&#20808;&#25191;&#34892; BuyCommand &#21629;&#20196;&#12290;&#25105;&#24403;&#28982; &#26377;&#25191;&#34892;&#21629;&#20196;&#30340;&#19968;&#31995;&#21015;&#27493;&#39588;&#20102;&#65288;&#35692;&#22914;&#35828;&#27604;&#20215;&#65292;&#20355;&#20215;&#31561;&#65289; &#65292;&#28982;&#21518;&#23601;&#20048;&#39072;&#39072;&#20080;&#21040;&#30456;&#26426;&#20102;&#12290; </p><p>       &#22909;&#65292;&#19981;&#31649;&#20320;&#26126;&#30333;&#19981;&#26126;&#30333;&#65292;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#19968;&#19979;&#26412;&#33410;&#21019;&#24314;&#30340;&#31867;&#21543;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#35201;&#26377;&#35268;&#30697;&#65292;&#23601;&#26159; Policy&#65307;</p></li><li class="listitem"><p>&#28982;&#21518;&#25226;&#19968;&#20010;&#25110;&#22810;&#20010; Policy &#23433;&#35013;&#32473; EditPart </p></li><li class="listitem"><p>&#28982;&#21518;&#25105;&#20204;&#35201;&#26681;&#25454;&#35831;&#27714;&#21019;&#24314;&#21629;&#20196; Command  </p></li><li class="listitem"><p> &#28982;&#21518;&#22312;&#27599;&#20010; Policy&#30340;&#26694;&#26550;&#19979;&#25191;&#34892;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#21629;&#20196;</p></li></ul></div><p>       &#24403;&#28982;&#65292;&#25191;&#34892;&#23436;&#21629;&#20196;&#30340;&#27169;&#22411;&#28385;&#36275;&#20102;&#35831;&#27714;&#65292;&#21457;&#29983;&#20102;&#25913;&#21464;&#65292;&#23601;&#35201;&#36890;&#30693;&#25511;&#21046;&#22120; EditPart&#65292;&#21542;&#21017;&#25511;&#21046;&#22120;&#19981;&#30693;&#36947;&#27169;
    &#22411;&#25913;&#21464;&#21602;&#65292;&#23601;&#26080;&#27861;&#36890;&#30693;&#35270;&#22270;&#26469;&#27491;&#30830;&#26174;&#31034;&#12290;&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#20080;&#20102;&#30456;&#26426;&#21518;&#23601;&#35201;&#36890;&#30693;&#32769;&#23110;&#19968;&#19979;&#65292;&#25105;&#24050;&#32463;&#20080;&#20102;&#12290; &#33267;&#20110;&#22914;&#20309;&#36890;&#30693;&#65292;&#25105;&#20204;&#21518;&#38754;&#20877;&#35828;&#12290; </p><div class="mediaobject"><img src="../../images/step6/step6-1.jpg"></div><p>&#20026;&#20102;&#25913;&#21464;&#25105;&#20204;&#22270;&#24418;&#30340;&#23610;&#23544;&#21644;&#31227;&#21160;&#22270;&#24418;&#65292;&#25105;&#20204;&#37117;&#21019;&#24314;&#21644;&#20462;&#25913;&#20102;&#21738;&#20123;&#31867;&#21602;&#65311;&#30475;&#19979;&#22270;&#65306; </p><div class="mediaobject"><img src="../../images/step6/step6-2.jpg"></div><p>  &#33267;&#20110;&#35828;&#25105;&#24590;&#20040;&#30693;&#36947;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#35201;&#21019;&#24314; XYLayoutEditPolicy&#32780;&#19981;&#26159;&#20854;&#20182;&#30340; Policy&#21602;&#65292;&#37027;&#35828;&#26126;&#20320;&#27809;&#22909;&#22909;
        &#30475; Eclipse &#22312;&#32447;&#24110;&#21161;&#30340; GEF Programmer's Guide&#12290;GEF&#30340; EditPolicy&#21253;&#21547;&#22312; org.eclipse.gef.editpolicies&#21253;&#20013;&#12290;  </p></div><div class="section" title="&#21019;&#24314; editing policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2778"></a>&#21019;&#24314; editing policy</h2></div></div></div><p>&#36825;&#37324;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010; CustomXYLayoutEditPolicy&#65292;&#27966;&#29983;&#33258; org.eclipse.gef.editpolicies.XYLayoutEditPolicy&#12290;
    &#20195;&#30721;&#20026;&#65306;  </p><pre class="programlisting">
          <strong class="hl-keyword">package</strong> gef.tutorial.step.policies;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editpolicies.XYLayoutEditPolicy;
<strong class="hl-keyword">import</strong> org.eclipse.gef.requests.CreateRequest;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomXYLayoutEditPolicy <strong class="hl-keyword">extends</strong> XYLayoutEditPolicy {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command getCreateCommand(CreateRequest request) {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>
		<strong class="hl-keyword">return</strong> null;
	}

}

    </pre></div><div class="section" title="&#23433;&#35013; editing policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2787"></a>&#23433;&#35013; editing policy </h2></div></div></div><p>&#22240;&#20026;&#25105;&#20204;&#21069;&#38754;&#22312;ContentsEditPart&#20013;&#35774;&#32622;&#30340;XYLayout&#65292; &#25152;&#20197;&#25105;&#20204;&#22312;ContentsEditPart&#30340;createEditPolicies 
    &#26041;&#27861;&#20013;&#23433;&#35013; CustomXYLayoutEditPolicy&#12290; </p><p>&#22312;ContentsEditPart&#28155;&#21152;&#19968;&#19979;&#20195;&#30721;</p><pre class="programlisting">
        
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() {
		installEditPolicy(EditPolicy.LAYOUT_ROLE, <strong class="hl-keyword">new</strong> CustomXYLayoutEditPolicy());
	}
    </pre><p>  &#27880;&#24847;&#65292; &#19978;&#38754; installEditPolicy&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#20010;&#23383;&#31526;&#20018;&#21464;&#37327;&#65292; &#23427;&#25351;&#23450;&#20102;&#23433;&#35013;&#30340; editing policy&#30340;&#35282;&#33394; Role&#12290;
        &#36825;&#37324;&#25105;&#20204;&#29992;&#20102; EditPolicy&#30340;&#19968;&#20010;&#24120;&#37327;&#26469;&#34920;&#31034;&#36825;&#20010; editing policy&#30340;&#35282;&#33394;&#12290;&#20043;&#25152;&#20197;&#35774;&#32622;&#36825;&#20010;&#21464;&#37327;&#26159;&#22240;&#20026;&#65306;&#19968;&#20010;
        EditPart &#21487;&#20197;&#23433;&#35013;&#24456;&#22810; editing policies&#65292;&#22914;&#26524;&#20182;&#20204;&#30340;&#35282;&#33394;&#37117;&#30456;&#21516;&#65292;&#23601;&#26159;&#36825;&#20010;&#23383;&#31526;&#20018;&#21442;&#25968;&#30456;&#21516;&#65292;&#37027;&#20040;&#23601;&#21482;&#26377;&#26368;
        &#21518;&#23433;&#35013;&#30340;&#19968;&#20010; policy &#26159;&#26377;&#25928;&#30340;&#12290;&#20854;&#23454;&#36825;&#20010;&#23383;&#31526;&#20018;&#21464;&#37327;&#21487;&#20197;&#20026;&#20219;&#24847;&#20540;&#65292;&#29992; EditPolicy &#30340;&#24120;&#37327;&#23601;&#26159;&#20026;&#20102;&#32479;&#19968;&#12289;
        &#28165;&#26970;&#12290;&#19981;&#20449;&#20320;&#21487;&#20197;&#25913;&#20026; installEditPolicy(&#8220;&#22815;&#26085;&#30340;&#23567;&#26085;&#26412;&#8221;, new CustomXYLayoutEditPolicy());&#35797;&#35797;&#12290; </p><p>&#22914;&#26524;&#23433;&#35013;&#20102; CustomXYLayoutEditPolicy&#65292;&#23601;&#21487;&#20197;&#36873;&#25321;&#22270;&#24418;&#30340;&#21477;&#26564;(handler)&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step6/step6-3.jpg"></div><p>&#22914;&#26524;&#25105;&#20204;&#25302;&#21160;&#21477;&#26564;&#25913;&#21464;&#23610;&#23544;&#25110;&#32773;&#36873;&#25321;&#22270;&#24418;&#25913;&#21464;&#20301;&#32622;&#65292;&#20250;&#21457;&#29616;&#25105;&#20204;&#26410;&#36930;&#12290;&#36825;&#26159;&#22240;&#20026;&#25105;&#20204;&#26681;&#26412;&#27809;&#26377;&#25191;&#34892;&#20219;
        &#20309;&#21629;&#20196;&#21435;&#20570;&#36825;&#20123;&#20107;&#24773;&#65292;&#32780;&#26159;&#25105;&#20204;&#21487;&#20197;&#20570;&#36825;&#20123;&#20107;&#24773;&#20102;&#12290; 
    </p><div class="mediaobject"><img src="../../images/step6/step6-4.jpg"></div><p> 
        &#22312;&#25105;&#20204;&#21019;&#24314;&#25913;&#21464;&#22270;&#24418;&#22823;&#23567;&#21644;&#23610;&#23544;&#30340;&#21629;&#20196;&#21069;&#65292;&#20320;&#26159;&#19981;&#26159;&#32435;&#38391;&#25105;&#20204;&#19978;&#38754;&#25302;&#21160;&#21477;&#26564;&#21644;&#25302;&#21160;&#22270;&#24418;&#21040;&#24213;&#20135;&#29983;&#20102;&#20160;
        &#20040;&#35831;&#27714; Request &#21602;&#65311;&#22914;&#26524;&#20320;&#24819;&#30693;&#36947;&#30340;&#35805;&#65292;&#21487;&#20197;&#22312; CustomXYLayoutEditPolicy &#20013;&#37325;&#36733; getCommand &#26041;&#27861;&#65292;&#22312;
        &#25511;&#21046;&#21488;&#25171;&#21360;&#20986;&#30456;&#24212;&#30340;&#35831;&#27714;&#12290; </p><pre class="programlisting">
   <strong class="hl-keyword">public</strong> Command getCommand(Request request) { 
    System.out.println(request.getType()); 
    <strong class="hl-keyword">return</strong> <strong class="hl-keyword">super</strong>.getCommand(request); 
  }         
    </pre></div><div class="section" title="Command"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2814"></a>Command</h2></div></div></div><p>  &#20854;&#23454;&#25105;&#20204;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#21644;&#31227;&#21160;&#22270;&#24418;&#20301;&#32622;&#34429;&#28982;&#26159;&#20004;&#20010;&#35831;&#27714;&#65288;&#20998; &#21035;&#23545;&#24212;&#20110;
        RequestConstants#REQ_RESIZE_CHILDREN &#21644; RequestConstants#REQ_MOVE_CHILDREN&#65289; &#65292;&#20294;&#26159;&#20182;&#20204;&#37117;
        &#26159;&#21644;&#22270;&#24418;&#30340;&#32422;&#26463;&#30456;&#20851;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#22312;&#26032;&#21019;&#24314;&#19968;&#20010;&#25913;&#21464;&#32422;&#26463;&#30340;&#31867; ChangeConstaintCommand &#23601;&#34892;&#20102;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ChangeConstraintCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<strong class="hl-keyword">private</strong> Rectangle constraint;


	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		helloModel.setConstraint(constraint);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setModel(Object model) {
		<strong class="hl-keyword">this</strong>.helloModel = (HelloModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}

	

}

    </pre><p>&#27880;&#24847;&#65292;&#19978;&#38754;&#30340; execute()&#26041;&#27861;&#24456;&#37325;&#35201;&#65292;&#23601;&#26159;&#23427;&#25191;&#34892;&#21629;&#20196;&#30340;&#12290; </p></div><div class="section" title="&#20462;&#25913; Editing Policy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2825"></a>&#20462;&#25913; Editing Policy </h2></div></div></div><p>  &#21019;&#24314;&#20102;&#21069;&#38754;&#30340;&#21629;&#20196;&#65292;&#23601;&#35201;&#22312; Editing Policy &#30340;&#26694;&#26550;&#19979;&#36816;&#34892;&#21629;&#20196;&#20102;&#12290;&#25105;&#20204;&#30340; XYLayoutEditPolicy &#30340;
        getCommand &#26041;&#27861;&#24471;&#21040;&#30340;&#35831;&#27714;&#31867;&#22411;&#26159; REQ_MOVE_CHILDREN &#25110; REQ_RESIZE_CHILDREN&#26102;&#65292;&#23601;&#20250;&#25191;&#34892;
        createChangeConstraintCommand &#26041;&#27861;&#12290;&#25152;&#20197;&#25105;&#20204;&#30340; ChangeConstaintCommand &#35201;&#25918;&#22312;&#36825;&#20010;&#26041;&#27861;&#20013;&#25191;&#34892;&#12290; </p><p>XYLayoutEditPolicy &#28155;&#21152;&#20195;&#30721;&#22914;&#19979;</p><pre class="programlisting">     
  	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command createChangeConstraintCommand(EditPart child,
			Object constraint) {
		ChangeConstraintCommand command = <strong class="hl-keyword">new</strong> ChangeConstraintCommand();
		command.setModel(child.getModel());
		command.setConstraint((Rectangle) constraint);
		<strong class="hl-keyword">return</strong> command;
		}</pre><p>  &#23436;&#25104;&#19978;&#38754;&#30340;&#24037;&#20316;&#65292;&#36816;&#34892;&#19968;&#19979;&#21543;&#65292;&#30475;&#30475;&#33021;&#19981;&#33021;&#25913;&#21464;&#22270;&#24418;&#23610;&#23544;&#21644;&#20301;&#32622;&#20102;&#12290;&#36824;&#26159;&#19981;&#33021;&#65281; &#65281; &#65281; &#65281;&#21482;&#23601;&#26159;&#25105;&#20204;&#21069;&#38754;
        &#35828;&#30340;&#65306;&#27169;&#22411;&#34429;&#28982;&#25913;&#21464;&#20102;&#65292;&#20294;&#26159;&#35270;&#22270;&#24182;&#19981;&#30693;&#36947;&#65292;&#25152;&#20197;&#35201;&#36890;&#30693; EditPart &#27169;&#22411;&#24050;&#32463;&#25913;&#21464;&#20102;&#65292;&#20877;&#30001; EditPart &#25913;&#21464;&#35270;
        &#22270;&#12290;&#36825;&#23601;&#28041;&#21450;&#21040;&#20197;&#21518;&#32463;&#24120;&#29992;&#21040;&#30340;&#30417;&#21548;&#65288;Listener&#65289;&#26426;&#21046;&#12290; </p></div></div><div class="article" title="&#30417;&#21548;&#27169;&#22411;&#25913;&#21464;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2838"></a>&#30417;&#21548;&#27169;&#22411;&#25913;&#21464; </h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2843">&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e2859">&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </a></span></dt><dt><span class="section"><a href="#d0e2877">Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </a></span></dt></dl></div><div class="section" title="&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2843"></a>&#22312;&#27169;&#22411;&#20013;&#35774;&#32622;&#30417;&#21548;&#22120;</h2></div></div></div><p>&#27169;&#22411;&#26377;&#36131;&#20219;&#25226;&#33258;&#24049;&#30340;&#25913;&#21464;&#36890;&#30693; EditPart&#65292;&#22240;&#20026;&#23545;&#25152;&#26377;&#30340;&#27169;&#22411;&#37117;&#35201;&#36890;&#30693;&#23545;&#24212;&#30340; EditPart&#65292;&#25152;&#20197;&#21019;&#24314;&#19968;&#20010;&#25277;
        &#35937;&#31867;AbstractModel&#20316;&#20026;&#36825;&#20123;&#27169;&#22411;&#31867;&#30340;&#36229;&#31867;&#65292; &#22312;AbstractModel&#31867;&#20013;&#20351;&#29992;java.beans.PropertyChangeListener &#25509;
        &#21475;&#21644; java.beans.PropertyChangeSupport&#31867;&#23436;&#25104;&#36825;&#20010;&#30446;&#30340;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.beans.PropertyChangeListener;
<strong class="hl-keyword">import</strong> java.beans.PropertyChangeSupport;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> AbstractModel {
	<strong class="hl-keyword">private</strong> PropertyChangeSupport listeners = <strong class="hl-keyword">new</strong> PropertyChangeSupport(<strong class="hl-keyword">this</strong>);

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addPropertyChangeListener(PropertyChangeListener listener) {
		listeners.addPropertyChangeListener(listener);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> firePropertyChange(String propName, Object oldValue,
			Object newValue) {
		listeners.firePropertyChange(propName, oldValue, newValue);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> removePropertyChangeListener(PropertyChangeListener listener) {
		listeners.removePropertyChangeListener(listener);
	}
}

    </pre><p>&#19979;&#38754;&#65292; &#25105;&#20204;&#23601;&#20351; AbstractModel &#20316;&#20026; HelloModel &#30340;&#36229;&#31867;&#65292; &#22240;&#20026;&#26159; HelloModel &#25913;&#21464;&#12290; &#28982;&#21518;&#22312; setConstraint 
        &#26041;&#27861;&#20013;&#35843;&#29992; firePropertyChange&#12290; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel   <strong class="hl-keyword">extends</strong> AbstractModel{
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String PROP_CONSTRAINT = <strong class="hl-string"><em style="color:red">"CONSTRAINT"</em></strong>;
	<strong class="hl-keyword">private</strong> String text=<strong class="hl-string"><em style="color:red">"hello word"</em></strong>;
	<strong class="hl-keyword">private</strong> Rectangle constraint;<em class="hl-comment" style="color: silver">//&#32422;&#26463;</em>
	<strong class="hl-keyword">public</strong> String getText() {
		<strong class="hl-keyword">return</strong> text;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
	
	}

	<strong class="hl-keyword">public</strong> Rectangle getConstraint() {
		<strong class="hl-keyword">return</strong> constraint;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
			<em class="hl-comment" style="color: silver">//&#36890;&#30693;</em>
		firePropertyChange(PROP_CONSTRAINT, null, constraint);
	}
	
}

    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#37324;&#27880;&#24847;&#25105;&#20204;&#35774;&#32622;&#20102;&#19968;&#20010;&#24120;&#37327; P_CONSTRAINT &#20316;&#20026;&#27169;&#22411;&#20013;&#32422;&#26463;&#25913;&#21464;&#30340;&#26631;&#31034;&#12290; 
            firePropertyChange &#30340;&#31532; 2&#20010;&#21442;&#25968;&#37117;&#26159; null&#12290; </p></td></tr></table></div></div><div class="section" title="&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2859"></a>&#22312; EditPart&#20013;&#27880;&#20876;&#30417;&#21548;&#22120; </h2></div></div></div><p>  &#28982;&#21518;&#65292;&#25105;&#20204;&#23601;&#35201;&#22312; EditPart &#30340; active()&#20013;&#27880;&#20876;&#30417;&#21548;&#22120;&#65292;&#36824;&#35201;&#22312; deactive()&#20013;&#21024;&#38500;&#30417;&#21548;&#22120;&#12290;&#21516;&#26679;&#30340;&#36947;&#29702;&#65292;&#25105;
    &#20204;&#21019;&#24314;&#19968;&#20010;&#25277;&#35937;&#30340; EditPart &#31867;&#65292;&#26469;&#27880;&#20876;&#30417;&#21548;&#22120;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.AbstractModel;

<strong class="hl-keyword">import</strong> java.beans.PropertyChangeListener;

<strong class="hl-keyword">import</strong> org.eclipse.gef.editparts.AbstractGraphicalEditPart;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> EditPartWithListener <strong class="hl-keyword">extends</strong> AbstractGraphicalEditPart
		<strong class="hl-keyword">implements</strong> PropertyChangeListener {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> activate() {
		<strong class="hl-keyword">super</strong>.activate();
		((AbstractModel) getModel()).addPropertyChangeListener(<strong class="hl-keyword">this</strong>);
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> deactivate() {
		<strong class="hl-keyword">super</strong>.deactivate();
		((AbstractModel) getModel()).removePropertyChangeListener(<strong class="hl-keyword">this</strong>);
	}

}

    </pre><p>  &#28982;&#21518;&#65292;&#25105;&#20204;&#30340; HelloEditPart &#35201;&#27966;&#29983;&#33258;&#36825;&#20010;&#25277;&#35937;&#31867;&#65292;&#28982;&#21518;&#22312;&#27169;&#22411;&#25913;&#21464;&#26102;&#21047;&#26032;&#35270;&#22270;&#12290;&#27880;&#24847;&#36825;&#37324;&#29992;&#21040;&#20102;&#25105;&#20204;
        &#21069;&#38754;&#35774;&#32622;&#30340;&#21464;&#37327; P_CONSTRAINT&#12290;&#36890;&#36807;&#36825;&#20010;&#21464;&#37327;&#25105;&#20204;&#25165;&#30693;&#36947;&#26159;&#35201;&#25913;&#21464; HelloModel&#27169;&#22411;&#30340;&#32422;&#26463;&#65292;&#19979;&#38754;&#30340;&#31456;
        &#33410;&#20013;&#25105;&#20204;&#36824;&#35201;&#25913;&#21464;&#25991;&#26412;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart  <strong class="hl-keyword">extends</strong> EditPartWithListener{
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) {
		<strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.PROP_CONSTRAINT))
			refreshVisuals();
		
	}
    .......
}
    </pre><p>&#20877;&#36816;&#34892;&#19968;&#19979;&#21543;&#65292;&#32477;&#23545;&#27809;&#38382;&#39064;&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step7/step7-1.jpg"></div></div><div class="section" title="Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2877"></a>Undo/redo &#25764;&#28040;/&#37325;&#22797;&#25805;&#20316; </h2></div></div></div><p>  &#25191;&#34892;&#36807;&#30340; Command &#37117;&#25918;&#22312; EditDomain &#65288;&#36824;&#35760;&#24471;&#25105;&#20204;&#31532; 1 &#22238;&#23601;&#35762;&#21040;&#30340;&#36825;&#20010;&#19996;&#35199;&#21543;&#65289; &#20013;&#30340; CommandStack
        &#20013;&#12290; &#24403;&#25191;&#34892; undo &#25805;&#20316;&#26102;&#65292; &#35813;&#21629;&#20196;&#20174;&#21629;&#20196;&#22534;&#26632;&#20013;&#24377;&#20986;&#65307; redo &#26102;&#65292; &#21017;&#20877;&#25918;&#36827;&#21435;&#12290; &#25152;&#20197;&#25105;&#20204;&#20043;&#38656;&#35201;&#22312;***Command
        &#31867;&#20013;&#37325;&#36733; Command#Undo &#23601;&#21487;&#20197;&#20102;&#12290;&#20294;&#26159;&#65292;&#25105;&#20204;&#36824;&#35201;&#35774;&#32622;&#19968;&#20010;&#21464;&#37327;&#20197;&#35760;&#24405;&#27169;&#22411;&#20197;&#21069;&#30340;&#29366;&#24577;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.draw2d.geometry.Rectangle;
<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ChangeConstraintCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<strong class="hl-keyword">private</strong> Rectangle constraint;
	<em class="hl-comment" style="color: silver">//&#20197;&#21069;&#30340;&#20301;&#32622;</em>
	<strong class="hl-keyword">private</strong> Rectangle oldConstraint;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		helloModel.setConstraint(constraint);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setModel(Object model) {
		<strong class="hl-keyword">this</strong>.helloModel = (HelloModel) model;
		<em class="hl-comment" style="color: silver">//&#35760;&#20303;&#20197;&#21069;&#30340;&#20301;&#32622;</em>
		oldConstraint = helloModel.getConstraint();
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setConstraint(Rectangle constraint) {
		<strong class="hl-keyword">this</strong>.constraint = constraint;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		<em class="hl-comment" style="color: silver">//&#37325;&#26032;&#22238;&#21040;&#20197;&#21069;&#30340;&#20301;&#32622;</em>
		helloModel.setConstraint(oldConstraint);
	}

}

    </pre><p>&#37027;&#20026;&#20160;&#20040;&#25105;&#20204;&#19981;&#37325;&#36733; redo()&#21602;&#65311;&#20174; Command &#20013;&#21487;&#20197;&#30475;&#20986; redo()&#25191;&#34892;&#30340;&#23601;&#26159; execute()&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> Command {
    .....
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> redo() {
		execute();
	}
    .......
}
        
    </pre><p>  &#22312; Java &#20013;&#65292;Undo/Redo&#26159; Action&#65292;&#25152;&#20197;&#25105;&#20204;&#35201;&#26377;&#33756;&#21333;&#25110;&#32773;&#24037;&#20855;&#25353;&#38062;&#26469;&#25191;&#34892;&#36825;&#20123; Action&#65292;&#37027;&#25105;&#20204;&#23601;&#39034;&#20415;
    &#25226;&#22914;&#20309;&#28155;&#21152;&#24037;&#20855;&#25353;&#38062;&#20171;&#32461;&#19968;&#19979;&#21543;&#12290;&#27493;&#39588;&#22914;&#19979;&#65306; &#65288;&#19981;&#35814;&#32454;&#35828;&#26126;&#65292;&#22823;&#23478;&#21435;&#30475;&#37027;&#20004;&#26412;&#20070;&#65289; </p><p>&#21019;&#24314;&#19968;&#20010; DiagramActionBarContributor&#31867;</p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.actions;

<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.ActionBarContributor;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.RedoRetargetAction;
<strong class="hl-keyword">import</strong> org.eclipse.gef.ui.actions.UndoRetargetAction;
<strong class="hl-keyword">import</strong> org.eclipse.jface.action.IToolBarManager;
<strong class="hl-keyword">import</strong> org.eclipse.ui.actions.ActionFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramActionBarContributor <strong class="hl-keyword">extends</strong> ActionBarContributor {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> buildActions() {
		addRetargetAction(<strong class="hl-keyword">new</strong> UndoRetargetAction());
		addRetargetAction(<strong class="hl-keyword">new</strong> RedoRetargetAction());
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> declareGlobalActionKeys() {
		<em class="hl-comment" style="color: silver">// TODO Auto-generated method stub</em>

	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> contributeToToolBar(IToolBarManager toolBarManager) {
		toolBarManager.add(getAction(ActionFactory.UNDO.getId()));
		toolBarManager.add(getAction(ActionFactory.REDO.getId()));
	}

}

    </pre><p> &#19979;&#38754;&#20869;&#23481;&#26469;&#33258; <a class="link" href="http://bjzhanghao.cnblogs.com/archive/2005/03/30/128704.html " target="_top">&#20843;&#36827;&#21046;</a>&#65306;</p><p> &#32534;&#36753;&#22120;&#27809;&#26377;&#33258;&#24049;&#30340;&#24037;&#20855;&#26465;&#65292;&#23427;&#30340;&#33756;&#21333;&#21482;&#33021;&#21152;&#22312;&#20027;&#33756;&#21333;&#37324;&#12290; &#65288;&#20854;&#23454;&#36825;&#35805;&#19981;&#33021;&#36825;&#20040;&#35828;&#65292;SWT Designer&#23601;&#26159; &#19968;&#20010;&#21453;&#20363;&#12290;EditPart &#22312; RCP&#20013;&#26159;&#21487;&#20197;&#28155;&#21152;&#24037;&#20855;&#26465;&#30340;&#12290;
        &#65289;</p><p>                &#39318;&#20808;&#35201;&#20171;&#32461; Retarget Action &#30340;&#27010;&#24565;&#65292;&#36825;&#26159;&#19968;&#31181;&#20855;&#26377;&#19968;&#23450;&#35821;&#20041;&#20294;&#27809;&#26377;&#23454;&#38469;&#21151;&#33021;&#30340; Action&#65292;&#23427;&#21807;&#19968;&#30340;&#20316;&#29992;
        &#23601;&#26159;&#22312;&#20027;&#33756;&#21333;&#26465;&#25110;&#20027;&#24037;&#20855;&#26465;&#19978;&#21344;&#25454;&#19968;&#20010;&#39033;&#20301;&#32622;&#65292; &#32534;&#36753;&#22120;&#21487;&#20197;&#23558;&#20855;&#26377;&#23454;&#38469; &#21151;&#33021;&#30340; Action &#26144;&#23556;&#21040;&#26576;&#20010; Retarget Action&#65292;&#24403;&#36825;&#20010;&#32534;&#36753;&#22120;&#34987;&#28608;&#27963;&#26102;&#65292;&#20027;&#33756;&#21333;/&#24037;&#20855;&#26465;&#19978;&#30340;&#37027;&#20010;
        Retarget Action&#23601;&#20250;&#20855;&#26377;&#37027;&#20010; Action &#30340;&#21151;&#33021;&#12290;</p><p>                &#20030; &#20363;&#26469;&#35828;&#65292;Eclipse &#25552;&#20379;&#20102; IWorkbenchActionConstants.COPY&#36825;&#20010; Retarget
        Action&#65292;&#23427;&#30340;&#25991;&#23383;&#21644;&#22270;&#26631;&#37117;&#26159;&#39044;&#20808; &#23450;&#20041;&#22909;&#30340;&#65292;&#20551;&#35774;&#25105;&#20204;&#30340;&#32534;&#36753;&#22120;&#38656;&#35201;&#19968;&#20010;"&#22797;&#21046;&#33410;&#28857;&#21040;&#21098;&#36148;&#26495;"&#21151;&#33021;&#65292;&#22240;&#20026;"&#22797;&#21046;&#33410;&#28857;"&#21644;"&#22797;&#21046;"&#36825;&#20004;&#20010;&#35789;&#30340;&#35821; &#20041;&#21313;&#20998;&#30456; &#36817;&#65292;&#25152;&#20197;&#21487;&#20197;&#26032;&#24314;&#19968;&#20010;&#20855;&#26377;&#23454;&#38469;&#21151;&#33021;&#30340;
        CopyNodeAction&#65288;extends Action&#65289; &#65292;&#28982;&#21518;&#22312;&#36866;&#24403;&#30340;&#20301;&#32622;&#35843; &#29992;&#19979;&#38754;&#20195;&#30721;&#23454;&#29616;&#20108;&#32773;&#30340;&#26144;&#23556;&#65306;
        IActionBars.setGlobalActionHandler(IWorkbenchActionConstants.COPY&#65292;copyNodeAction)
        &#24403;&#36825;&#20010;&#32534;&#36753;&#22120;&#34987;&#28608;&#27963;&#26102;&#65292;Eclipse &#20250;&#26816;&#26597;&#21040;&#36825;&#20010;&#26144;&#23556;&#65292;&#35753; COPY &#39033;&#21464;&#20026;&#21487;&#29992;&#29366;&#24577;&#65292;&#24182;&#19988;&#24403;&#29992;&#25143;&#25353;&#19979;&#23427;&#26102;&#21435;&#25191; &#34892; CopyNodeAction &#37324;&#23450;&#20041; &#30340;&#25805;&#20316;&#65292;&#21363;
        run()&#26041;&#27861;&#37324;&#30340;&#20195;&#30721;&#12290;Eclipse &#24341;&#20837;Retarget Action &#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#23613;&#37327; &#20943;&#23569;&#20027;&#33756;&#21333;/&#24037;&#20855;&#26465;&#30340;&#37325;&#24314;&#28040;&#32791;&#65292;&#24182;&#19988;&#26377;&#21033;&#20110;&#29992;&#25143;&#20351;&#29992;&#19978;&#30340;&#19968;&#33268;&#24615;&#12290;&#22312; GEF
        &#24212;&#29992;&#31243;&#24207;&#37324;&#65292;&#22240;&#20026;&#24456;&#21487;&#33021;&#23384;&#22312; &#22810;&#20010;&#35270;&#22270;&#65288;&#20363;&#22914;&#32534;&#36753;&#35270;&#22270; &#21644;&#22823;&#32434;&#35270;&#22270;&#65292;&#21363;&#20351;&#26242;&#26102;&#21482;&#26377;&#19968;&#20010;&#35270;&#22270;&#65292;&#20063;&#35201;&#32771;&#34385;&#21040;&#20197;&#21518;&#25193;&#23637;&#20026;&#22810;&#20010;&#30340;&#21487;&#33021;&#65289; &#65292;&#32780;
        &#27599;&#20010;&#35270;&#22270;&#37117;&#24212;&#35813;&#33021;&#22815;&#23436;&#25104;&#30456;&#31867;&#20284;&#30340;&#25805;&#20316;&#65292;&#20363;&#22914;&#22312;&#26641;&#32467;&#26500;&#30340;&#22823;&#32434;&#35270;&#22270;&#37324;&#20063;&#24212;&#35813;&#20687;&#32534;&#36753;&#35270; &#22270;&#19968;&#26679;&#21487;&#20197;&#21024;&#38500;&#36873; &#20013;&#33410;&#28857;&#65292;&#25152;&#20197;&#19968;&#33324;&#30340;&#25805;&#20316;&#37117;&#24212;&#20197;&#26144;&#23556;&#21040; Retarget Action &#30340;&#26041;&#24335;&#24314;&#31435;&#12290; </p><p>&#22312; plugin.xml &#25991;&#20214;&#20013;&#35774;&#32622; contributorClass&#12290;</p><div class="mediaobject"><img src="../../images/step7/step7-2.jpg"></div><p>&#36816;&#34892;</p><div class="mediaobject"><img src="../../images/step7/step7-3.jpg"></div></div></div><div class="article" title="&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2917"></a>&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e2937">&#21024;&#38500;&#22270;&#24418;</a></span></dt><dt><span class="section"><a href="#d0e2996">&#28155;&#21152;&#22270;&#24418; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3012">&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</a></span></dt><dt><span class="section"><a href="#d0e3026">&#21019;&#24314; Palette </a></span></dt><dt><span class="section"><a href="#d0e3040">&#21019;&#24314;&#27169;&#22411;&#30340; Command </a></span></dt><dt><span class="section"><a href="#d0e3049">&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</a></span></dt></dl></dd></dl></div><p>&#20869;&#23481;&#25552;&#35201; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#21024;&#38500;&#21644;&#28155;&#21152;&#22270;&#24418;</p></li><li class="listitem"><p>&#20174;&#35270;&#22270;Graphicalviewer &#20462;&#25913;&#22270;&#24418;&#21518;&#22914;&#20309;&#36890;&#30693;&#32473; model &#27169;&#22411; </p></li><li class="listitem"><p>&#20026;&#20160;&#20040;&#35201;&#24314;&#31435;&#25277;&#35937;&#27169;&#22411;</p></li><li class="listitem"><p>&#20351;&#29992; PaletterViewer&#12290;&#22914;&#20309;&#20026; PaletterViewer &#28155;&#21152;&#26631;&#20934;&#24037;&#20855; Tool&#65292;&#28155;&#21152;&#33258;&#23450;&#20041;&#24037;&#20855;&#65292;&#35774;
            &#32622; PaletterViewer&#30340;&#25277;&#23625; drawer&#23646;&#24615;&#35270;&#22270;  </p></li></ul></div><div class="section" title="&#21024;&#38500;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2937"></a>&#21024;&#38500;&#22270;&#24418;</h2></div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#19968;&#19979;&#22914;&#20309;&#21024;&#38500;&#22270;&#24418;&#12290;&#19968;&#33324;&#26469;&#35762;&#65292;&#21024;&#38500;&#22270;&#24418;&#38656;&#35201;&#19979;&#38754;&#30340;&#19968;&#20123;&#27493;&#39588;&#65306; </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#22312;&#24037;&#20855;&#26465;&#25110;&#32773;&#33756;&#21333;&#19978;&#21019;&#24314;&#30456;&#24212;&#30340; Action&#12290;</p></li><li class="listitem"><p> &#22312;&#22270;&#24418;&#27169;&#22411; A&#20013;&#21019;&#24314;&#30456;&#24212;&#30340;&#21024;&#38500;&#20989;&#25968; B&#65292;&#24182;&#36890;&#30693; Editpart &#30456;&#24212;&#30340;&#25913;&#21464;&#12290;</p></li><li class="listitem"><p>&#24403;&#21024;&#38500;&#22270;&#24418;&#26102;&#35201;&#29992;&#27169;&#22411; A&#23545;&#24212;&#30340; Editpart &#21047;&#26032; Graphical Editor&#26469;&#26174;&#31034;&#21024;&#38500;&#12290;</p></li><li class="listitem"><p> &#28982;&#21518;&#23601;&#35201;&#21019;&#24314;&#30456;&#24212;&#30340; Command &#26469;&#35843;&#29992;&#65288;2&#65289;&#20013;&#21019;&#24314;&#30340;&#21024;&#38500;&#20989;&#25968; B&#12290; </p></li><li class="listitem"><p> &#22312;&#30456;&#20851;&#30340; Policy&#20013;&#35843;&#29992;&#21069;&#38754;&#21019;&#24314;&#30340; Command&#12290;</p></li><li class="listitem"><p> &#22312;&#22270;&#24418;&#27169;&#22411; A&#30340;&#23376;&#27169;&#22411; C&#30340; Editpart&#20013;&#23433;&#35013;&#36825;&#20010; Policy&#12290;OK&#65281; </p></li></ul></div><p>&#25171;&#24320; DiagramActionBarContributor &#31867;&#65292;&#22312;&#20854;&#20013;&#28155;&#21152; Delete&#30340; Action</p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramActionBarContributor <strong class="hl-keyword">extends</strong> ActionBarContributor{
    ........
    <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> buildActions() {
		addRetargetAction(<strong class="hl-keyword">new</strong> UndoRetargetAction());
		addRetargetAction(<strong class="hl-keyword">new</strong> RedoRetargetAction());
        <em class="hl-comment" style="color: silver">//&#28155;&#21152;&#21024;&#38500;</em>
		addRetargetAction(<strong class="hl-keyword">new</strong> DeleteRetargetAction());
	}
    ......
     <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> contributeToToolBar(IToolBarManager toolBarManager) { 
        toolBarManager.add(getAction(ActionFactory.UNDO.getId())); 
        toolBarManager.add(getAction(ActionFactory.REDO.getId())); 
         <em class="hl-comment" style="color: silver">//&#28155;&#21152;&#21040;toolbar</em>
        toolBarManager.add(getAction(ActionFactory.DELETE.getId())); 
    }
    .......
}

    </pre><p>&#22240;&#27492;&#25105;&#20204;&#35201;&#21024;&#38500;&#30340; HelloModel &#26159;&#21253;&#21547;&#22312; ContentsModel &#20013;&#30340;&#65292;&#22240;&#27492;&#35201;&#22312;
        ContentsModel &#20013;&#28155;&#21152;&#21024;&#38500; HelloModel &#30340;&#20989;&#25968;&#12290;&#21478;&#22806;&#65292;&#25105;&#20204;&#30340; AbstractModel &#24050;&#32463;&#28155;&#21152;&#20102;
        PropertyChangeSupport &#26469;&#25903;&#25345;&#23545; Editpart &#30340;&#20449;&#24687;&#20256;&#36882;&#65292;&#22240;&#27492;&#65292;&#36825;&#37324;&#25105;&#20204;&#35753;
        ContentsModel &#32487;&#25215; AbstractModel&#12290;&#20462;&#25913; ContentsModel &#30340;&#20195;&#30721;&#22914;&#19979;&#65306; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.model;

<strong class="hl-keyword">import</strong> java.util.ArrayList;
<strong class="hl-keyword">import</strong> java.util.List;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsModel <strong class="hl-keyword">extends</strong> AbstractModel{
	<strong class="hl-keyword">private</strong> List children=<strong class="hl-keyword">new</strong> ArrayList();<em class="hl-comment" style="color: silver">//&#23376;&#27169;&#22411;&#21015;&#34920;</em>
	<em class="hl-comment" style="color: silver">// &#23450;&#20041;&#19979;&#38754;&#30340;&#23383;&#31526;&#20018;&#29992;&#20110;&#26631;&#35782;&#35813;&#27169;&#22411;&#20013;&#32467;&#26500;&#65288;Children&#65289;&#25913;&#21464; </em>
	  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String P_CHILDREN = <strong class="hl-string"><em style="color:red">"_children"</em></strong>; 
	<strong class="hl-tag" style="color: blue">/**
	 * &#28155;&#21152;&#23376;&#27169;&#22411;
	 * @param child
	 */</strong>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> addChild(Object child){
		<strong class="hl-keyword">this</strong>.children.add(child);
		 <em class="hl-comment" style="color: silver">// &#28155;&#21152;&#23376;&#27169;&#22411;&#21518;&#36890;&#30693; EditPart </em>
	      firePropertyChange(P_CHILDREN, null, null); 
	}
	<strong class="hl-tag" style="color: blue">/**
	 * &#33719;&#24471;&#23376;&#27169;&#22411;
	 * @return
	 */</strong>
	<strong class="hl-keyword">public</strong> List getChildren() {
		<strong class="hl-keyword">return</strong> children;
	}
	  <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> removeChild(Object child) { 
	        <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#19968;&#20010;&#23376;&#27169;&#22411; </em>
	        children.remove(child); 
	        <em class="hl-comment" style="color: silver">// &#21024;&#38500;&#23376;&#27169;&#22411;&#21518;&#36890;&#30693; EditPart </em>
	        firePropertyChange(P_CHILDREN, null, null); 
	 } 
}

    </pre><p>&#65289; &#28982;&#21518;&#65292; ContentsEditPart &#35201;&#33021;&#24863;&#30693; ContentsModel&#30456;&#24212;&#30340;&#25913;&#21464;&#24182;&#20462;&#25913; Graphical Editor
    &#19978;&#22270;&#24418;&#30340;&#26174;&#31034;&#12290;&#26041;&#27861;&#21644;&#21069;&#38754;&#20171;&#32461;&#30340;&#35813;&#25913;&#21464; HelloEditPart &#30340;&#26041;&#27861;&#19968;&#26679;&#12290;&#20195;&#30721;&#22914;&#19979;&#65306;</p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ContentsEditPart <strong class="hl-keyword">extends</strong> EditPartWithListener { 
  ... 
   <em><span class="hl-annotation" style="color: gray">@Override</span></em>
  <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) { 
    <em class="hl-comment" style="color: silver">// &#27169;&#22411;&#25913;&#21464;&#26102;&#36890;&#30693; </em>
    <strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(ContentsModel.P_CHILDREN)) { 
      <em class="hl-comment" style="color: silver">// &#22240;&#27492;&#23376;&#27169;&#22411;&#25913;&#21464;&#65292;&#35201;&#21047;&#26032;&#23376;&#27169;&#22411;&#30340; Editpart&#26174;&#31034;&#20854;&#25913;&#21464; </em>
      refreshChildren(); 
    } 
  } 
  ... 
} 
        
        
    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#27880;&#24847;&#36825;&#37324;&#21033;&#29992; refreshChildren &#26041;&#27861;&#26469;&#21047;&#26032;&#23376;&#27169;&#22411;&#30340; Editpart&#12290; </p></td></tr></table></div><p>&#35201;&#30495;&#30340;&#21024;&#38500;&#22270;&#24418;&#65292;&#36824;&#26159;&#35201;&#26377;&#30456;&#24212;&#30340; Command &#25165;&#34892;&#12290;&#22240;&#27492;&#25105;&#20204;&#21019;&#24314;&#20102;&#19979;&#38754;&#30340;DeleteCommand</p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DeleteCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> ContentsModel contentsModel;

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		<em class="hl-comment" style="color: silver">//&#21024;&#38500;&#27169;&#22411;</em>
		contentsModel.removeChild(helloModel);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setContentsModel(Object model) {
		contentsModel = (ContentsModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setHelloModel(Object model) {
		helloModel = (HelloModel) model;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		contentsModel.addChild(helloModel);
	}

}

    </pre><p> Command &#35201;&#22312; Editing Policy &#20013;&#35843;&#29992;&#12290;&#29992;&#25143;&#21457;&#20986; Delete &#21629;&#20196;&#26102;&#26159;&#21457;&#20986;&#30340;
        REQ_DELETE &#31867;&#22411;&#30340; Request&#65292;&#22240;&#27492;&#25105;&#20204;&#35201;&#32771;&#34385;&#22312;&#20160;&#20040;&#22320;&#26041;&#22788;&#29702;&#36825;&#20010; Request&#12290;GEF&#25552;&#20379;&#20102;
        ComponentEditPolicy&#26469;&#22788;&#29702; REQ_DELETE &#31867;&#22411;&#30340;Request&#12290;&#22312;ComponentEditPolicy&#31867;&#20013;&#65292;
        &#24403;&#21457;&#36865; REQ_DELETE &#31867;&#22411;&#30340; Request &#21518;&#65292;&#23601;&#35843;&#29992; createDeleteCommand &#26041;&#27861;&#65292;&#28982;&#21518;&#22312;&#35813;&#26041;
        &#27861;&#20013;&#29992;&#21069;&#38754;&#21019;&#24314;&#30340; DeleteCommand &#26469;&#23454;&#29616;&#23545;&#22270;&#24418;&#30340;&#21024;&#38500;&#12290; 
        &#25152;&#20197;&#65292;&#19979;&#38754;&#21019;&#24314;&#19968;&#20010; ComponentEditPolicy&#30340;&#27966;&#29983;&#31867; CustomComponentEditPolicy&#65292;
        &#28982;&#21518;&#37325;&#36733;&#20854; createDeleteCommand &#26041;&#27861;&#65292;&#20195;&#30721;&#22914;&#19979;&#65306; 
    </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.policies;

<strong class="hl-keyword">import</strong> gef.tutorial.step.commands.DeleteCommand;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;
<strong class="hl-keyword">import</strong> org.eclipse.gef.editpolicies.ComponentEditPolicy;
<strong class="hl-keyword">import</strong> org.eclipse.gef.requests.GroupRequest;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomComponentEditPolicy <strong class="hl-keyword">extends</strong> ComponentEditPolicy {
	   <em class="hl-comment" style="color: silver">// &#37325;&#36733; createDeleteCommand </em>
	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> Command createDeleteCommand(GroupRequest deleteRequest) {
		DeleteCommand deleteCommand = <strong class="hl-keyword">new</strong> DeleteCommand();
		deleteCommand.setContentsModel(getHost().getParent().getModel());
		deleteCommand.setHelloModel(getHost().getModel());
		<strong class="hl-keyword">return</strong> deleteCommand;
	}

}

    </pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#37324; getHost &#26041;&#27861;&#24471;&#21040;&#30340;&#26159; HelloModel &#30340; Editpart&#65292;&#36825;&#26159;&#22240;&#20026;&#36825;&#20010;
    CustomComponentEditPolicy &#35201;&#23433;&#35013;&#21040; HelloModel &#23545;&#24212;&#30340; HelloEditorPart &#20013;&#12290; </p></td></tr></table></div><p>&#26368;&#21518;&#65292;&#25226;&#36825;&#20010; CustomComponentEditPolicy &#23433;&#35013;&#21040; HelloEditPart &#20013;&#12290;&#36825;&#37324;
    &#20351;&#29992; GEF&#25552;&#20379;&#30340; COMPONENT_ROLE &#26469;&#26631;&#35782;&#36825;&#20010;&#23433;&#35013;&#30340; Policy&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditPart <strong class="hl-keyword">extends</strong> EditPartWithListener { 
  ... 
  <strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> createEditPolicies() { 
    installEditPolicy(EditPolicy.COMPONENT_ROLE, <strong class="hl-keyword">new</strong> CustomComponentEditPolicy()); 
  } 
  ... 
} 
        
    </pre><div class="mediaobject"><img src="../../images/step8/step8-1.jpg"></div></div><div class="section" title="&#28155;&#21152;&#22270;&#24418;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2996"></a>&#28155;&#21152;&#22270;&#24418; </h2></div></div></div><p>
       &#28155;&#21152;&#22270;&#24418;&#21644;&#21024;&#38500;&#22270;&#24418;&#22522;&#26412;&#36807;&#31243;&#24046;&#19981;&#22810;&#65292;&#19981;&#36807;&#25105;&#20204;&#36825;&#37324;&#35201;&#20171;&#32461; GEF &#25552;&#20379;&#30340; Palette&#65292;&#20316;&#20026;
       &#19968;&#28857;&#26032;&#40092;&#30340;&#19996;&#35199;&#12290; 
   </p><p>Palette &#20013;&#25918;&#32622;&#30340;&#25152;&#26377;&#19996;&#19996;&#37117;&#31216;&#20026;&#24037;&#20855; Tool&#12290;&#25152;&#20197; Palette &#23601;&#26159;&#24037;&#20855;&#31665;&#12290;&#23545;&#20110;&#19968;&#20010;&#22797;&#26434;&#30340;
        &#32472;&#22270;&#36719;&#20214;&#26469;&#35762;&#65292;&#24037;&#20855;&#20250;&#26377;&#24456;&#22810;&#65292;&#22240;&#27492;&#31867;&#20284;&#30340;&#24037;&#20855;&#35201;&#25918;&#22312;&#19968;&#20010;&#24037;&#20855;&#30418;&#20013;&#65292;GEF &#37324;&#21483; Drawer&#65288;&#25277;
        &#23625;&#65289; &#12290;&#38500;&#20102;&#33258;&#24049;&#23450;&#20041;&#30340;&#19968;&#20123;&#24037;&#20855;&#20043;&#22806;&#65292;GEF&#36824;&#25552;&#20379;&#20102;&#19968;&#20123;&#36890;&#29992;&#30340;&#24037;&#20855;&#65292;&#35692;&#22914;&#8220;&#36873;&#25321;&#22270;&#24418;&#8221;&#21644;
        &#8220;&#36873;&#25321;&#22810;&#20010;&#22270;&#24418;&#8221;&#31561;&#12290; </p><p> GEF&#20013;&#23545;&#24037;&#20855;&#30340;&#25805;&#20316;&#20854;&#23454;&#23601;&#26159;&#23545;&#40736;&#26631;&#30340;&#25805;&#20316;&#12290;&#20363;&#22914;&#65292;&#24403;&#20351;&#29992;&#8220;&#36873;&#25321;&#22270;&#24418;&#8221;&#24037;&#20855;&#26102;&#65292;GEF
        &#35201;&#21028;&#26029;&#40736;&#26631;&#30340;&#20301;&#32622;&#65292;&#25165;&#33021;&#20915;&#23450;&#37027;&#20010;&#22270;&#24418;&#34987;&#36873;&#20013;&#65292;&#28982;&#21518;&#22270;&#24418;&#30340; Editpart &#20316;&#20986;&#21453;&#39304;&#26174;&#31034;&#36873;&#20013;&#30340;&#22270;
        &#24418;&#12290;&#21478;&#22806;&#65292;&#24403;&#40736;&#26631;&#25302;&#21160;&#31227;&#21160;&#22270;&#24418;&#26102;&#65292;&#20063;&#35201;&#21028;&#26029;&#40736;&#26631;&#30340;&#36816;&#21160;&#12290; </p><p>  &#24403;&#28155;&#21152;&#19968;&#20010;&#22270;&#24418;&#26102;&#65292;&#29992;&#25143;&#39318;&#20808;&#36873;&#25321;&#19968;&#20010;&#24037;&#20855; Tool&#65292;&#28982;&#21518;&#35843;&#29992;&#23433;&#35013;&#22312; Editpart&#65288;&#36825;&#37324;&#26159;&#29238;
        Editpart&#65289;&#20013;&#30340; Policy&#20013;&#30340; Command&#65288;&#36825;&#37324;&#26159; CreateCommand&#65289;&#22312;&#40736;&#26631;&#28857;&#20987;&#30340;&#20301;&#32622;&#32472;&#21046;&#19968;&#20010;
        &#22270;&#24418;&#12290;&#32780;&#19988;&#65292;&#24403;&#29992;&#25143;&#25302;&#21160;&#40736;&#26631;&#26102;&#65292;&#23558;&#25913;&#21464;&#22270;&#24418;&#30340;&#23610;&#23544;&#12290; </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/D:/install/Oxygen%20XML%20Editor%2012/frameworks/docbook/xsl/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>&#36825;&#20123;Tool &#20063;&#21487;&#20197;&#19981;&#29992;&#25918;&#22312; Palette &#20013;&#12290;</p></td></tr></table></div><div class="section" title="&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3012"></a>&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#24102; Palette &#30340; Graphical Editor</h3></div></div></div><p>&#20026;&#20102;&#23454;&#29616;&#24102; Palette &#30340; Graphical Editor &#65292; GEF &#25552;&#20379;&#20102;&#19968;&#20010;
    org.eclipse.gef.ui.parts.GraphicalEditorWithPalette &#31867;&#12290; </p><p>  &#20174;&#19979;&#38754;&#30340;&#26641;&#21487;&#20197;&#30475;&#20986;&#65292;GraphicalEditorWithPalette &#31867;&#26159;&#20174; GraphicalEditor &#31867;&#32487;&#25215;&#26469;
        &#30340;&#65292;&#22240;&#27492;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#25226; DiagramEditor &#25913;&#20026;&#20174; GraphicalEditorWithPalette &#31867;&#27966;&#29983;&#65292;&#24182;
        &#19988;&#35201;&#32487;&#25215; getPaletteRoot&#26041;&#27861;&#12290; </p><div class="mediaobject"><img src="../../images/step8/step8-2.jpg"></div><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloWorldEditor <strong class="hl-keyword">extends</strong> GraphicalEditorWithPalette { 
  ... 
  <strong class="hl-keyword">protected</strong> PaletteRoot getPaletteRoot() { 
    <em class="hl-comment" style="color: silver">// &#21518;&#38754;&#35201;&#37325;&#36733;&#35813;&#26041;&#27861;&#65292;&#22312; Palette &#20013;&#21152;&#19978; Tools </em>
    <strong class="hl-keyword">return</strong> null; 
  } 
  ... 
} 
        
    </pre></div><div class="section" title="&#21019;&#24314; Palette"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3026"></a>&#21019;&#24314; Palette </h3></div></div></div><p>&#22240;&#20026;&#21019;&#24314; Palette &#23454;&#22312;&#22826;&#31616;&#21333;&#65292;&#22240;&#27492;&#25105;&#19981;&#32454;&#35828;&#65292;&#21482;&#26159;&#35831;&#22823;&#23478;&#30475;&#19979;&#38754;&#20195;&#30721;&#20013;&#30340;&#27493;&#39588;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> DiagramEditor <strong class="hl-keyword">extends</strong> GraphicalEditorWithPalette {
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> PaletteRoot getPaletteRoot() {
		  <em class="hl-comment" style="color: silver">// &#65288;1&#65289;&#39318;&#20808;&#35201;&#21019;&#24314;&#19968;&#20010;palette&#30340;route  </em>
	      PaletteRoot root = <strong class="hl-keyword">new</strong> PaletteRoot(); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;2&#65289;&#21019;&#24314;&#19968;&#20010;&#24037;&#20855;&#32452;&#29992;&#20110;&#25918;&#32622;&#24120;&#35268;Tools </em>
	      PaletteGroup toolGroup = <strong class="hl-keyword">new</strong> PaletteGroup(<strong class="hl-string"><em style="color:red">"&#24037;&#20855;"</em></strong>); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;3&#65289;&#21019;&#24314;&#19968;&#20010;GEF&#25552;&#20379;&#30340;&#8220;selection&#8221;&#24037;&#20855;&#24182;&#23558;&#20854;&#25918;&#21040;toolGroup&#20013; </em>
	      ToolEntry tool = <strong class="hl-keyword">new</strong> SelectionToolEntry(); 
	      toolGroup.add(tool); 
	      root.setDefaultEntry(tool); <em class="hl-comment" style="color: silver">// &#35813;&#65288;&#36873;&#25321;&#65289;&#24037;&#20855;&#26159;&#32570;&#30465;&#34987;&#36873;&#25321;&#30340;&#24037;&#20855; </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;4&#65289;&#21019;&#24314;&#19968;&#20010;GEF&#25552;&#20379;&#30340;&#8220;Marquee&#22810;&#36873;&#8221;&#24037;&#20855;&#24182;&#23558;&#20854;&#25918;&#21040;toolGroup&#20013; </em>

	      tool = <strong class="hl-keyword">new</strong> MarqueeToolEntry(); 
	      toolGroup.add(tool); 
	 
	      <em class="hl-comment" style="color: silver">// &#65288;5&#65289;&#21019;&#24314;&#19968;&#20010;Drawer&#65288;&#25277;&#23625;&#65289;&#25918;&#32622;&#32472;&#22270;&#24037;&#20855;&#65292;&#35813;&#25277;&#23625;&#21517;&#31216;&#20026;&#8220;&#30011;&#22270;&#8221; </em>
	      PaletteDrawer drawer = <strong class="hl-keyword">new</strong> PaletteDrawer(<strong class="hl-string"><em style="color:red">"&#30011;&#22270;"</em></strong>); 
	   <em class="hl-comment" style="color: silver">// &#25351;&#23450;&#8221;&#21019;&#24314;HelloModel&#27169;&#22411;&#8221;&#24037;&#20855;&#25152;&#23545;&#24212;&#30340;&#22270;&#26631; </em>
<em class="hl-comment" style="color: silver">//	      ImageDescriptor descriptor = </em>
<em class="hl-comment" style="color: silver">//	AbstractUIPlugin.imageDescriptorFromPlugin(Application.PLUGIN_ID, </em>
<em class="hl-comment" style="color: silver">//	IImageKeys.NEWHELLOMODEL); </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;6&#65289;&#21019;&#24314;&#8221;&#21019;&#24314;HelloModel&#27169;&#22411;&#8221;&#24037;&#20855; </em>
	      CreationToolEntry creationEntry = 
	        <strong class="hl-keyword">new</strong> CreationToolEntry( 
	          <strong class="hl-string"><em style="color:red">"&#32472;&#21046;HelloModel"</em></strong>, <em class="hl-comment" style="color: silver">// The character string displayed on a palette </em>
	          <strong class="hl-string"><em style="color:red">"&#21019;&#24314;HelloModel&#27169;&#22411;"</em></strong>, <em class="hl-comment" style="color: silver">// Tool &#25552;&#31034; </em>
	          <strong class="hl-keyword">new</strong> SimpleFactory(HelloModel.<strong class="hl-keyword">class</strong>), <em class="hl-comment" style="color: silver">// The factory which creates a model </em>
	          null, <em class="hl-comment" style="color: silver">// The image of 16X16 displayed on a palette </em>
	          null);<em class="hl-comment" style="color: silver">// The image of 24X24 displayed on a palette </em>
	      drawer.add(creationEntry);  <em class="hl-comment" style="color: silver">// &#65288;7&#65289;&#23558;&#20854;&#21152;&#21040;&#21069;&#38754;&#21019;&#24314;&#30340;&#25277;&#23625;&#20013; </em>
	 
	      <em class="hl-comment" style="color: silver">// &#65288;8&#65289;&#26368;&#21518;&#23558;&#21019;&#24314;&#30340;&#20004;&#32452;&#24037;&#20855;&#21152;&#21040;root&#19978;. </em>
	      root.add(toolGroup); 
	      root.add(drawer); 
	 
	      <strong class="hl-keyword">return</strong> root; 
	}
    ........
        
    </pre><p> &#34429;&#28982;&#25105;&#20204;&#21069;&#38754;&#20351;&#29992;&#20102; CreationToolEntry &#31867;&#26469;&#20026;&#8220;&#30011;&#22270;&#8221;&#25277;&#23625; drawer&#28155;&#21152;&#19968;&#20010;&#24037;&#20855;&#65292;&#20294; &#26159;&#22240;&#20026;&#25105;&#20204;&#20351;&#29992;&#20102;
        SimpleFactory&#65292;&#22240;&#27492;&#22312;&#35813;&#20989;&#25968;&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;&#20102; HelloModel &#30340; newInstance&#65292;&#36824;&#26159;&#25226;&#35813; Entry&#25351;&#23450;&#20026;&#32472;&#21046;&#19968;&#20010; HelloModel &#22270;&#24418;&#12290;
        &#36816;&#34892;&#19968;&#19979;&#65292;&#23601;&#20250;&#21457;&#29616; Palette &#24050;&#32463;&#21152;&#19978;&#20102;&#12290; </p><div class="mediaobject"><img src="../../images/step8/step8-3.jpg"></div></div><div class="section" title="&#21019;&#24314;&#27169;&#22411;&#30340; Command"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3040"></a>&#21019;&#24314;&#27169;&#22411;&#30340; Command </h3></div></div></div><p>&#21644;&#21024;&#38500;&#27169;&#22411;&#19968;&#26679;&#65292;&#35201;&#26032;&#24314;&#19968;&#20010;&#27169;&#22411;&#20063;&#35201;&#26377;&#30456;&#24212;&#30340; Command&#65292;&#19979;&#38754;&#25105;&#20204;&#23601;&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;
    CreateCommand&#30340; Command &#26469;&#25191;&#34892;&#26032;&#24314;&#22270;&#24418;&#30340;&#20219;&#21153;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.commands;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.ContentsModel;
<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.commands.Command;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CreateCommand <strong class="hl-keyword">extends</strong> Command {

	<strong class="hl-keyword">private</strong> ContentsModel contentsModel;

	<strong class="hl-keyword">private</strong> HelloModel helloModel;

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> execute() {
		contentsModel.addChild(helloModel);
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setContentsModel(Object model) {
		contentsModel = (ContentsModel) model;
	}

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setHelloModel(Object model) {
		helloModel = (HelloModel) model;
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> undo() {
		contentsModel.removeChild(helloModel);
	}

}

    </pre></div><div class="section" title="&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3049"></a>&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; Command</h3></div></div></div><p>&#28982;&#21518;&#23601;&#26159;&#27627;&#26080;&#24748;&#24565;&#30340;&#22312; XYLayoutEditPolicy&#20013;&#35843;&#29992;&#21019;&#24314;&#27169;&#22411;&#30340; CreateCommand&#65292; &#36825;&#26159;&#22240;
    &#20026;&#22312;&#36825;&#20010; Policy&#20013;&#26377; CreateRequest &#35831;&#27714;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomXYLayoutEditPolicy <strong class="hl-keyword">extends</strong> XYLayoutEditPolicy { 
.....
<strong class="hl-keyword">protected</strong> Command getCreateCommand(CreateRequest request) { 
     CreateCommand command = <strong class="hl-keyword">new</strong> CreateCommand(); 
     <em class="hl-comment" style="color: silver">// &#20135;&#29983;&#21019;&#24314;&#22270;&#24418;&#30340;&#23610;&#23544;&#21644;&#20301;&#32622; </em>
     Rectangle constraint = (Rectangle) getConstraintFor(request); 
     <em class="hl-comment" style="color: silver">// &#33719;&#24471;&#26032;&#21019;&#24314;&#30340;&#22270;&#24418; </em>
     HelloModel model = (HelloModel) request.getNewObject(); 
     <em class="hl-comment" style="color: silver">// &#20026;&#35813;&#22270;&#24418;&#35774;&#32622;&#21069;&#38754;&#33719;&#24471;&#30340;&#20301;&#32622;&#21644;&#23610;&#23544; </em>
     model.setConstraint(constraint); 
     <em class="hl-comment" style="color: silver">// &#23558;&#26032;&#21019;&#24314;&#30340;&#22270;&#24418;&#28155;&#21152;&#21040;&#27169;&#22411;&#20013;&#65292; </em>
<em class="hl-comment" style="color: silver">// &#22240;&#20026;&#25105;&#20204;&#22312;&#31532; 2 &#39029;&#30340;&#65288;2&#65289;&#20013;&#24050;&#32463;&#25226;&#27169;&#22411;&#26356;&#25913;&#21644;&#23427;&#20204;&#30340; Editpart &#32852;&#31995;&#36215;&#26469;&#65292; </em>
<em class="hl-comment" style="color: silver">// &#22240;&#27492;&#65292;Graphical Editor&#20013;&#30340;&#22270;&#24418;&#20063;&#20250;&#21457;&#29983;&#21464;&#21270; </em>
     command.setContentsModel(getHost().getModel()); 
     command.setHelloModel(model); 
     <strong class="hl-keyword">return</strong> command; 
 } 
.....
}
        
    </pre><p>&#25191;&#34892;&#19968;&#19979;&#12290;&#36873;&#25321;&#8220;&#21019;&#24314; HelloModel&#27169;&#22411;&#8221;&#24037;&#20855;&#22312; Graphical Editor&#19978;&#23601;&#20250;&#20986;&#29616;&#19968;&#20010;&#24102;&#21152;
        &#21495;&#30340;&#20809;&#26631;&#65288;&#36825;&#20010;&#20809;&#26631;&#26159;&#22312; CreationTool &#20013;&#25552;&#20379;&#30340;&#65292;&#35265;&#19979;&#38754;&#20195;&#30721;&#65289; &#65292;&#22312;&#26576;&#20301;&#32622;&#21333;&#20987;&#23601;&#20250;&#21019;&#24314;&#19968;
        &#20010;&#26032;&#30340; HelloModel &#22270;&#24418;&#65292;&#35813;&#22270;&#24418;&#30340;&#23610;&#23544;&#26159;&#30001;&#22270;&#24418;&#20013;&#30340;&#23383;&#31526;&#20018;&#26469;&#20915;&#23450;&#30340;&#12290;&#32780;&#22914;&#26524;&#20320;&#22312;&#21019;&#24314;&#26032;
        &#30340; HelloModel &#22270;&#24418;&#26102;&#25302;&#21160;&#40736;&#26631;&#65292;&#37027;&#20040;&#22270;&#24418;&#30340;&#23610;&#23544;&#30001;&#25302;&#21160;&#20915;&#23450;&#12290;&#22914;&#19979;&#22270;&#25152;&#31034;&#12290; </p><pre class="programlisting"> <strong class="hl-keyword">public</strong> CreationTool() { 
     setDefaultCursor(SharedCursors.CURSOR_TREE_ADD); 
     setDisabledCursor(SharedCursors.NO); 
} 
    </pre><div class="mediaobject"><img src="../../images/step8/step8-4.jpg"></div><p>&#24635;&#32467;&#19968;&#19979;&#65306;&#35201;&#24819;&#20570;&#20107;&#65292;&#23601;&#35201;&#21019;&#24314;&#30456;&#24212;&#30340; Command&#65292;&#24182;&#19988;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#36824;&#35201;&#30693;&#36947;&#25226;&#36825;&#20123;
        Command&#25918;&#21040;&#21512;&#36866;&#30340;Policy&#20013;&#12290; &#22312;http://help.eclipse.org/help31/index.jsp&#30340;GEF Programmer's
        Guide &#20013;&#30340; Editing and Edit Policies &#20013;&#25552;&#20379;&#20102;&#19968;&#20123; Command &#21644; Policy&#30340;&#23545;&#24212;&#34920;&#12290; </p><p>  &#22823;&#23478;&#21487;&#20197;&#24819;&#24819;&#20026;&#20160;&#20040;&#21024;&#38500;&#22270;&#24418;&#30340;&#24037;&#20855;&#25353;&#38062;&#25918;&#22312;&#24037;&#20855;&#26465;&#20013;&#65292; &#32780;&#28155;&#21152;&#22270;&#24418;&#30340;&#25353;&#38062;&#25918;&#22312; Palette
        &#20013;&#12290;&#20854;&#23454;&#25105;&#35273;&#24471; Delete&#35201;&#27604; Create&#31616;&#21333;&#12290;&#25152;&#20197;GEF&#25226;&#23427;&#20204;&#25918;&#22312;&#19981;&#21516;&#22320;&#26041;&#65292;&#20063;&#31526;&#21512;&#29992;&#25143;&#30340;&#20064;
        &#24815;&#12290; </p></div></div></div><div class="article" title="&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3069"></a>&#23646;&#24615;&#35270;&#22270;&#21644;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e3073">&#20869;&#23481;&#25552;&#35201;</a></span></dt><dt><span class="section"><a href="#d0e3087">&#23646;&#24615;&#35270;&#22270;</a></span></dt><dt><span class="section"><a href="#d0e3113">&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3120">&#21019;&#24314; DirectEditManager </a></span></dt></dl></dd></dl></div><div class="section" title="&#20869;&#23481;&#25552;&#35201;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3073"></a>&#20869;&#23481;&#25552;&#35201;</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#26174;&#31034;&#23646;&#24615; Properties&#35270;&#22270;</p></li><li class="listitem"><p>&#22312; Properties&#20013;&#20462;&#25913;&#22270;&#24418;&#23646;&#24615;&#12290;</p></li><li class="listitem"><p>&#30452;&#25509;&#32534;&#36753;&#22270;&#24418;&#23646;&#24615;&#65292;&#36825;&#37324;&#26159;&#20462;&#25913;&#25991;&#26412;&#26694;&#20013;&#30340;&#25991;&#23383;</p></li></ul></div></div><div class="section" title="&#23646;&#24615;&#35270;&#22270;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3087"></a>&#23646;&#24615;&#35270;&#22270;</h2></div></div></div><p>&#21069;&#38754;&#30340;&#20363;&#23376;&#20013;&#22270;&#24418;&#30340;&#25991;&#26412;&#37117;&#26159;&#22266;&#23450;&#30340;&#65292; &#19979;&#38754;&#25105;&#20204;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;&#23646;&#24615;&#35270;&#22270; &#65288;property view&#65289;
        &#26469;&#20462;&#25913;&#22270;&#24418;&#30340;&#23646;&#24615;&#12290;&#23646;&#24615;&#35270;&#22270;&#26159;&#36890;&#36807; org.eclipse.ui.views.properties.IPropertySource&#25509;&#21475;&#23454;
        &#29616;&#30340;&#12290; 
        &#22312; GEF &#20013;&#65292;&#20351;&#29992;&#23646;&#24615;&#35270;&#22270;&#20462;&#25913;&#30340;&#26159;&#22270;&#24418;&#27169;&#22411;&#30340;&#23646;&#24615;&#65288;&#25442;&#21477;&#35805;&#35828;&#23601;&#26159;&#22270;&#24418;&#27169;&#22411;&#26159;&#23646;&#24615;&#35270;
        &#22270;&#30340;&#25968;&#25454;&#28304;&#65306;&#24403;&#22270;&#24418;&#27169;&#22411;&#25913;&#21464;&#26102;&#65288;&#22914;&#22270;&#24418;&#23610;&#23544;&#25110;&#25991;&#26412;&#25913;&#21464;&#26102;&#65289; &#65292;&#23646;&#24615;&#35270;&#22270;&#35201;&#21453;&#26144;&#30456;&#24212;&#25913;&#21464;&#65307;
        &#32780;&#22312;&#23646;&#24615;&#35270;&#22270;&#20013;&#20462;&#25913;&#23646;&#24615;&#26102;&#65292;&#22270;&#24418;&#20063;&#35201;&#21457;&#29983;&#30456;&#24212;&#25913;&#21464;&#65289; &#65292;&#22240;&#27492;&#65292;&#21482;&#38656;&#35201;&#25226; IPropertySource
        &#25509;&#21475;&#21644;&#22270;&#24418;&#27169;&#22411;&#31867;&#32467;&#21512;&#36215;&#26469;&#23601;&#34892;&#20102;&#65292; &#36825;&#23601;&#38656;&#35201;&#22270;&#24418;&#27169;&#22411;&#31867;&#23454;&#29616; &#65288;implements&#65289; IPropertySource
        &#25509;&#21475;&#12290; 
        1&#65294;  &#22240;&#20026;&#25105;&#20204;&#35201;&#29992;&#23646;&#24615;&#35270;&#22270;&#26469;&#23545;&#24212;&#20110;&#25152;&#26377;&#30340;&#22270;&#24418;&#27169;&#22411;&#65292;&#22240;&#27492;&#25105;&#20204;&#35753; AbstractModel
        &#26469;&#23454;&#29616; IPropertySource&#25509;&#21475;&#65292;&#24182;&#37325;&#36733;&#36825;&#20010;&#25509;&#21475;&#20013;&#30340;&#26041;&#27861;&#12290; </p><pre class="programlisting"><strong class="hl-keyword">import</strong> org.eclipse.ui.views.properties.IPropertyDescriptor;
<strong class="hl-keyword">import</strong> org.eclipse.ui.views.properties.IPropertySource;
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">abstract</strong> <strong class="hl-keyword">class</strong> AbstractModel <strong class="hl-keyword">implements</strong> IPropertySource { 
     ............
     <strong class="hl-keyword">public</strong> Object getEditableValue() { 
           <strong class="hl-keyword">return</strong> <strong class="hl-keyword">this</strong>; <em class="hl-comment" style="color: silver">// &#36820;&#22238;&#27169;&#22411;&#33258;&#36523;&#20316;&#20026;&#21487;&#32534;&#36753;&#30340;&#23646;&#24615;&#20540; </em>
     } 
    <strong class="hl-keyword">public</strong> IPropertyDescriptor[] getPropertyDescriptors() { 
     <em class="hl-comment" style="color: silver">// &#22914;&#26524;&#22312;&#25277;&#35937;&#27169;&#22411;&#20013;&#36820;&#22238;null&#20250;&#20986;&#29616;&#24322;&#24120;&#65292;&#22240;&#27492;&#36825;&#37324;&#36820;&#22238;&#19968;&#20010;&#38271;&#24230;&#20026;0&#30340;&#25968;&#32452; </em>
      <em class="hl-comment" style="color: silver">// &#21518;&#38754;&#23558;&#20171;&#32461;IPropertyDescriptor&#25968;&#32452; </em>
     <strong class="hl-keyword">return</strong> <strong class="hl-keyword">new</strong> IPropertyDescriptor[<span class="hl-number">0</span>]; 
    } 
    <strong class="hl-keyword">public</strong> Object getPropertyValue(Object id) { 
      
       <strong class="hl-keyword">return</strong> null; 
    } 
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">boolean</strong> isPropertySet(Object id) { 
        <strong class="hl-keyword">return</strong> false;
    }
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> resetPropertyValue(Object id) { 
       
    } 
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setPropertyValue(Object id, Object value) { 
      
     } 
  
     ............
}        
    </pre><p>&#20462;&#25913; HelloModel&#65292;&#20351;&#20854;&#23454;&#38469;&#19978;&#25104;&#20026;&#23646;&#24615;&#35270;&#22270;&#30340;&#25968;&#25454;&#28304;&#12290;&#36825;&#23601;&#35201;&#37325;&#36733; AbstractModel &#20013;&#30340;&#30456;&#24212;&#26041;&#27861;&#12290; </p><pre class="programlisting">
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloModel <strong class="hl-keyword">extends</strong> AbstractModel {
    ..........
	<em class="hl-comment" style="color: silver">/* &#36825;&#20010;&#22320;&#26041;&#28155;&#21152;&#30340;&#23383;&#31526;&#20018; ID &#29992;&#20110;&#25913;&#21464;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;&#26102;&#21487;&#20197;&#34987; Editpart &#35782;&#21035; */</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">final</strong> String P_TEXT = <strong class="hl-string"><em style="color:red">"_text"</em></strong>; <em class="hl-comment" style="color: silver">// &#9312;</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setText(String text) {
		<strong class="hl-keyword">this</strong>.text = text;
		<em class="hl-comment" style="color: silver">/*
		 * &#22270;&#24418;&#25991;&#26412;&#25913;&#21464;&#26102;&#36890;&#30693;&#20854; EditPart,&#36825;&#20010;&#22320;&#26041;&#20351;&#29992; firePropertyChange &#26041;&#27861;&#26469;&#36890;&#30693;&#22270;&#24418;&#27169;&#22411;&#30340; Editpart
		 * &#22270;&#24418;&#30340;&#25991;&#26412;&#24050;&#32463;&#25913;&#21464;&#12290; &#29616;&#22312;&#65292;&#25226;&#22270;&#24418;&#27169;&#22411;&#21644;&#23646;&#24615;&#35270;&#22270;&#24050;&#32463;&#32852;&#31995;&#36215;&#26469;&#20102;&#12290;
		 */</em>
		firePropertyChange(P_TEXT, null, text);
	}
	<em class="hl-comment" style="color: silver">/*
	 * &#19979;&#38754;&#26102;&#37325;&#36733; IPropertySource &#25509;&#21475;&#30340;&#26041;&#27861;
	 * &#20854;&#23454; Property View &#20013;&#29992; TableView&#26469;&#26174;&#31034;&#23646;&#24615;&#12290;&#31532;&#19968;&#21015;&#26159;&#23646;&#24615;&#21517;&#31216;&#65292;&#31532; 2 &#21015;&#26159;&#23646;&#24615;&#20540;&#12290;
	 * IPropertyDescriptor[]&#25968;&#32452;&#39038;&#21517;&#24605;&#20041;&#23601;&#26159;&#29992;&#26469;&#35774;&#32622;&#23646;&#24615;&#21517;&#31216;&#30340;&#12290;&#36825;&#37324;&#25105;&#20204;&#21482;&#25552;&#20379;&#20102;&#19968;&#20010;&#23646;&#24615;&#65292; &#24182;&#21629;&#21517;&#20026; Greeting
	 */</em>
	<strong class="hl-keyword">public</strong> IPropertyDescriptor[] getPropertyDescriptors() {
		IPropertyDescriptor[] descriptors = <strong class="hl-keyword">new</strong> IPropertyDescriptor[] { <strong class="hl-keyword">new</strong> TextPropertyDescriptor(
				P_TEXT, <strong class="hl-string"><em style="color:red">"Greeting"</em></strong>) };
		<strong class="hl-keyword">return</strong> descriptors;

	}

	<em class="hl-comment" style="color: silver">// &#20351;&#29992;&#23646;&#24615;&#30340; ID &#26469;&#33719;&#24471;&#35813;&#23646;&#24615;&#22312;&#23646;&#24615;&#35270;&#22270;&#30340;&#20540;</em>
	<strong class="hl-keyword">public</strong> Object getPropertyValue(Object id) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT)) {
			<em class="hl-comment" style="color: silver">// &#36825;&#37324;&#33719;&#24471; Property view &#20013;&#25991;&#26412;&#23646;&#24615;&#30340;&#20540;</em>
			<strong class="hl-keyword">return</strong> text;
		}
		<strong class="hl-keyword">return</strong> null;
	}

	<em class="hl-comment" style="color: silver">// &#21028;&#26029;&#23646;&#24615;&#35270;&#22270;&#20013;&#30340;&#23646;&#24615;&#20540;&#26159;&#21542;&#25913;&#21464;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#30340;&#23646;&#24615;&#21017;&#36820;&#22238; false</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">boolean</strong> isPropertySet(Object id) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT))
			<strong class="hl-keyword">return</strong> true;
		<strong class="hl-keyword">else</strong>
			<strong class="hl-keyword">return</strong> false;
	}

	<em class="hl-comment" style="color: silver">// &#35774;&#32622;&#25351;&#23450; Id &#30340;&#23646;&#24615;&#20540;&#12290;&#22914;&#26524;&#35813;&#23646;&#24615;&#19981;&#33021;&#25913;&#21464;&#25110;&#32773;&#27809;&#26377;&#36825;&#20010;&#23646;&#24615;&#65292;&#21017;&#19981;&#20316;&#20219;&#20309;&#20107;</em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> setPropertyValue(Object id, Object value) {
		<strong class="hl-keyword">if</strong> (id.equals(P_TEXT)) {
			<em class="hl-comment" style="color: silver">// &#25913;&#21464;&#25991;&#26412;&#26102;&#35774;&#32622;&#25991;&#26412;&#30340;&#23646;&#24615;&#20540;</em>
			setText((String) value);
		}
	}           
    ..........
}        
    </pre><p>&#22240;&#20026;&#25105;&#20204;&#36824;&#27809;&#25226;&#23646;&#24615;&#35270;&#22270;&#21644; HelloEditorPart &#32852;&#31995;&#36215;&#26469;&#65292;&#22240;&#27492;&#23601;&#31639;&#20320;&#22312;&#23646;&#24615;
        &#35270;&#22270;&#20462;&#25913;&#20102;&#22270;&#24418;&#30340;&#23646;&#24615;&#65292;&#22312; Graphical Editor &#20013;&#30340;&#22270;&#24418;&#20063;&#19981;&#20250;&#21457;&#29983;&#25913;&#21464;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;
        &#35201;&#20462;&#25913; HelloEditorPart &#26469;&#25509;&#21463;&#25991;&#26412;&#23646;&#24615;&#25913;&#21464;&#30340;&#36890;&#30693;&#12290; </p><pre class="programlisting">
<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> HelloEditorPart  <strong class="hl-keyword">extends</strong> EditPartWithListener{
    .......
    <em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> propertyChange(PropertyChangeEvent evt) {
		<strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.PROP_CONSTRAINT))
			refreshVisuals();
		 <strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong> (evt.getPropertyName().equals(HelloModel.P_TEXT)) { 
	          <em class="hl-comment" style="color: silver">// &#24403;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;&#23646;&#24615;&#25913;&#21464;&#26102;&#65292;&#22312;Graphical Editor&#20013;&#30340;&#22270;&#24418;&#25991;&#26412;&#20063;&#25913;&#21464; </em>
	          Label label = (Label) getFigure(); 
	          label.setText((String) evt.getNewValue()); 
	      } 
	}
    .......

}        
    </pre><p>&#36825;&#26102;&#20505;&#22914;&#26524;&#20320;&#36816;&#34892;&#31243;&#24207;&#65292; &#36824;&#26159;&#30475;&#19981;&#21040;Property View&#65292; &#36825;&#26159;&#22240;&#20026;&#20320;&#36824;&#35201;&#22312;Perspective
    &#20013;&#21152;&#19978; Property View&#12290; </p><pre class="programlisting"><strong class="hl-keyword">package</strong> gef.tutorial.step;

<strong class="hl-keyword">import</strong> org.eclipse.ui.IFolderLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPageLayout;
<strong class="hl-keyword">import</strong> org.eclipse.ui.IPerspectiveFactory;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> Perspective <strong class="hl-keyword">implements</strong> IPerspectiveFactory {

	<strong class="hl-keyword">public</strong> <strong class="hl-keyword">void</strong> createInitialLayout(IPageLayout layout) {
		<strong class="hl-keyword">final</strong> String properties = <strong class="hl-string"><em style="color:red">"org.eclipse.ui.views.PropertySheet"</em></strong>;
		<strong class="hl-keyword">final</strong> String editorArea = layout.getEditorArea();
		IFolderLayout leftTopFolder = layout.createFolder(<strong class="hl-string"><em style="color:red">"LeftTop"</em></strong>,
				IPageLayout.LEFT, <span class="hl-number">0.34f</span>, editorArea);
		leftTopFolder.addView(properties);
		layout.setEditorAreaVisible(true);
	}
}
        
    </pre><p>  &#22909;&#20102;&#65292;&#36816;&#34892;&#19968;&#19979;&#31243;&#24207;&#65292;&#22312; Property View&#20013;&#20462;&#25913;&#25991;&#26412;&#30340;&#20540;&#65292;&#28982;&#21518;&#22238;&#36710;&#23601;&#21487;&#20197;&#30475;&#21040;&#22270;&#24418;&#30340;
    &#25991;&#26412;&#20063;&#21457;&#29983;&#20102;&#25913;&#21464;&#12290;</p><div class="mediaobject"><img src="../../images/step9/step9-1.jpg"></div></div><div class="section" title="&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3113"></a>&#30452;&#25509;&#22312; Graphical Editor &#20013;&#32534;&#36753;&#25991;&#26412; </h2></div></div></div><p> 
        &#21069;&#38754;&#30340;&#26041;&#27861;&#25913;&#21464;&#22270;&#24418;&#25991;&#26412;&#35980;&#20284;&#24456;&#22909;&#20102;&#65292;&#20294;&#26159;&#22914;&#26524;&#33021;&#30452;&#25509;&#22312; Graphical editor &#20013;&#20462;&#25913;&#25991;
        &#26412;&#23682;&#19981;&#26159;&#26356; kool&#12290;&#36825;&#19981;&#23601;&#26159;&#25152;&#35859;&#30340;&#8220;&#25152;&#35265;&#21363;&#25152;&#24471;&#8221;&#39532;&#65311;&#19979;&#38754;&#25105;&#20204;&#23601;&#20171;&#32461;&#20004;&#31181;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;
        &#24471;&#26041;&#27861;&#65306;&#40736;&#26631;&#21333;&#20987;&#36873;&#20013;&#22270;&#24418;&#21518;&#20877;&#21333;&#20987;&#40736;&#26631;&#65307;&#25110;&#32773;&#36873;&#20013;&#22270;&#24418;&#21518;&#25353; F2&#12290; 
        &#30452;&#25509;&#25991;&#26412;&#32534;&#36753;&#26159;&#36890;&#36807; REQ_DIRECT_EDIT &#31867;&#22411;&#30340; Request &#23454;&#29616;&#30340;&#65292;&#28982;&#21518; GEF &#38656;&#35201;&#30456;
        &#24212;&#30340; Command &#26469;&#25191;&#34892;&#23545;&#22270;&#24418;&#27169;&#22411;&#30340;&#30452;&#25509;&#32534;&#36753;&#12290;&#34429;&#28982;&#21644;&#21069;&#38754;&#35762;&#30340;&#26041;&#27861;&#19968;&#26679;&#65292;&#30452;&#25509;&#32534;&#36753;&#25991;&#26412;&#20063;
        &#26159;&#35201;&#22312;&#19968;&#20010;&#32534;&#36753;Policy&#31867;&#20013;&#25191;&#34892;Command&#65292; &#20294;&#26159;&#25152;&#19981;&#21516;&#30340;&#26159;&#65292; &#22312;&#21019;&#24314;&#32534;&#36753;Policy&#21644;Command
        &#20043;&#21069;&#65292; &#39318;&#20808;&#38656;&#35201;&#21019;&#24314; org.eclipse.gef.tools.DirectEditManager &#26469;&#25191;&#34892;&#23545;&#22270;&#24418;&#25991;&#26412;&#30340;&#30452;&#25509;&#32534;&#36753;&#12290;
        DirectEditManager &#25152;&#36215;&#30340;&#20316;&#29992;&#26159;&#25351;&#23450; Cell Editor&#21644;&#35774;&#32622; cell editor&#30340;&#20301;&#32622;&#12290; </p><div class="section" title="&#21019;&#24314; DirectEditManager"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3120"></a>&#21019;&#24314; DirectEditManager </h3></div></div></div><p>  &#39318;&#20808;&#65292;DirectEditManager&#26159;&#19968;&#20010;&#25277;&#35937;&#31867;&#65292;&#22240;&#27492;&#25105;&#20204;&#35201;&#27966;&#29983;&#33258;&#24049;&#30340;&#23454;&#38469;&#23376;&#31867;&#12290;&#19979;&#38754;&#25105;&#20204;
    &#32447;&#20171;&#32461;&#19968;&#19979; DirectEditManager &#30340;&#26500;&#36896;&#20989;&#25968;&#30340;&#21442;&#25968;&#12290; </p><p>public DirectEditManager(GraphicalEditPart source, Class editorType, CellEditorLocator locator) </p><p>&#36825;&#37324;&#65292; source&#23545;&#24212;&#19982;&#38656;&#32534;&#36753;&#27169;&#22411;&#30340; Editpart&#12290; editorType &#25351;&#23450;&#20102;&#29992;&#20110;&#32534;&#36753;&#27169;&#22411;&#23646;&#24615;&#30340; cell 
        editor&#30340;&#31867;&#22411;&#12290;&#36825;&#37324;&#30340; cell editor &#26159;&#20174; org.eclipse.jface.viewers.CellEditor&#27966;&#29983;&#30340;&#12290;&#32780;&#31649;&#29702; cell 
        editor&#25152;&#22788;&#20026;&#27490;&#30340;&#31867;&#30001;locator&#25351;&#23450;&#65292; &#36825;&#20010;locator&#35201;&#23454;&#29616;org.eclipse.gef.tools.CellEditorLocator
        &#25509;&#21475;&#12290; </p><p>&#19979;&#38754;&#65292; &#22312;package  gef.tutorial.step.parts;&#21253;&#20013;&#21019;&#24314;&#19968;&#20010;DirectEditManager
    &#30340;&#27966;&#29983;&#31867; CustomDirectEditManager&#12290;&#36825;&#37324;&#25226; cell editor &#35774;&#32622;&#20026; Text &#25511;&#20214;&#12290; </p><pre class="programlisting">
        <strong class="hl-keyword">package</strong> gef.tutorial.step.parts;

<strong class="hl-keyword">import</strong> gef.tutorial.step.model.HelloModel;

<strong class="hl-keyword">import</strong> org.eclipse.gef.GraphicalEditPart;
<strong class="hl-keyword">import</strong> org.eclipse.gef.tools.CellEditorLocator;
<strong class="hl-keyword">import</strong> org.eclipse.gef.tools.DirectEditManager;
<strong class="hl-keyword">import</strong> org.eclipse.swt.widgets.Text;

<strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> CustomDirectEditManager <strong class="hl-keyword">extends</strong> DirectEditManager {

	<strong class="hl-keyword">private</strong> HelloModel helloModel; <em class="hl-comment" style="color: silver">// &#35201;&#20462;&#25913;&#35813;&#27169;&#22411;&#30340;&#25991;&#26412;&#23646;&#24615;</em>

	<strong class="hl-keyword">public</strong> CustomDirectEditManager(GraphicalEditPart source, Class editorType,
			CellEditorLocator locator) {
		<strong class="hl-keyword">super</strong>(source, editorType, locator);
		<em class="hl-comment" style="color: silver">// &#33719;&#24471; HelloModel &#27169;&#22411;</em>
		helloModel = (HelloModel) source.getModel();
	}

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong class="hl-keyword">protected</strong> <strong class="hl-keyword">void</strong> initCellEditor() {
		<em class="hl-comment" style="color: silver">// &#22312;&#26174;&#31034;&#19968;&#20010; cell editor &#20043;&#21069;&#65292;&#20808;&#32473;&#23427;&#35774;&#32622;&#19968;&#20010;&#20540;</em>
		<em class="hl-comment" style="color: silver">// &#36825;&#37324;&#30340;&#20540;&#26159;&#33719;&#24471;&#22270;&#24418;&#27169;&#22411;&#30340;&#25991;&#26412;</em>
		getCellEditor().setValue(helloModel.getText());
		<em class="hl-comment" style="color: silver">// &#22312;&#25152;&#36873;&#20013;&#30340; TextCellEditor &#30340; Text &#25511;&#20214;&#20013;&#30340;&#25152;&#26377;&#25991;&#26412;&#37117;&#26174;&#31034;&#20026;&#36873;&#25321;&#29366;&#24577;</em>
		Text text = (Text) getCellEditor().getControl();
		text.selectAll();
	}

}

    </pre></div></div></div></div></div></div></div></body></html>